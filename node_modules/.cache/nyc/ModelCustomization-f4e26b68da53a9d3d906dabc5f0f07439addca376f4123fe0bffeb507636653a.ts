"use strict";function cov_j0z60mfgv(){var path="/home/nemo/work/github/typeorm-model-generator/src/ModelCustomization.ts";var hash="76ff3480001479740d9f8cb49e0592431af71bc4";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/nemo/work/github/typeorm-model-generator/src/ModelCustomization.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:32},end:{line:3,column:88}},"2":{start:{line:4,column:23},end:{line:4,column:50}},"3":{start:{line:5,column:18},end:{line:5,column:36}},"4":{start:{line:7,column:27},end:{line:13,column:5}},"5":{start:{line:14,column:4},end:{line:53,column:5}},"6":{start:{line:17,column:20},end:{line:17,column:90}},"7":{start:{line:18,column:8},end:{line:24,column:9}},"8":{start:{line:19,column:12},end:{line:19,column:111}},"9":{start:{line:20,column:12},end:{line:20,column:55}},"10":{start:{line:23,column:12},end:{line:23,column:113}},"11":{start:{line:25,column:8},end:{line:31,column:9}},"12":{start:{line:26,column:12},end:{line:26,column:111}},"13":{start:{line:27,column:12},end:{line:27,column:55}},"14":{start:{line:30,column:12},end:{line:30,column:113}},"15":{start:{line:32,column:8},end:{line:38,column:9}},"16":{start:{line:33,column:12},end:{line:33,column:121}},"17":{start:{line:34,column:12},end:{line:34,column:63}},"18":{start:{line:37,column:12},end:{line:37,column:123}},"19":{start:{line:39,column:8},end:{line:45,column:9}},"20":{start:{line:40,column:12},end:{line:40,column:119}},"21":{start:{line:41,column:12},end:{line:41,column:59}},"22":{start:{line:44,column:12},end:{line:44,column:121}},"23":{start:{line:46,column:8},end:{line:52,column:9}},"24":{start:{line:47,column:12},end:{line:47,column:146}},"25":{start:{line:48,column:12},end:{line:48,column:73}},"26":{start:{line:51,column:12},end:{line:51,column:146}},"27":{start:{line:54,column:4},end:{line:54,column:73}},"28":{start:{line:55,column:17},end:{line:55,column:57}},"29":{start:{line:56,column:4},end:{line:56,column:46}},"30":{start:{line:57,column:4},end:{line:57,column:58}},"31":{start:{line:58,column:4},end:{line:58,column:71}},"32":{start:{line:59,column:4},end:{line:59,column:66}},"33":{start:{line:60,column:4},end:{line:60,column:18}},"34":{start:{line:62,column:0},end:{line:62,column:42}},"35":{start:{line:65,column:27},end:{line:65,column:78}},"36":{start:{line:66,column:4},end:{line:85,column:7}},"37":{start:{line:67,column:8},end:{line:68,column:50}},"38":{start:{line:67,column:54},end:{line:68,column:48}},"39":{start:{line:69,column:31},end:{line:71,column:34}},"40":{start:{line:70,column:27},end:{line:70,column:36}},"41":{start:{line:71,column:24},end:{line:71,column:33}},"42":{start:{line:72,column:29},end:{line:73,column:28}},"43":{start:{line:74,column:8},end:{line:76,column:78}},"44":{start:{line:74,column:54},end:{line:76,column:76}},"45":{start:{line:77,column:8},end:{line:84,column:11}},"46":{start:{line:78,column:27},end:{line:78,column:46}},"47":{start:{line:80,column:32},end:{line:80,column:72}},"48":{start:{line:80,column:65},end:{line:80,column:71}},"49":{start:{line:81,column:28},end:{line:81,column:92}},"50":{start:{line:82,column:27},end:{line:82,column:83}},"51":{start:{line:83,column:12},end:{line:83,column:99}},"52":{start:{line:83,column:58},end:{line:83,column:97}},"53":{start:{line:86,column:4},end:{line:86,column:19}},"54":{start:{line:89,column:4},end:{line:94,column:7}},"55":{start:{line:90,column:8},end:{line:93,column:25}},"56":{start:{line:90,column:56},end:{line:93,column:23}},"57":{start:{line:92,column:41},end:{line:92,column:83}},"58":{start:{line:92,column:65},end:{line:92,column:82}},"59":{start:{line:95,column:4},end:{line:95,column:19}},"60":{start:{line:98,column:4},end:{line:100,column:5}},"61":{start:{line:99,column:8},end:{line:99,column:23}},"62":{start:{line:101,column:4},end:{line:126,column:7}},"63":{start:{line:102,column:8},end:{line:125,column:11}},"64":{start:{line:103,column:27},end:{line:103,column:56}},"65":{start:{line:104,column:12},end:{line:124,column:13}},"66":{start:{line:105,column:16},end:{line:109,column:17}},"67":{start:{line:108,column:20},end:{line:108,column:54}},"68":{start:{line:110,column:16},end:{line:118,column:17}},"69":{start:{line:116,column:20},end:{line:116,column:57}},"70":{start:{line:117,column:20},end:{line:117,column:53}},"71":{start:{line:119,column:16},end:{line:123,column:17}},"72":{start:{line:122,column:20},end:{line:122,column:53}},"73":{start:{line:127,column:4},end:{line:127,column:19}},"74":{start:{line:130,column:4},end:{line:137,column:7}},"75":{start:{line:131,column:8},end:{line:136,column:11}},"76":{start:{line:132,column:12},end:{line:135,column:13}},"77":{start:{line:133,column:48},end:{line:133,column:75}},"78":{start:{line:134,column:16},end:{line:134,column:63}},"79":{start:{line:138,column:4},end:{line:138,column:19}},"80":{start:{line:141,column:4},end:{line:141,column:39}},"81":{start:{line:142,column:4},end:{line:161,column:7}},"82":{start:{line:143,column:8},end:{line:150,column:11}},"83":{start:{line:144,column:12},end:{line:149,column:13}},"84":{start:{line:145,column:16},end:{line:147,column:17}},"85":{start:{line:146,column:20},end:{line:146,column:50}},"86":{start:{line:148,column:16},end:{line:148,column:53}},"87":{start:{line:151,column:8},end:{line:154,column:9}},"88":{start:{line:152,column:12},end:{line:152,column:38}},"89":{start:{line:153,column:12},end:{line:153,column:40}},"90":{start:{line:155,column:8},end:{line:157,column:9}},"91":{start:{line:156,column:12},end:{line:156,column:39}},"92":{start:{line:158,column:8},end:{line:160,column:9}},"93":{start:{line:159,column:12},end:{line:159,column:46}},"94":{start:{line:162,column:4},end:{line:162,column:19}},"95":{start:{line:165,column:17},end:{line:165,column:45}},"96":{start:{line:166,column:4},end:{line:166,column:43}},"97":{start:{line:167,column:4},end:{line:167,column:39}},"98":{start:{line:168,column:4},end:{line:168,column:39}},"99":{start:{line:169,column:4},end:{line:169,column:18}},"100":{start:{line:171,column:8},end:{line:182,column:11}},"101":{start:{line:172,column:12},end:{line:181,column:15}},"102":{start:{line:173,column:32},end:{line:173,column:52}},"103":{start:{line:174,column:33},end:{line:174,column:103}},"104":{start:{line:174,column:62},end:{line:174,column:102}},"105":{start:{line:175,column:30},end:{line:175,column:89}},"106":{start:{line:176,column:16},end:{line:176,column:82}},"107":{start:{line:177,column:16},end:{line:179,column:19}},"108":{start:{line:178,column:20},end:{line:178,column:108}},"109":{start:{line:178,column:67},end:{line:178,column:106}},"110":{start:{line:180,column:16},end:{line:180,column:47}},"111":{start:{line:183,column:8},end:{line:183,column:23}},"112":{start:{line:186,column:8},end:{line:206,column:11}},"113":{start:{line:187,column:12},end:{line:205,column:15}},"114":{start:{line:188,column:32},end:{line:188,column:50}},"115":{start:{line:189,column:30},end:{line:189,column:75}},"116":{start:{line:190,column:16},end:{line:190,column:82}},"117":{start:{line:191,column:38},end:{line:191,column:92}},"118":{start:{line:191,column:56},end:{line:191,column:91}},"119":{start:{line:192,column:34},end:{line:192,column:108}},"120":{start:{line:192,column:70},end:{line:192,column:107}},"121":{start:{line:193,column:16},end:{line:197,column:19}},"122":{start:{line:194,column:35},end:{line:194,column:62}},"123":{start:{line:196,column:20},end:{line:196,column:46}},"124":{start:{line:198,column:16},end:{line:198,column:45}},"125":{start:{line:199,column:16},end:{line:199,column:49}},"126":{start:{line:200,column:16},end:{line:204,column:17}},"127":{start:{line:201,column:20},end:{line:203,column:23}},"128":{start:{line:202,column:24},end:{line:202,column:94}},"129":{start:{line:202,column:53},end:{line:202,column:92}},"130":{start:{line:207,column:8},end:{line:207,column:23}},"131":{start:{line:210,column:8},end:{line:220,column:11}},"132":{start:{line:211,column:12},end:{line:219,column:15}},"133":{start:{line:212,column:32},end:{line:212,column:46}},"134":{start:{line:213,column:30},end:{line:213,column:79}},"135":{start:{line:214,column:16},end:{line:214,column:82}},"136":{start:{line:215,column:16},end:{line:217,column:19}},"137":{start:{line:216,column:20},end:{line:216,column:108}},"138":{start:{line:216,column:67},end:{line:216,column:106}},"139":{start:{line:218,column:16},end:{line:218,column:41}},"140":{start:{line:221,column:8},end:{line:221,column:21}},"141":{start:{line:224,column:8},end:{line:234,column:11}},"142":{start:{line:225,column:28},end:{line:225,column:77}},"143":{start:{line:226,column:12},end:{line:232,column:15}},"144":{start:{line:227,column:16},end:{line:231,column:19}},"145":{start:{line:228,column:20},end:{line:230,column:21}},"146":{start:{line:229,column:24},end:{line:229,column:56}},"147":{start:{line:233,column:12},end:{line:233,column:37}},"148":{start:{line:235,column:8},end:{line:235,column:24}}},fnMap:{"0":{name:"modelCustomizationPhase",decl:{start:{line:6,column:9},end:{line:6,column:32}},loc:{start:{line:6,column:76},end:{line:61,column:1}},line:6},"1":{name:"removeIndicesGeneratedByTypeorm",decl:{start:{line:63,column:9},end:{line:63,column:40}},loc:{start:{line:63,column:50},end:{line:87,column:1}},line:63},"2":{name:"(anonymous_2)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:85,column:5}},line:66},"3":{name:"(anonymous_3)",decl:{start:{line:67,column:47},end:{line:67,column:48}},loc:{start:{line:67,column:54},end:{line:68,column:48}},line:67},"4":{name:"(anonymous_4)",decl:{start:{line:70,column:20},end:{line:70,column:21}},loc:{start:{line:70,column:27},end:{line:70,column:36}},line:70},"5":{name:"(anonymous_5)",decl:{start:{line:71,column:17},end:{line:71,column:18}},loc:{start:{line:71,column:24},end:{line:71,column:33}},line:71},"6":{name:"(anonymous_6)",decl:{start:{line:74,column:47},end:{line:74,column:48}},loc:{start:{line:74,column:54},end:{line:76,column:76}},line:74},"7":{name:"(anonymous_7)",decl:{start:{line:78,column:20},end:{line:78,column:21}},loc:{start:{line:78,column:27},end:{line:78,column:46}},line:78},"8":{name:"(anonymous_8)",decl:{start:{line:79,column:21},end:{line:79,column:22}},loc:{start:{line:79,column:30},end:{line:84,column:9}},line:79},"9":{name:"(anonymous_9)",decl:{start:{line:80,column:58},end:{line:80,column:59}},loc:{start:{line:80,column:65},end:{line:80,column:71}},line:80},"10":{name:"(anonymous_10)",decl:{start:{line:83,column:51},end:{line:83,column:52}},loc:{start:{line:83,column:58},end:{line:83,column:97}},line:83},"11":{name:"removeColumnsInRelation",decl:{start:{line:88,column:9},end:{line:88,column:32}},loc:{start:{line:88,column:42},end:{line:96,column:1}},line:88},"12":{name:"(anonymous_12)",decl:{start:{line:89,column:20},end:{line:89,column:21}},loc:{start:{line:89,column:32},end:{line:94,column:5}},line:89},"13":{name:"(anonymous_13)",decl:{start:{line:90,column:47},end:{line:90,column:48}},loc:{start:{line:90,column:56},end:{line:93,column:23}},line:90},"14":{name:"(anonymous_14)",decl:{start:{line:92,column:32},end:{line:92,column:33}},loc:{start:{line:92,column:41},end:{line:92,column:83}},line:92},"15":{name:"(anonymous_15)",decl:{start:{line:92,column:58},end:{line:92,column:59}},loc:{start:{line:92,column:65},end:{line:92,column:82}},line:92},"16":{name:"removeColumnDefaultProperties",decl:{start:{line:97,column:9},end:{line:97,column:38}},loc:{start:{line:97,column:63},end:{line:128,column:1}},line:97},"17":{name:"(anonymous_17)",decl:{start:{line:101,column:20},end:{line:101,column:21}},loc:{start:{line:101,column:32},end:{line:126,column:5}},line:101},"18":{name:"(anonymous_18)",decl:{start:{line:102,column:31},end:{line:102,column:32}},loc:{start:{line:102,column:43},end:{line:125,column:9}},line:102},"19":{name:"findFileImports",decl:{start:{line:129,column:9},end:{line:129,column:24}},loc:{start:{line:129,column:34},end:{line:139,column:1}},line:129},"20":{name:"(anonymous_20)",decl:{start:{line:130,column:20},end:{line:130,column:21}},loc:{start:{line:130,column:32},end:{line:137,column:5}},line:130},"21":{name:"(anonymous_21)",decl:{start:{line:131,column:33},end:{line:131,column:34}},loc:{start:{line:131,column:47},end:{line:136,column:9}},line:131},"22":{name:"(anonymous_22)",decl:{start:{line:133,column:41},end:{line:133,column:42}},loc:{start:{line:133,column:48},end:{line:133,column:75}},line:133},"23":{name:"addImportsAndGenerationOptions",decl:{start:{line:140,column:9},end:{line:140,column:39}},loc:{start:{line:140,column:68},end:{line:163,column:1}},line:140},"24":{name:"(anonymous_24)",decl:{start:{line:142,column:20},end:{line:142,column:21}},loc:{start:{line:142,column:32},end:{line:161,column:5}},line:142},"25":{name:"(anonymous_25)",decl:{start:{line:143,column:33},end:{line:143,column:34}},loc:{start:{line:143,column:47},end:{line:150,column:9}},line:143},"26":{name:"applyNamingStrategy",decl:{start:{line:164,column:9},end:{line:164,column:28}},loc:{start:{line:164,column:54},end:{line:237,column:1}},line:164},"27":{name:"changeRelationIdNames",decl:{start:{line:170,column:13},end:{line:170,column:34}},loc:{start:{line:170,column:42},end:{line:184,column:5}},line:170},"28":{name:"(anonymous_28)",decl:{start:{line:171,column:22},end:{line:171,column:23}},loc:{start:{line:171,column:34},end:{line:182,column:9}},line:171},"29":{name:"(anonymous_29)",decl:{start:{line:172,column:39},end:{line:172,column:40}},loc:{start:{line:172,column:55},end:{line:181,column:13}},line:172},"30":{name:"(anonymous_30)",decl:{start:{line:174,column:55},end:{line:174,column:56}},loc:{start:{line:174,column:62},end:{line:174,column:102}},line:174},"31":{name:"(anonymous_31)",decl:{start:{line:177,column:39},end:{line:177,column:40}},loc:{start:{line:177,column:50},end:{line:179,column:17}},line:177},"32":{name:"(anonymous_32)",decl:{start:{line:178,column:54},end:{line:178,column:55}},loc:{start:{line:178,column:67},end:{line:178,column:106}},line:178},"33":{name:"changeRelationNames",decl:{start:{line:185,column:13},end:{line:185,column:32}},loc:{start:{line:185,column:40},end:{line:208,column:5}},line:185},"34":{name:"(anonymous_34)",decl:{start:{line:186,column:22},end:{line:186,column:23}},loc:{start:{line:186,column:34},end:{line:206,column:9}},line:186},"35":{name:"(anonymous_35)",decl:{start:{line:187,column:37},end:{line:187,column:38}},loc:{start:{line:187,column:51},end:{line:205,column:13}},line:187},"36":{name:"(anonymous_36)",decl:{start:{line:191,column:49},end:{line:191,column:50}},loc:{start:{line:191,column:56},end:{line:191,column:91}},line:191},"37":{name:"(anonymous_37)",decl:{start:{line:192,column:63},end:{line:192,column:64}},loc:{start:{line:192,column:70},end:{line:192,column:107}},line:192},"38":{name:"(anonymous_38)",decl:{start:{line:194,column:28},end:{line:194,column:29}},loc:{start:{line:194,column:35},end:{line:194,column:62}},line:194},"39":{name:"(anonymous_39)",decl:{start:{line:195,column:29},end:{line:195,column:30}},loc:{start:{line:195,column:36},end:{line:197,column:17}},line:195},"40":{name:"(anonymous_40)",decl:{start:{line:201,column:43},end:{line:201,column:44}},loc:{start:{line:201,column:52},end:{line:203,column:21}},line:201},"41":{name:"(anonymous_41)",decl:{start:{line:202,column:40},end:{line:202,column:41}},loc:{start:{line:202,column:53},end:{line:202,column:92}},line:202},"42":{name:"changeColumnNames",decl:{start:{line:209,column:13},end:{line:209,column:30}},loc:{start:{line:209,column:38},end:{line:222,column:5}},line:209},"43":{name:"(anonymous_43)",decl:{start:{line:210,column:22},end:{line:210,column:23}},loc:{start:{line:210,column:34},end:{line:220,column:9}},line:210},"44":{name:"(anonymous_44)",decl:{start:{line:211,column:35},end:{line:211,column:36}},loc:{start:{line:211,column:47},end:{line:219,column:13}},line:211},"45":{name:"(anonymous_45)",decl:{start:{line:215,column:39},end:{line:215,column:40}},loc:{start:{line:215,column:50},end:{line:217,column:17}},line:215},"46":{name:"(anonymous_46)",decl:{start:{line:216,column:54},end:{line:216,column:55}},loc:{start:{line:216,column:67},end:{line:216,column:106}},line:216},"47":{name:"changeEntityNames",decl:{start:{line:223,column:13},end:{line:223,column:30}},loc:{start:{line:223,column:41},end:{line:236,column:5}},line:223},"48":{name:"(anonymous_48)",decl:{start:{line:224,column:25},end:{line:224,column:26}},loc:{start:{line:224,column:37},end:{line:234,column:9}},line:224},"49":{name:"(anonymous_49)",decl:{start:{line:226,column:29},end:{line:226,column:30}},loc:{start:{line:226,column:42},end:{line:232,column:13}},line:226},"50":{name:"(anonymous_50)",decl:{start:{line:227,column:42},end:{line:227,column:43}},loc:{start:{line:227,column:56},end:{line:231,column:17}},line:227}},branchMap:{"0":{loc:{start:{line:14,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:53,column:5}},{start:{line:14,column:4},end:{line:53,column:5}}],line:14},"1":{loc:{start:{line:14,column:8},end:{line:15,column:57}},type:"binary-expr",locations:[{start:{line:14,column:8},end:{line:14,column:50}},{start:{line:15,column:8},end:{line:15,column:57}}],line:14},"2":{loc:{start:{line:18,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:24,column:9}},{start:{line:18,column:8},end:{line:24,column:9}}],line:18},"3":{loc:{start:{line:25,column:8},end:{line:31,column:9}},type:"if",locations:[{start:{line:25,column:8},end:{line:31,column:9}},{start:{line:25,column:8},end:{line:31,column:9}}],line:25},"4":{loc:{start:{line:32,column:8},end:{line:38,column:9}},type:"if",locations:[{start:{line:32,column:8},end:{line:38,column:9}},{start:{line:32,column:8},end:{line:38,column:9}}],line:32},"5":{loc:{start:{line:39,column:8},end:{line:45,column:9}},type:"if",locations:[{start:{line:39,column:8},end:{line:45,column:9}},{start:{line:39,column:8},end:{line:45,column:9}}],line:39},"6":{loc:{start:{line:46,column:8},end:{line:52,column:9}},type:"if",locations:[{start:{line:46,column:8},end:{line:52,column:9}},{start:{line:46,column:8},end:{line:52,column:9}}],line:46},"7":{loc:{start:{line:67,column:56},end:{line:68,column:47}},type:"binary-expr",locations:[{start:{line:67,column:56},end:{line:67,column:94}},{start:{line:68,column:13},end:{line:68,column:22}},{start:{line:68,column:26},end:{line:68,column:46}}],line:67},"8":{loc:{start:{line:72,column:29},end:{line:73,column:28}},type:"cond-expr",locations:[{start:{line:72,column:95},end:{line:72,column:131}},{start:{line:73,column:14},end:{line:73,column:28}}],line:72},"9":{loc:{start:{line:72,column:30},end:{line:72,column:91}},type:"cond-expr",locations:[{start:{line:72,column:69},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:91}}],line:72},"10":{loc:{start:{line:72,column:30},end:{line:72,column:66}},type:"binary-expr",locations:[{start:{line:72,column:30},end:{line:72,column:45}},{start:{line:72,column:49},end:{line:72,column:66}}],line:72},"11":{loc:{start:{line:74,column:56},end:{line:76,column:75}},type:"binary-expr",locations:[{start:{line:74,column:56},end:{line:74,column:65}},{start:{line:75,column:12},end:{line:76,column:75}}],line:74},"12":{loc:{start:{line:83,column:58},end:{line:83,column:97}},type:"binary-expr",locations:[{start:{line:83,column:58},end:{line:83,column:76}},{start:{line:83,column:80},end:{line:83,column:97}}],line:83},"13":{loc:{start:{line:90,column:56},end:{line:93,column:23}},type:"binary-expr",locations:[{start:{line:90,column:56},end:{line:90,column:84}},{start:{line:91,column:12},end:{line:91,column:44}},{start:{line:92,column:12},end:{line:92,column:84}},{start:{line:93,column:12},end:{line:93,column:23}}],line:90},"14":{loc:{start:{line:98,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:98,column:4},end:{line:100,column:5}},{start:{line:98,column:4},end:{line:100,column:5}}],line:98},"15":{loc:{start:{line:104,column:12},end:{line:124,column:13}},type:"if",locations:[{start:{line:104,column:12},end:{line:124,column:13}},{start:{line:104,column:12},end:{line:124,column:13}}],line:104},"16":{loc:{start:{line:105,column:16},end:{line:109,column:17}},type:"if",locations:[{start:{line:105,column:16},end:{line:109,column:17}},{start:{line:105,column:16},end:{line:109,column:17}}],line:105},"17":{loc:{start:{line:105,column:20},end:{line:107,column:59}},type:"binary-expr",locations:[{start:{line:105,column:20},end:{line:105,column:41}},{start:{line:106,column:20},end:{line:106,column:33}},{start:{line:107,column:20},end:{line:107,column:59}}],line:105},"18":{loc:{start:{line:110,column:16},end:{line:118,column:17}},type:"if",locations:[{start:{line:110,column:16},end:{line:118,column:17}},{start:{line:110,column:16},end:{line:118,column:17}}],line:110},"19":{loc:{start:{line:110,column:20},end:{line:115,column:57}},type:"binary-expr",locations:[{start:{line:110,column:20},end:{line:110,column:44}},{start:{line:111,column:20},end:{line:111,column:36}},{start:{line:112,column:20},end:{line:112,column:65}},{start:{line:113,column:20},end:{line:113,column:40}},{start:{line:114,column:20},end:{line:114,column:32}},{start:{line:115,column:20},end:{line:115,column:57}}],line:110},"20":{loc:{start:{line:119,column:16},end:{line:123,column:17}},type:"if",locations:[{start:{line:119,column:16},end:{line:123,column:17}},{start:{line:119,column:16},end:{line:123,column:17}}],line:119},"21":{loc:{start:{line:119,column:20},end:{line:121,column:57}},type:"binary-expr",locations:[{start:{line:119,column:20},end:{line:119,column:40}},{start:{line:120,column:20},end:{line:120,column:32}},{start:{line:121,column:20},end:{line:121,column:57}}],line:119},"22":{loc:{start:{line:132,column:12},end:{line:135,column:13}},type:"if",locations:[{start:{line:132,column:12},end:{line:135,column:13}},{start:{line:132,column:12},end:{line:135,column:13}}],line:132},"23":{loc:{start:{line:132,column:16},end:{line:133,column:76}},type:"binary-expr",locations:[{start:{line:132,column:16},end:{line:132,column:56}},{start:{line:133,column:16},end:{line:133,column:76}}],line:132},"24":{loc:{start:{line:144,column:12},end:{line:149,column:13}},type:"if",locations:[{start:{line:144,column:12},end:{line:149,column:13}},{start:{line:144,column:12},end:{line:149,column:13}}],line:144},"25":{loc:{start:{line:145,column:16},end:{line:147,column:17}},type:"if",locations:[{start:{line:145,column:16},end:{line:147,column:17}},{start:{line:145,column:16},end:{line:147,column:17}}],line:145},"26":{loc:{start:{line:151,column:8},end:{line:154,column:9}},type:"if",locations:[{start:{line:151,column:8},end:{line:154,column:9}},{start:{line:151,column:8},end:{line:154,column:9}}],line:151},"27":{loc:{start:{line:155,column:8},end:{line:157,column:9}},type:"if",locations:[{start:{line:155,column:8},end:{line:157,column:9}},{start:{line:155,column:8},end:{line:157,column:9}}],line:155},"28":{loc:{start:{line:158,column:8},end:{line:160,column:9}},type:"if",locations:[{start:{line:158,column:8},end:{line:160,column:9}},{start:{line:158,column:8},end:{line:160,column:9}}],line:158},"29":{loc:{start:{line:178,column:67},end:{line:178,column:106}},type:"cond-expr",locations:[{start:{line:178,column:89},end:{line:178,column:96}},{start:{line:178,column:99},end:{line:178,column:106}}],line:178},"30":{loc:{start:{line:200,column:16},end:{line:204,column:17}},type:"if",locations:[{start:{line:200,column:16},end:{line:204,column:17}},{start:{line:200,column:16},end:{line:204,column:17}}],line:200},"31":{loc:{start:{line:202,column:53},end:{line:202,column:92}},type:"cond-expr",locations:[{start:{line:202,column:75},end:{line:202,column:82}},{start:{line:202,column:85},end:{line:202,column:92}}],line:202},"32":{loc:{start:{line:216,column:67},end:{line:216,column:106}},type:"cond-expr",locations:[{start:{line:216,column:89},end:{line:216,column:96}},{start:{line:216,column:99},end:{line:216,column:106}}],line:216},"33":{loc:{start:{line:228,column:20},end:{line:230,column:21}},type:"if",locations:[{start:{line:228,column:20},end:{line:230,column:21}},{start:{line:228,column:20},end:{line:230,column:21}}],line:228}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0,0,0,0,0],"20":[0,0],"21":[0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0]},inputSourceMap:{version:3,file:"/home/nemo/work/github/typeorm-model-generator/src/ModelCustomization.ts",sources:["/home/nemo/work/github/typeorm-model-generator/src/ModelCustomization.ts"],names:[],mappings:"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",sourcesContent:["import { DataTypeDefaults } from \"typeorm/driver/types/DataTypeDefaults\";\nimport { DefaultNamingStrategy } from \"typeorm/naming-strategy/DefaultNamingStrategy\";\nimport { Entity } from \"./models/Entity\";\nimport IGenerationOptions from \"./IGenerationOptions\";\nimport * as NamingStrategy from \"./NamingStrategy\";\nimport * as TomgUtils from \"./Utils\";\n\nexport default function modelCustomizationPhase(\n    dbModel: Entity[],\n    generationOptions: IGenerationOptions,\n    defaultValues: DataTypeDefaults\n): Entity[] {\n    const namingStrategy: typeof NamingStrategy = {\n        enablePluralization: NamingStrategy.enablePluralization,\n        columnName: NamingStrategy.columnName,\n        entityName: NamingStrategy.entityName,\n        relationIdName: NamingStrategy.relationIdName,\n        relationName: NamingStrategy.relationName,\n    };\n    if (\n        generationOptions.customNamingStrategyPath &&\n        generationOptions.customNamingStrategyPath !== \"\"\n    ) {\n        // TODO: change form of logging\n        const req = TomgUtils.requireLocalFile(\n            generationOptions.customNamingStrategyPath\n        ) as Partial<typeof NamingStrategy>;\n        if (req.columnName) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom naming strategy for column names.`\n            );\n            namingStrategy.columnName = req.columnName;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using standard naming strategy for column names.`\n            );\n        }\n        if (req.entityName) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom naming strategy for entity names.`\n            );\n            namingStrategy.entityName = req.entityName;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using standard naming strategy for entity names.`\n            );\n        }\n        if (req.relationIdName) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom naming strategy for relationId field names.`\n            );\n            namingStrategy.relationIdName = req.relationIdName;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using standard naming strategy for relationId field names.`\n            );\n        }\n        if (req.relationName) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom naming strategy for relation field names.`\n            );\n            namingStrategy.relationName = req.relationName;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using standard naming strategy for relation field names.`\n            );\n        }\n        if (req.enablePluralization) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom pluralization method for OneToMany, ManyToMany relation field names.`\n            );\n            namingStrategy.enablePluralization = req.enablePluralization;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom pluralization method for OneToMany, ManyToMany relation field names.`\n            );\n        }\n    }\n    namingStrategy.enablePluralization(generationOptions.pluralizeNames);\n    let retVal = removeIndicesGeneratedByTypeorm(dbModel);\n    retVal = removeColumnsInRelation(dbModel);\n    retVal = applyNamingStrategy(namingStrategy, dbModel);\n    retVal = addImportsAndGenerationOptions(retVal, generationOptions);\n    retVal = removeColumnDefaultProperties(retVal, defaultValues);\n    return retVal;\n}\nfunction removeIndicesGeneratedByTypeorm(dbModel: Entity[]): Entity[] {\n    // TODO: Support typeorm CustomNamingStrategy\n    const namingStrategy = new DefaultNamingStrategy();\n    dbModel.forEach((entity) => {\n        entity.indices = entity.indices.filter(\n            (v) =>\n                !(\n                    v.name.startsWith(`sqlite_autoindex_`) ||\n                    (v.primary && v.name === \"PRIMARY\")\n                )\n        );\n        const primaryColumns = entity.columns\n            .filter((v) => v.primary)\n            .map((v) => v.tscName);\n\n        const ormTableName = entity?.schema\n            ? `${entity.schema}.${entity.tscName}`\n            : entity.tscName;\n\n        entity.indices = entity.indices.filter(\n            (v) =>\n                !(\n                    v.primary &&\n                    v.name ===\n                        namingStrategy.primaryKeyName(\n                            ormTableName,\n                            primaryColumns\n                        )\n                )\n        );\n        entity.relations\n            .filter((v) => v.joinColumnOptions)\n            .forEach((rel) => {\n                const columnNames = rel.joinColumnOptions!.map((v) => v.name);\n                const idxName = namingStrategy.relationConstraintName(\n                    ormTableName,\n                    columnNames\n                );\n                const fkName = namingStrategy.foreignKeyName(\n                    ormTableName,\n                    columnNames\n                );\n                entity.indices = entity.indices.filter(\n                    (v) => v.name !== idxName && v.name !== fkName\n                );\n            });\n    });\n\n    return dbModel;\n}\nfunction removeColumnsInRelation(dbModel: Entity[]): Entity[] {\n    dbModel.forEach((entity) => {\n        entity.columns = entity.columns.filter(\n            (col) =>\n                !col.isUsedInRelationAsOwner ||\n                col.isUsedInRelationAsReferenced ||\n                entity.indices.some((idx) =>\n                    idx.columns.some((v) => v === col.tscName)\n                ) ||\n                col.primary\n        );\n    });\n    return dbModel;\n}\nfunction removeColumnDefaultProperties(\n    dbModel: Entity[],\n    defaultValues: DataTypeDefaults\n): Entity[] {\n    if (!defaultValues) {\n        return dbModel;\n    }\n    dbModel.forEach((entity) => {\n        entity.columns.forEach((column) => {\n            const defVal = defaultValues[column.tscType];\n            if (defVal) {\n                if (\n                    column.options.length &&\n                    defVal.length &&\n                    column.options.length === defVal.length\n                ) {\n                    column.options.length = undefined;\n                }\n                if (\n                    column.options.precision &&\n                    defVal.precision &&\n                    column.options.precision === defVal.precision &&\n                    column.options.scale &&\n                    defVal.scale &&\n                    column.options.scale === defVal.scale\n                ) {\n                    column.options.precision = undefined;\n                    column.options.scale = undefined;\n                }\n                if (\n                    column.options.width &&\n                    defVal.width &&\n                    column.options.width === defVal.width\n                ) {\n                    column.options.width = undefined;\n                }\n            }\n        });\n    });\n    return dbModel;\n}\n\nfunction findFileImports(dbModel: Entity[]) {\n    dbModel.forEach((entity) => {\n        entity.relations.forEach((relation) => {\n            if (\n                relation.relatedTable !== entity.tscName &&\n                !entity.fileImports.some((v) => v === relation.relatedTable)\n            ) {\n                entity.fileImports.push(relation.relatedTable);\n            }\n        });\n    });\n    return dbModel;\n}\n\nfunction addImportsAndGenerationOptions(\n    dbModel: Entity[],\n    generationOptions: IGenerationOptions\n): Entity[] {\n    dbModel = findFileImports(dbModel);\n    dbModel.forEach((entity) => {\n        entity.relations.forEach((relation) => {\n            if (generationOptions.lazy) {\n                if (!relation.relationOptions) {\n                    relation.relationOptions = {};\n                }\n                relation.relationOptions.lazy = true;\n            }\n        });\n        if (generationOptions.skipSchema) {\n            entity.schema = undefined;\n            entity.database = undefined;\n        }\n        if (generationOptions.activeRecord) {\n            entity.activeRecord = true;\n        }\n        if (generationOptions.generateConstructor) {\n            entity.generateConstructor = true;\n        }\n    });\n    return dbModel;\n}\n\nfunction applyNamingStrategy(\n    namingStrategy: typeof NamingStrategy,\n    dbModel: Entity[]\n): Entity[] {\n    let retVal = changeRelationNames(dbModel);\n    retVal = changeRelationIdNames(retVal);\n    retVal = changeEntityNames(retVal);\n    retVal = changeColumnNames(retVal);\n    return retVal;\n\n    function changeRelationIdNames(model: Entity[]): Entity[] {\n        model.forEach((entity) => {\n            entity.relationIds.forEach((relationId) => {\n                const oldName = relationId.fieldName;\n                const relation = entity.relations.find(\n                    (v) => v.fieldName === relationId.relationField\n                )!;\n                let newName = namingStrategy.relationIdName(\n                    relationId,\n                    relation,\n                    entity\n                );\n                newName = TomgUtils.findNameForNewField(\n                    newName,\n                    entity,\n                    oldName\n                );\n                entity.indices.forEach((index) => {\n                    index.columns = index.columns.map((column2) =>\n                        column2 === oldName ? newName : column2\n                    );\n                });\n\n                relationId.fieldName = newName;\n            });\n        });\n        return dbModel;\n    }\n\n    function changeRelationNames(model: Entity[]): Entity[] {\n        model.forEach((entity) => {\n            entity.relations.forEach((relation) => {\n                const oldName = relation.fieldName;\n                let newName = namingStrategy.relationName(relation, entity);\n                newName = TomgUtils.findNameForNewField(\n                    newName,\n                    entity,\n                    oldName\n                );\n\n                const relatedEntity = model.find(\n                    (v) => v.tscName === relation.relatedTable\n                )!;\n                const relation2 = relatedEntity.relations.find(\n                    (v) => v.fieldName === relation.relatedField\n                )!;\n\n                entity.relationIds\n                    .filter((v) => v.relationField === oldName)\n                    .forEach((v) => {\n                        v.relationField = newName;\n                    });\n\n                relation.fieldName = newName;\n                relation2.relatedField = newName;\n\n                if (relation.relationOptions) {\n                    entity.indices.forEach((ind) => {\n                        ind.columns.map((column2) =>\n                            column2 === oldName ? newName : column2\n                        );\n                    });\n                }\n            });\n        });\n        return dbModel;\n    }\n\n    function changeColumnNames(model: Entity[]): Entity[] {\n        model.forEach((entity) => {\n            entity.columns.forEach((column) => {\n                const oldName = column.tscName;\n                let newName = namingStrategy.columnName(column.tscName, column);\n                newName = TomgUtils.findNameForNewField(\n                    newName,\n                    entity,\n                    oldName\n                );\n                entity.indices.forEach((index) => {\n                    index.columns = index.columns.map((column2) =>\n                        column2 === oldName ? newName : column2\n                    );\n                });\n\n                column.tscName = newName;\n            });\n        });\n        return model;\n    }\n    function changeEntityNames(entities: Entity[]): Entity[] {\n        entities.forEach((entity) => {\n            const newName = namingStrategy.entityName(entity.tscName, entity);\n            entities.forEach((entity2) => {\n                entity2.relations.forEach((relation) => {\n                    if (relation.relatedTable === entity.tscName) {\n                        relation.relatedTable = newName;\n                    }\n                });\n            });\n            entity.tscName = newName;\n        });\n        return entities;\n    }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"76ff3480001479740d9f8cb49e0592431af71bc4"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_j0z60mfgv=function(){return actualCoverage;};return actualCoverage;}cov_j0z60mfgv();cov_j0z60mfgv().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const DefaultNamingStrategy_1=(cov_j0z60mfgv().s[1]++,require("typeorm/naming-strategy/DefaultNamingStrategy"));const NamingStrategy=(cov_j0z60mfgv().s[2]++,require("./NamingStrategy"));const TomgUtils=(cov_j0z60mfgv().s[3]++,require("./Utils"));function modelCustomizationPhase(dbModel,generationOptions,defaultValues){cov_j0z60mfgv().f[0]++;const namingStrategy=(cov_j0z60mfgv().s[4]++,{enablePluralization:NamingStrategy.enablePluralization,columnName:NamingStrategy.columnName,entityName:NamingStrategy.entityName,relationIdName:NamingStrategy.relationIdName,relationName:NamingStrategy.relationName});cov_j0z60mfgv().s[5]++;if((cov_j0z60mfgv().b[1][0]++,generationOptions.customNamingStrategyPath)&&(cov_j0z60mfgv().b[1][1]++,generationOptions.customNamingStrategyPath!=="")){cov_j0z60mfgv().b[0][0]++;// TODO: change form of logging
const req=(cov_j0z60mfgv().s[6]++,TomgUtils.requireLocalFile(generationOptions.customNamingStrategyPath));cov_j0z60mfgv().s[7]++;if(req.columnName){cov_j0z60mfgv().b[2][0]++;cov_j0z60mfgv().s[8]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom naming strategy for column names.`);cov_j0z60mfgv().s[9]++;namingStrategy.columnName=req.columnName;}else{cov_j0z60mfgv().b[2][1]++;cov_j0z60mfgv().s[10]++;console.log(`[${new Date().toLocaleTimeString()}] Using standard naming strategy for column names.`);}cov_j0z60mfgv().s[11]++;if(req.entityName){cov_j0z60mfgv().b[3][0]++;cov_j0z60mfgv().s[12]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom naming strategy for entity names.`);cov_j0z60mfgv().s[13]++;namingStrategy.entityName=req.entityName;}else{cov_j0z60mfgv().b[3][1]++;cov_j0z60mfgv().s[14]++;console.log(`[${new Date().toLocaleTimeString()}] Using standard naming strategy for entity names.`);}cov_j0z60mfgv().s[15]++;if(req.relationIdName){cov_j0z60mfgv().b[4][0]++;cov_j0z60mfgv().s[16]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom naming strategy for relationId field names.`);cov_j0z60mfgv().s[17]++;namingStrategy.relationIdName=req.relationIdName;}else{cov_j0z60mfgv().b[4][1]++;cov_j0z60mfgv().s[18]++;console.log(`[${new Date().toLocaleTimeString()}] Using standard naming strategy for relationId field names.`);}cov_j0z60mfgv().s[19]++;if(req.relationName){cov_j0z60mfgv().b[5][0]++;cov_j0z60mfgv().s[20]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom naming strategy for relation field names.`);cov_j0z60mfgv().s[21]++;namingStrategy.relationName=req.relationName;}else{cov_j0z60mfgv().b[5][1]++;cov_j0z60mfgv().s[22]++;console.log(`[${new Date().toLocaleTimeString()}] Using standard naming strategy for relation field names.`);}cov_j0z60mfgv().s[23]++;if(req.enablePluralization){cov_j0z60mfgv().b[6][0]++;cov_j0z60mfgv().s[24]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom pluralization method for OneToMany, ManyToMany relation field names.`);cov_j0z60mfgv().s[25]++;namingStrategy.enablePluralization=req.enablePluralization;}else{cov_j0z60mfgv().b[6][1]++;cov_j0z60mfgv().s[26]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom pluralization method for OneToMany, ManyToMany relation field names.`);}}else{cov_j0z60mfgv().b[0][1]++;}cov_j0z60mfgv().s[27]++;namingStrategy.enablePluralization(generationOptions.pluralizeNames);let retVal=(cov_j0z60mfgv().s[28]++,removeIndicesGeneratedByTypeorm(dbModel));cov_j0z60mfgv().s[29]++;retVal=removeColumnsInRelation(dbModel);cov_j0z60mfgv().s[30]++;retVal=applyNamingStrategy(namingStrategy,dbModel);cov_j0z60mfgv().s[31]++;retVal=addImportsAndGenerationOptions(retVal,generationOptions);cov_j0z60mfgv().s[32]++;retVal=removeColumnDefaultProperties(retVal,defaultValues);cov_j0z60mfgv().s[33]++;return retVal;}cov_j0z60mfgv().s[34]++;exports.default=modelCustomizationPhase;function removeIndicesGeneratedByTypeorm(dbModel){cov_j0z60mfgv().f[1]++;// TODO: Support typeorm CustomNamingStrategy
const namingStrategy=(cov_j0z60mfgv().s[35]++,new DefaultNamingStrategy_1.DefaultNamingStrategy());cov_j0z60mfgv().s[36]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[2]++;cov_j0z60mfgv().s[37]++;entity.indices=entity.indices.filter(v=>{cov_j0z60mfgv().f[3]++;cov_j0z60mfgv().s[38]++;return!((cov_j0z60mfgv().b[7][0]++,v.name.startsWith(`sqlite_autoindex_`))||(cov_j0z60mfgv().b[7][1]++,v.primary)&&(cov_j0z60mfgv().b[7][2]++,v.name==="PRIMARY"));});const primaryColumns=(cov_j0z60mfgv().s[39]++,entity.columns.filter(v=>{cov_j0z60mfgv().f[4]++;cov_j0z60mfgv().s[40]++;return v.primary;}).map(v=>{cov_j0z60mfgv().f[5]++;cov_j0z60mfgv().s[41]++;return v.tscName;}));const ormTableName=(cov_j0z60mfgv().s[42]++,((cov_j0z60mfgv().b[10][0]++,entity===null)||(cov_j0z60mfgv().b[10][1]++,entity===void 0)?(cov_j0z60mfgv().b[9][0]++,void 0):(cov_j0z60mfgv().b[9][1]++,entity.schema))?(cov_j0z60mfgv().b[8][0]++,`${entity.schema}.${entity.tscName}`):(cov_j0z60mfgv().b[8][1]++,entity.tscName));cov_j0z60mfgv().s[43]++;entity.indices=entity.indices.filter(v=>{cov_j0z60mfgv().f[6]++;cov_j0z60mfgv().s[44]++;return!((cov_j0z60mfgv().b[11][0]++,v.primary)&&(cov_j0z60mfgv().b[11][1]++,v.name===namingStrategy.primaryKeyName(ormTableName,primaryColumns)));});cov_j0z60mfgv().s[45]++;entity.relations.filter(v=>{cov_j0z60mfgv().f[7]++;cov_j0z60mfgv().s[46]++;return v.joinColumnOptions;}).forEach(rel=>{cov_j0z60mfgv().f[8]++;const columnNames=(cov_j0z60mfgv().s[47]++,rel.joinColumnOptions.map(v=>{cov_j0z60mfgv().f[9]++;cov_j0z60mfgv().s[48]++;return v.name;}));const idxName=(cov_j0z60mfgv().s[49]++,namingStrategy.relationConstraintName(ormTableName,columnNames));const fkName=(cov_j0z60mfgv().s[50]++,namingStrategy.foreignKeyName(ormTableName,columnNames));cov_j0z60mfgv().s[51]++;entity.indices=entity.indices.filter(v=>{cov_j0z60mfgv().f[10]++;cov_j0z60mfgv().s[52]++;return(cov_j0z60mfgv().b[12][0]++,v.name!==idxName)&&(cov_j0z60mfgv().b[12][1]++,v.name!==fkName);});});});cov_j0z60mfgv().s[53]++;return dbModel;}function removeColumnsInRelation(dbModel){cov_j0z60mfgv().f[11]++;cov_j0z60mfgv().s[54]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[12]++;cov_j0z60mfgv().s[55]++;entity.columns=entity.columns.filter(col=>{cov_j0z60mfgv().f[13]++;cov_j0z60mfgv().s[56]++;return(cov_j0z60mfgv().b[13][0]++,!col.isUsedInRelationAsOwner)||(cov_j0z60mfgv().b[13][1]++,col.isUsedInRelationAsReferenced)||(cov_j0z60mfgv().b[13][2]++,entity.indices.some(idx=>{cov_j0z60mfgv().f[14]++;cov_j0z60mfgv().s[57]++;return idx.columns.some(v=>{cov_j0z60mfgv().f[15]++;cov_j0z60mfgv().s[58]++;return v===col.tscName;});}))||(cov_j0z60mfgv().b[13][3]++,col.primary);});});cov_j0z60mfgv().s[59]++;return dbModel;}function removeColumnDefaultProperties(dbModel,defaultValues){cov_j0z60mfgv().f[16]++;cov_j0z60mfgv().s[60]++;if(!defaultValues){cov_j0z60mfgv().b[14][0]++;cov_j0z60mfgv().s[61]++;return dbModel;}else{cov_j0z60mfgv().b[14][1]++;}cov_j0z60mfgv().s[62]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[17]++;cov_j0z60mfgv().s[63]++;entity.columns.forEach(column=>{cov_j0z60mfgv().f[18]++;const defVal=(cov_j0z60mfgv().s[64]++,defaultValues[column.tscType]);cov_j0z60mfgv().s[65]++;if(defVal){cov_j0z60mfgv().b[15][0]++;cov_j0z60mfgv().s[66]++;if((cov_j0z60mfgv().b[17][0]++,column.options.length)&&(cov_j0z60mfgv().b[17][1]++,defVal.length)&&(cov_j0z60mfgv().b[17][2]++,column.options.length===defVal.length)){cov_j0z60mfgv().b[16][0]++;cov_j0z60mfgv().s[67]++;column.options.length=undefined;}else{cov_j0z60mfgv().b[16][1]++;}cov_j0z60mfgv().s[68]++;if((cov_j0z60mfgv().b[19][0]++,column.options.precision)&&(cov_j0z60mfgv().b[19][1]++,defVal.precision)&&(cov_j0z60mfgv().b[19][2]++,column.options.precision===defVal.precision)&&(cov_j0z60mfgv().b[19][3]++,column.options.scale)&&(cov_j0z60mfgv().b[19][4]++,defVal.scale)&&(cov_j0z60mfgv().b[19][5]++,column.options.scale===defVal.scale)){cov_j0z60mfgv().b[18][0]++;cov_j0z60mfgv().s[69]++;column.options.precision=undefined;cov_j0z60mfgv().s[70]++;column.options.scale=undefined;}else{cov_j0z60mfgv().b[18][1]++;}cov_j0z60mfgv().s[71]++;if((cov_j0z60mfgv().b[21][0]++,column.options.width)&&(cov_j0z60mfgv().b[21][1]++,defVal.width)&&(cov_j0z60mfgv().b[21][2]++,column.options.width===defVal.width)){cov_j0z60mfgv().b[20][0]++;cov_j0z60mfgv().s[72]++;column.options.width=undefined;}else{cov_j0z60mfgv().b[20][1]++;}}else{cov_j0z60mfgv().b[15][1]++;}});});cov_j0z60mfgv().s[73]++;return dbModel;}function findFileImports(dbModel){cov_j0z60mfgv().f[19]++;cov_j0z60mfgv().s[74]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[20]++;cov_j0z60mfgv().s[75]++;entity.relations.forEach(relation=>{cov_j0z60mfgv().f[21]++;cov_j0z60mfgv().s[76]++;if((cov_j0z60mfgv().b[23][0]++,relation.relatedTable!==entity.tscName)&&(cov_j0z60mfgv().b[23][1]++,!entity.fileImports.some(v=>{cov_j0z60mfgv().f[22]++;cov_j0z60mfgv().s[77]++;return v===relation.relatedTable;}))){cov_j0z60mfgv().b[22][0]++;cov_j0z60mfgv().s[78]++;entity.fileImports.push(relation.relatedTable);}else{cov_j0z60mfgv().b[22][1]++;}});});cov_j0z60mfgv().s[79]++;return dbModel;}function addImportsAndGenerationOptions(dbModel,generationOptions){cov_j0z60mfgv().f[23]++;cov_j0z60mfgv().s[80]++;dbModel=findFileImports(dbModel);cov_j0z60mfgv().s[81]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[24]++;cov_j0z60mfgv().s[82]++;entity.relations.forEach(relation=>{cov_j0z60mfgv().f[25]++;cov_j0z60mfgv().s[83]++;if(generationOptions.lazy){cov_j0z60mfgv().b[24][0]++;cov_j0z60mfgv().s[84]++;if(!relation.relationOptions){cov_j0z60mfgv().b[25][0]++;cov_j0z60mfgv().s[85]++;relation.relationOptions={};}else{cov_j0z60mfgv().b[25][1]++;}cov_j0z60mfgv().s[86]++;relation.relationOptions.lazy=true;}else{cov_j0z60mfgv().b[24][1]++;}});cov_j0z60mfgv().s[87]++;if(generationOptions.skipSchema){cov_j0z60mfgv().b[26][0]++;cov_j0z60mfgv().s[88]++;entity.schema=undefined;cov_j0z60mfgv().s[89]++;entity.database=undefined;}else{cov_j0z60mfgv().b[26][1]++;}cov_j0z60mfgv().s[90]++;if(generationOptions.activeRecord){cov_j0z60mfgv().b[27][0]++;cov_j0z60mfgv().s[91]++;entity.activeRecord=true;}else{cov_j0z60mfgv().b[27][1]++;}cov_j0z60mfgv().s[92]++;if(generationOptions.generateConstructor){cov_j0z60mfgv().b[28][0]++;cov_j0z60mfgv().s[93]++;entity.generateConstructor=true;}else{cov_j0z60mfgv().b[28][1]++;}});cov_j0z60mfgv().s[94]++;return dbModel;}function applyNamingStrategy(namingStrategy,dbModel){cov_j0z60mfgv().f[26]++;let retVal=(cov_j0z60mfgv().s[95]++,changeRelationNames(dbModel));cov_j0z60mfgv().s[96]++;retVal=changeRelationIdNames(retVal);cov_j0z60mfgv().s[97]++;retVal=changeEntityNames(retVal);cov_j0z60mfgv().s[98]++;retVal=changeColumnNames(retVal);cov_j0z60mfgv().s[99]++;return retVal;function changeRelationIdNames(model){cov_j0z60mfgv().f[27]++;cov_j0z60mfgv().s[100]++;model.forEach(entity=>{cov_j0z60mfgv().f[28]++;cov_j0z60mfgv().s[101]++;entity.relationIds.forEach(relationId=>{cov_j0z60mfgv().f[29]++;const oldName=(cov_j0z60mfgv().s[102]++,relationId.fieldName);const relation=(cov_j0z60mfgv().s[103]++,entity.relations.find(v=>{cov_j0z60mfgv().f[30]++;cov_j0z60mfgv().s[104]++;return v.fieldName===relationId.relationField;}));let newName=(cov_j0z60mfgv().s[105]++,namingStrategy.relationIdName(relationId,relation,entity));cov_j0z60mfgv().s[106]++;newName=TomgUtils.findNameForNewField(newName,entity,oldName);cov_j0z60mfgv().s[107]++;entity.indices.forEach(index=>{cov_j0z60mfgv().f[31]++;cov_j0z60mfgv().s[108]++;index.columns=index.columns.map(column2=>{cov_j0z60mfgv().f[32]++;cov_j0z60mfgv().s[109]++;return column2===oldName?(cov_j0z60mfgv().b[29][0]++,newName):(cov_j0z60mfgv().b[29][1]++,column2);});});cov_j0z60mfgv().s[110]++;relationId.fieldName=newName;});});cov_j0z60mfgv().s[111]++;return dbModel;}function changeRelationNames(model){cov_j0z60mfgv().f[33]++;cov_j0z60mfgv().s[112]++;model.forEach(entity=>{cov_j0z60mfgv().f[34]++;cov_j0z60mfgv().s[113]++;entity.relations.forEach(relation=>{cov_j0z60mfgv().f[35]++;const oldName=(cov_j0z60mfgv().s[114]++,relation.fieldName);let newName=(cov_j0z60mfgv().s[115]++,namingStrategy.relationName(relation,entity));cov_j0z60mfgv().s[116]++;newName=TomgUtils.findNameForNewField(newName,entity,oldName);const relatedEntity=(cov_j0z60mfgv().s[117]++,model.find(v=>{cov_j0z60mfgv().f[36]++;cov_j0z60mfgv().s[118]++;return v.tscName===relation.relatedTable;}));const relation2=(cov_j0z60mfgv().s[119]++,relatedEntity.relations.find(v=>{cov_j0z60mfgv().f[37]++;cov_j0z60mfgv().s[120]++;return v.fieldName===relation.relatedField;}));cov_j0z60mfgv().s[121]++;entity.relationIds.filter(v=>{cov_j0z60mfgv().f[38]++;cov_j0z60mfgv().s[122]++;return v.relationField===oldName;}).forEach(v=>{cov_j0z60mfgv().f[39]++;cov_j0z60mfgv().s[123]++;v.relationField=newName;});cov_j0z60mfgv().s[124]++;relation.fieldName=newName;cov_j0z60mfgv().s[125]++;relation2.relatedField=newName;cov_j0z60mfgv().s[126]++;if(relation.relationOptions){cov_j0z60mfgv().b[30][0]++;cov_j0z60mfgv().s[127]++;entity.indices.forEach(ind=>{cov_j0z60mfgv().f[40]++;cov_j0z60mfgv().s[128]++;ind.columns.map(column2=>{cov_j0z60mfgv().f[41]++;cov_j0z60mfgv().s[129]++;return column2===oldName?(cov_j0z60mfgv().b[31][0]++,newName):(cov_j0z60mfgv().b[31][1]++,column2);});});}else{cov_j0z60mfgv().b[30][1]++;}});});cov_j0z60mfgv().s[130]++;return dbModel;}function changeColumnNames(model){cov_j0z60mfgv().f[42]++;cov_j0z60mfgv().s[131]++;model.forEach(entity=>{cov_j0z60mfgv().f[43]++;cov_j0z60mfgv().s[132]++;entity.columns.forEach(column=>{cov_j0z60mfgv().f[44]++;const oldName=(cov_j0z60mfgv().s[133]++,column.tscName);let newName=(cov_j0z60mfgv().s[134]++,namingStrategy.columnName(column.tscName,column));cov_j0z60mfgv().s[135]++;newName=TomgUtils.findNameForNewField(newName,entity,oldName);cov_j0z60mfgv().s[136]++;entity.indices.forEach(index=>{cov_j0z60mfgv().f[45]++;cov_j0z60mfgv().s[137]++;index.columns=index.columns.map(column2=>{cov_j0z60mfgv().f[46]++;cov_j0z60mfgv().s[138]++;return column2===oldName?(cov_j0z60mfgv().b[32][0]++,newName):(cov_j0z60mfgv().b[32][1]++,column2);});});cov_j0z60mfgv().s[139]++;column.tscName=newName;});});cov_j0z60mfgv().s[140]++;return model;}function changeEntityNames(entities){cov_j0z60mfgv().f[47]++;cov_j0z60mfgv().s[141]++;entities.forEach(entity=>{cov_j0z60mfgv().f[48]++;const newName=(cov_j0z60mfgv().s[142]++,namingStrategy.entityName(entity.tscName,entity));cov_j0z60mfgv().s[143]++;entities.forEach(entity2=>{cov_j0z60mfgv().f[49]++;cov_j0z60mfgv().s[144]++;entity2.relations.forEach(relation=>{cov_j0z60mfgv().f[50]++;cov_j0z60mfgv().s[145]++;if(relation.relatedTable===entity.tscName){cov_j0z60mfgv().b[33][0]++;cov_j0z60mfgv().s[146]++;relation.relatedTable=newName;}else{cov_j0z60mfgv().b[33][1]++;}});});cov_j0z60mfgv().s[147]++;entity.tscName=newName;});cov_j0z60mfgv().s[148]++;return entities;}}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvbmVtby93b3JrL2dpdGh1Yi90eXBlb3JtLW1vZGVsLWdlbmVyYXRvci9zcmMvTW9kZWxDdXN0b21pemF0aW9uLnRzIiwic291cmNlcyI6WyIvaG9tZS9uZW1vL3dvcmsvZ2l0aHViL3R5cGVvcm0tbW9kZWwtZ2VuZXJhdG9yL3NyYy9Nb2RlbEN1c3RvbWl6YXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSx5RkFBc0Y7QUFHdEYsbURBQW1EO0FBQ25ELHFDQUFxQztBQUVyQyxTQUF3Qix1QkFBdUIsQ0FDM0MsT0FBaUIsRUFDakIsaUJBQXFDLEVBQ3JDLGFBQStCO0lBRS9CLE1BQU0sY0FBYyxHQUEwQjtRQUMxQyxtQkFBbUIsRUFBRSxjQUFjLENBQUMsbUJBQW1CO1FBQ3ZELFVBQVUsRUFBRSxjQUFjLENBQUMsVUFBVTtRQUNyQyxVQUFVLEVBQUUsY0FBYyxDQUFDLFVBQVU7UUFDckMsY0FBYyxFQUFFLGNBQWMsQ0FBQyxjQUFjO1FBQzdDLFlBQVksRUFBRSxjQUFjLENBQUMsWUFBWTtLQUM1QyxDQUFDO0lBQ0YsSUFDSSxpQkFBaUIsQ0FBQyx3QkFBd0I7UUFDMUMsaUJBQWlCLENBQUMsd0JBQXdCLEtBQUssRUFBRSxFQUNuRDtRQUNFLCtCQUErQjtRQUMvQixNQUFNLEdBQUcsR0FBRyxTQUFTLENBQUMsZ0JBQWdCLENBQ2xDLGlCQUFpQixDQUFDLHdCQUF3QixDQUNYLENBQUM7UUFDcEMsSUFBSSxHQUFHLENBQUMsVUFBVSxFQUFFO1lBQ2hCLE9BQU8sQ0FBQyxHQUFHLENBQ1AsSUFBSSxJQUFJLElBQUksRUFBRSxDQUFDLGtCQUFrQixFQUFFLGtEQUFrRCxDQUN4RixDQUFDO1lBQ0YsY0FBYyxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDO1NBQzlDO2FBQU07WUFDSCxPQUFPLENBQUMsR0FBRyxDQUNQLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxvREFBb0QsQ0FDMUYsQ0FBQztTQUNM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LENBQUM7UUFDSCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBQ0QsU0FBUyxpQkFBaUIsQ0FBQyxRQUFrQjtRQUN6QyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDeEIsTUFBTSxPQUFPLEdBQUcsY0FBYyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ2xFLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtnQkFDekIsT0FBTyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtvQkFDbkMsSUFBSSxRQUFRLENBQUMsWUFBWSxLQUFLLE1BQU0sQ0FBQyxPQUFPLEVBQUU7d0JBQzFDLFFBQVEsQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDO3FCQUNuQztnQkFDTCxDQUFDLENBQUMsQ0FBQztZQUNQLENBQUMsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLFFBQVEsQ0FBQztJQUNwQixDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGFUeXBlRGVmYXVsdHMgfSBmcm9tIFwidHlwZW9ybS9kcml2ZXIvdHlwZXMvRGF0YVR5cGVEZWZhdWx0c1wiO1xuaW1wb3J0IHsgRGVmYXVsdE5hbWluZ1N0cmF0ZWd5IH0gZnJvbSBcInR5cGVvcm0vbmFtaW5nLXN0cmF0ZWd5L0RlZmF1bHROYW1pbmdTdHJhdGVneVwiO1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4vbW9kZWxzL0VudGl0eVwiO1xuaW1wb3J0IElHZW5lcmF0aW9uT3B0aW9ucyBmcm9tIFwiLi9JR2VuZXJhdGlvbk9wdGlvbnNcIjtcbmltcG9ydCAqIGFzIE5hbWluZ1N0cmF0ZWd5IGZyb20gXCIuL05hbWluZ1N0cmF0ZWd5XCI7XG5pbXBvcnQgKiBhcyBUb21nVXRpbHMgZnJvbSBcIi4vVXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbW9kZWxDdXN0b21pemF0aW9uUGhhc2UoXG4gICAgZGJNb2RlbDogRW50aXR5W10sXG4gICAgZ2VuZXJhdGlvbk9wdGlvbnM6IElHZW5lcmF0aW9uT3B0aW9ucyxcbiAgICBkZWZhdWx0VmFsdWVzOiBEYXRhVHlwZURlZmF1bHRzXG4pOiBFbnRpdHlbXSB7XG4gICAgY29uc3QgbmFtaW5nU3RyYXRlZ3k6IHR5cGVvZiBOYW1pbmdTdHJhdGVneSA9IHtcbiAgICAgICAgZW5hYmxlUGx1cmFsaXphdGlvbjogTmFtaW5nU3RyYXRlZ3kuZW5hYmxlUGx1cmFsaXphdGlvbixcbiAgICAgICAgY29sdW1uTmFtZTogTmFtaW5nU3RyYXRlZ3kuY29sdW1uTmFtZSxcbiAgICAgICAgZW50aXR5TmFtZTogTmFtaW5nU3RyYXRlZ3kuZW50aXR5TmFtZSxcbiAgICAgICAgcmVsYXRpb25JZE5hbWU6IE5hbWluZ1N0cmF0ZWd5LnJlbGF0aW9uSWROYW1lLFxuICAgICAgICByZWxhdGlvbk5hbWU6IE5hbWluZ1N0cmF0ZWd5LnJlbGF0aW9uTmFtZSxcbiAgICB9O1xuICAgIGlmIChcbiAgICAgICAgZ2VuZXJhdGlvbk9wdGlvbnMuY3VzdG9tTmFtaW5nU3RyYXRlZ3lQYXRoICYmXG4gICAgICAgIGdlbmVyYXRpb25PcHRpb25zLmN1c3RvbU5hbWluZ1N0cmF0ZWd5UGF0aCAhPT0gXCJcIlxuICAgICkge1xuICAgICAgICAvLyBUT0RPOiBjaGFuZ2UgZm9ybSBvZiBsb2dnaW5nXG4gICAgICAgIGNvbnN0IHJlcSA9IFRvbWdVdGlscy5yZXF1aXJlTG9jYWxGaWxlKFxuICAgICAgICAgICAgZ2VuZXJhdGlvbk9wdGlvbnMuY3VzdG9tTmFtaW5nU3RyYXRlZ3lQYXRoXG4gICAgICAgICkgYXMgUGFydGlhbDx0eXBlb2YgTmFtaW5nU3RyYXRlZ3k+O1xuICAgICAgICBpZiAocmVxLmNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBbJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfV0gVXNpbmcgY3VzdG9tIG5hbWluZyBzdHJhdGVneSBmb3IgY29sdW1uIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5jb2x1bW5OYW1lID0gcmVxLmNvbHVtbk5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIHN0YW5kYXJkIG5hbWluZyBzdHJhdGVneSBmb3IgY29sdW1uIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5lbnRpdHlOYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBuYW1pbmcgc3RyYXRlZ3kgZm9yIGVudGl0eSBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kuZW50aXR5TmFtZSA9IHJlcS5lbnRpdHlOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBzdGFuZGFyZCBuYW1pbmcgc3RyYXRlZ3kgZm9yIGVudGl0eSBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEucmVsYXRpb25JZE5hbWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBbJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfV0gVXNpbmcgY3VzdG9tIG5hbWluZyBzdHJhdGVneSBmb3IgcmVsYXRpb25JZCBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25JZE5hbWUgPSByZXEucmVsYXRpb25JZE5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIHN0YW5kYXJkIG5hbWluZyBzdHJhdGVneSBmb3IgcmVsYXRpb25JZCBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEucmVsYXRpb25OYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBuYW1pbmcgc3RyYXRlZ3kgZm9yIHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5yZWxhdGlvbk5hbWUgPSByZXEucmVsYXRpb25OYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBzdGFuZGFyZCBuYW1pbmcgc3RyYXRlZ3kgZm9yIHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5lbmFibGVQbHVyYWxpemF0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBwbHVyYWxpemF0aW9uIG1ldGhvZCBmb3IgT25lVG9NYW55LCBNYW55VG9NYW55IHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5lbmFibGVQbHVyYWxpemF0aW9uID0gcmVxLmVuYWJsZVBsdXJhbGl6YXRpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBwbHVyYWxpemF0aW9uIG1ldGhvZCBmb3IgT25lVG9NYW55LCBNYW55VG9NYW55IHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmFtaW5nU3RyYXRlZ3kuZW5hYmxlUGx1cmFsaXphdGlvbihnZW5lcmF0aW9uT3B0aW9ucy5wbHVyYWxpemVOYW1lcyk7XG4gICAgbGV0IHJldFZhbCA9IHJlbW92ZUluZGljZXNHZW5lcmF0ZWRCeVR5cGVvcm0oZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gcmVtb3ZlQ29sdW1uc0luUmVsYXRpb24oZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gYXBwbHlOYW1pbmdTdHJhdGVneShuYW1pbmdTdHJhdGVneSwgZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gYWRkSW1wb3J0c0FuZEdlbmVyYXRpb25PcHRpb25zKHJldFZhbCwgZ2VuZXJhdGlvbk9wdGlvbnMpO1xuICAgIHJldFZhbCA9IHJlbW92ZUNvbHVtbkRlZmF1bHRQcm9wZXJ0aWVzKHJldFZhbCwgZGVmYXVsdFZhbHVlcyk7XG4gICAgcmV0dXJuIHJldFZhbDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUluZGljZXNHZW5lcmF0ZWRCeVR5cGVvcm0oZGJNb2RlbDogRW50aXR5W10pOiBFbnRpdHlbXSB7XG4gICAgLy8gVE9ETzogU3VwcG9ydCB0eXBlb3JtIEN1c3RvbU5hbWluZ1N0cmF0ZWd5XG4gICAgY29uc3QgbmFtaW5nU3RyYXRlZ3kgPSBuZXcgRGVmYXVsdE5hbWluZ1N0cmF0ZWd5KCk7XG4gICAgZGJNb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgZW50aXR5LmluZGljZXMgPSBlbnRpdHkuaW5kaWNlcy5maWx0ZXIoXG4gICAgICAgICAgICAodikgPT5cbiAgICAgICAgICAgICAgICAhKFxuICAgICAgICAgICAgICAgICAgICB2Lm5hbWUuc3RhcnRzV2l0aChgc3FsaXRlX2F1dG9pbmRleF9gKSB8fFxuICAgICAgICAgICAgICAgICAgICAodi5wcmltYXJ5ICYmIHYubmFtZSA9PT0gXCJQUklNQVJZXCIpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBwcmltYXJ5Q29sdW1ucyA9IGVudGl0eS5jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKCh2KSA9PiB2LnByaW1hcnkpXG4gICAgICAgICAgICAubWFwKCh2KSA9PiB2LnRzY05hbWUpO1xuXG4gICAgICAgIGNvbnN0IG9ybVRhYmxlTmFtZSA9IGVudGl0eT8uc2NoZW1hXG4gICAgICAgICAgICA/IGAke2VudGl0eS5zY2hlbWF9LiR7ZW50aXR5LnRzY05hbWV9YFxuICAgICAgICAgICAgOiBlbnRpdHkudHNjTmFtZTtcblxuICAgICAgICBlbnRpdHkuaW5kaWNlcyA9IGVudGl0eS5pbmRpY2VzLmZpbHRlcihcbiAgICAgICAgICAgICh2KSA9PlxuICAgICAgICAgICAgICAgICEoXG4gICAgICAgICAgICAgICAgICAgIHYucHJpbWFyeSAmJlxuICAgICAgICAgICAgICAgICAgICB2Lm5hbWUgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5wcmltYXJ5S2V5TmFtZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcm1UYWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUNvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIGVudGl0eS5yZWxhdGlvbnNcbiAgICAgICAgICAgIC5maWx0ZXIoKHYpID0+IHYuam9pbkNvbHVtbk9wdGlvbnMpXG4gICAgICAgICAgICAuZm9yRWFjaCgocmVsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sdW1uTmFtZXMgPSByZWwuam9pbkNvbHVtbk9wdGlvbnMhLm1hcCgodikgPT4gdi5uYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZHhOYW1lID0gbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25Db25zdHJhaW50TmFtZShcbiAgICAgICAgICAgICAgICAgICAgb3JtVGFibGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmtOYW1lID0gbmFtaW5nU3RyYXRlZ3kuZm9yZWlnbktleU5hbWUoXG4gICAgICAgICAgICAgICAgICAgIG9ybVRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZXNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGVudGl0eS5pbmRpY2VzID0gZW50aXR5LmluZGljZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAodikgPT4gdi5uYW1lICE9PSBpZHhOYW1lICYmIHYubmFtZSAhPT0gZmtOYW1lXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRiTW9kZWw7XG59XG5mdW5jdGlvbiByZW1vdmVDb2x1bW5zSW5SZWxhdGlvbihkYk1vZGVsOiBFbnRpdHlbXSk6IEVudGl0eVtdIHtcbiAgICBkYk1vZGVsLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICBlbnRpdHkuY29sdW1ucyA9IGVudGl0eS5jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChjb2wpID0+XG4gICAgICAgICAgICAgICAgIWNvbC5pc1VzZWRJblJlbGF0aW9uQXNPd25lciB8fFxuICAgICAgICAgICAgICAgIGNvbC5pc1VzZWRJblJlbGF0aW9uQXNSZWZlcmVuY2VkIHx8XG4gICAgICAgICAgICAgICAgZW50aXR5LmluZGljZXMuc29tZSgoaWR4KSA9PlxuICAgICAgICAgICAgICAgICAgICBpZHguY29sdW1ucy5zb21lKCh2KSA9PiB2ID09PSBjb2wudHNjTmFtZSlcbiAgICAgICAgICAgICAgICApIHx8XG4gICAgICAgICAgICAgICAgY29sLnByaW1hcnlcbiAgICAgICAgKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGJNb2RlbDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUNvbHVtbkRlZmF1bHRQcm9wZXJ0aWVzKFxuICAgIGRiTW9kZWw6IEVudGl0eVtdLFxuICAgIGRlZmF1bHRWYWx1ZXM6IERhdGFUeXBlRGVmYXVsdHNcbik6IEVudGl0eVtdIHtcbiAgICBpZiAoIWRlZmF1bHRWYWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIGRiTW9kZWw7XG4gICAgfVxuICAgIGRiTW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgIGVudGl0eS5jb2x1bW5zLmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVmVmFsID0gZGVmYXVsdFZhbHVlc1tjb2x1bW4udHNjVHlwZV07XG4gICAgICAgICAgICBpZiAoZGVmVmFsKSB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgZGVmVmFsLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5sZW5ndGggPT09IGRlZlZhbC5sZW5ndGhcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMubGVuZ3RoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICBkZWZWYWwucHJlY2lzaW9uICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLnByZWNpc2lvbiA9PT0gZGVmVmFsLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5zY2FsZSAmJlxuICAgICAgICAgICAgICAgICAgICBkZWZWYWwuc2NhbGUgJiZcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMuc2NhbGUgPT09IGRlZlZhbC5zY2FsZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5wcmVjaXNpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLnNjYWxlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIGRlZlZhbC53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy53aWR0aCA9PT0gZGVmVmFsLndpZHRoXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLndpZHRoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRiTW9kZWw7XG59XG5cbmZ1bmN0aW9uIGZpbmRGaWxlSW1wb3J0cyhkYk1vZGVsOiBFbnRpdHlbXSkge1xuICAgIGRiTW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgIGVudGl0eS5yZWxhdGlvbnMuZm9yRWFjaCgocmVsYXRpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICByZWxhdGlvbi5yZWxhdGVkVGFibGUgIT09IGVudGl0eS50c2NOYW1lICYmXG4gICAgICAgICAgICAgICAgIWVudGl0eS5maWxlSW1wb3J0cy5zb21lKCh2KSA9PiB2ID09PSByZWxhdGlvbi5yZWxhdGVkVGFibGUpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkuZmlsZUltcG9ydHMucHVzaChyZWxhdGlvbi5yZWxhdGVkVGFibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGJNb2RlbDtcbn1cblxuZnVuY3Rpb24gYWRkSW1wb3J0c0FuZEdlbmVyYXRpb25PcHRpb25zKFxuICAgIGRiTW9kZWw6IEVudGl0eVtdLFxuICAgIGdlbmVyYXRpb25PcHRpb25zOiBJR2VuZXJhdGlvbk9wdGlvbnNcbik6IEVudGl0eVtdIHtcbiAgICBkYk1vZGVsID0gZmluZEZpbGVJbXBvcnRzKGRiTW9kZWwpO1xuICAgIGRiTW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgIGVudGl0eS5yZWxhdGlvbnMuZm9yRWFjaCgocmVsYXRpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChnZW5lcmF0aW9uT3B0aW9ucy5sYXp5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWxhdGlvbi5yZWxhdGlvbk9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpb24ucmVsYXRpb25PcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlbGF0aW9uLnJlbGF0aW9uT3B0aW9ucy5sYXp5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChnZW5lcmF0aW9uT3B0aW9ucy5za2lwU2NoZW1hKSB7XG4gICAgICAgICAgICBlbnRpdHkuc2NoZW1hID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZW50aXR5LmRhdGFiYXNlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZW5lcmF0aW9uT3B0aW9ucy5hY3RpdmVSZWNvcmQpIHtcbiAgICAgICAgICAgIGVudGl0eS5hY3RpdmVSZWNvcmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZW5lcmF0aW9uT3B0aW9ucy5nZW5lcmF0ZUNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICBlbnRpdHkuZ2VuZXJhdGVDb25zdHJ1Y3RvciA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGJNb2RlbDtcbn1cblxuZnVuY3Rpb24gYXBwbHlOYW1pbmdTdHJhdGVneShcbiAgICBuYW1pbmdTdHJhdGVneTogdHlwZW9mIE5hbWluZ1N0cmF0ZWd5LFxuICAgIGRiTW9kZWw6IEVudGl0eVtdXG4pOiBFbnRpdHlbXSB7XG4gICAgbGV0IHJldFZhbCA9IGNoYW5nZVJlbGF0aW9uTmFtZXMoZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gY2hhbmdlUmVsYXRpb25JZE5hbWVzKHJldFZhbCk7XG4gICAgcmV0VmFsID0gY2hhbmdlRW50aXR5TmFtZXMocmV0VmFsKTtcbiAgICByZXRWYWwgPSBjaGFuZ2VDb2x1bW5OYW1lcyhyZXRWYWwpO1xuICAgIHJldHVybiByZXRWYWw7XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VSZWxhdGlvbklkTmFtZXMobW9kZWw6IEVudGl0eVtdKTogRW50aXR5W10ge1xuICAgICAgICBtb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgICAgIGVudGl0eS5yZWxhdGlvbklkcy5mb3JFYWNoKChyZWxhdGlvbklkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkTmFtZSA9IHJlbGF0aW9uSWQuZmllbGROYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aW9uID0gZW50aXR5LnJlbGF0aW9ucy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAodikgPT4gdi5maWVsZE5hbWUgPT09IHJlbGF0aW9uSWQucmVsYXRpb25GaWVsZFxuICAgICAgICAgICAgICAgICkhO1xuICAgICAgICAgICAgICAgIGxldCBuZXdOYW1lID0gbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25JZE5hbWUoXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIG5ld05hbWUgPSBUb21nVXRpbHMuZmluZE5hbWVGb3JOZXdGaWVsZChcbiAgICAgICAgICAgICAgICAgICAgbmV3TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBvbGROYW1lXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBlbnRpdHkuaW5kaWNlcy5mb3JFYWNoKChpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpbmRleC5jb2x1bW5zID0gaW5kZXguY29sdW1ucy5tYXAoKGNvbHVtbjIpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4yID09PSBvbGROYW1lID8gbmV3TmFtZSA6IGNvbHVtbjJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlbGF0aW9uSWQuZmllbGROYW1lID0gbmV3TmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRiTW9kZWw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hhbmdlUmVsYXRpb25OYW1lcyhtb2RlbDogRW50aXR5W10pOiBFbnRpdHlbXSB7XG4gICAgICAgIG1vZGVsLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICAgICAgZW50aXR5LnJlbGF0aW9ucy5mb3JFYWNoKChyZWxhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZE5hbWUgPSByZWxhdGlvbi5maWVsZE5hbWU7XG4gICAgICAgICAgICAgICAgbGV0IG5ld05hbWUgPSBuYW1pbmdTdHJhdGVneS5yZWxhdGlvbk5hbWUocmVsYXRpb24sIGVudGl0eSk7XG4gICAgICAgICAgICAgICAgbmV3TmFtZSA9IFRvbWdVdGlscy5maW5kTmFtZUZvck5ld0ZpZWxkKFxuICAgICAgICAgICAgICAgICAgICBuZXdOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIG9sZE5hbWVcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRlZEVudGl0eSA9IG1vZGVsLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LnRzY05hbWUgPT09IHJlbGF0aW9uLnJlbGF0ZWRUYWJsZVxuICAgICAgICAgICAgICAgICkhO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aW9uMiA9IHJlbGF0ZWRFbnRpdHkucmVsYXRpb25zLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LmZpZWxkTmFtZSA9PT0gcmVsYXRpb24ucmVsYXRlZEZpZWxkXG4gICAgICAgICAgICAgICAgKSE7XG5cbiAgICAgICAgICAgICAgICBlbnRpdHkucmVsYXRpb25JZHNcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigodikgPT4gdi5yZWxhdGlvbkZpZWxkID09PSBvbGROYW1lKVxuICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdi5yZWxhdGlvbkZpZWxkID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZWxhdGlvbi5maWVsZE5hbWUgPSBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIHJlbGF0aW9uMi5yZWxhdGVkRmllbGQgPSBuZXdOYW1lO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aW9uLnJlbGF0aW9uT3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuaW5kaWNlcy5mb3JFYWNoKChpbmQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZC5jb2x1bW5zLm1hcCgoY29sdW1uMikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4yID09PSBvbGROYW1lID8gbmV3TmFtZSA6IGNvbHVtbjJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRiTW9kZWw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hhbmdlQ29sdW1uTmFtZXMobW9kZWw6IEVudGl0eVtdKTogRW50aXR5W10ge1xuICAgICAgICBtb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgICAgIGVudGl0eS5jb2x1bW5zLmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZE5hbWUgPSBjb2x1bW4udHNjTmFtZTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TmFtZSA9IG5hbWluZ1N0cmF0ZWd5LmNvbHVtbk5hbWUoY29sdW1uLnRzY05hbWUsIGNvbHVtbik7XG4gICAgICAgICAgICAgICAgbmV3TmFtZSA9IFRvbWdVdGlscy5maW5kTmFtZUZvck5ld0ZpZWxkKFxuICAgICAgICAgICAgICAgICAgICBuZXdOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIG9sZE5hbWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGVudGl0eS5pbmRpY2VzLmZvckVhY2goKGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4LmNvbHVtbnMgPSBpbmRleC5jb2x1bW5zLm1hcCgoY29sdW1uMikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjIgPT09IG9sZE5hbWUgPyBuZXdOYW1lIDogY29sdW1uMlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uLnRzY05hbWUgPSBuZXdOYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoYW5nZUVudGl0eU5hbWVzKGVudGl0aWVzOiBFbnRpdHlbXSk6IEVudGl0eVtdIHtcbiAgICAgICAgZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdOYW1lID0gbmFtaW5nU3RyYXRlZ3kuZW50aXR5TmFtZShlbnRpdHkudHNjTmFtZSwgZW50aXR5KTtcbiAgICAgICAgICAgIGVudGl0aWVzLmZvckVhY2goKGVudGl0eTIpID0+IHtcbiAgICAgICAgICAgICAgICBlbnRpdHkyLnJlbGF0aW9ucy5mb3JFYWNoKChyZWxhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVsYXRpb24ucmVsYXRlZFRhYmxlID09PSBlbnRpdHkudHNjTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb24ucmVsYXRlZFRhYmxlID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbnRpdHkudHNjTmFtZSA9IG5ld05hbWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZW50aXRpZXM7XG4gICAgfVxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL25lbW8vd29yay9naXRodWIvdHlwZW9ybS1tb2RlbC1nZW5lcmF0b3Ivc3JjL01vZGVsQ3VzdG9taXphdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMnovQ0FDQSxLQUFBLENBQUEsdUJBQUEseUJBQUEsT0FBQSxDQUFBLCtDQUFBLENBQUEsQ0FBQSxDQUdBLEtBQUEsQ0FBQSxjQUFBLHlCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsU0FBQSx5QkFBQSxPQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FFQSxRQUF3QixDQUFBLHVCQUF4QixDQUNJLE9BREosQ0FFSSxpQkFGSixDQUdJLGFBSEosQ0FHbUMsd0JBRS9CLEtBQU0sQ0FBQSxjQUFjLHlCQUEwQixDQUMxQyxtQkFBbUIsQ0FBRSxjQUFjLENBQUMsbUJBRE0sQ0FFMUMsVUFBVSxDQUFFLGNBQWMsQ0FBQyxVQUZlLENBRzFDLFVBQVUsQ0FBRSxjQUFjLENBQUMsVUFIZSxDQUkxQyxjQUFjLENBQUUsY0FBYyxDQUFDLGNBSlcsQ0FLMUMsWUFBWSxDQUFFLGNBQWMsQ0FBQyxZQUxhLENBQTFCLENBQXBCLENBRitCLHVCQVMvQixHQUNJLDJCQUFBLGlCQUFpQixDQUFDLHdCQUFsQiw4QkFDQSxpQkFBaUIsQ0FBQyx3QkFBbEIsR0FBK0MsRUFEL0MsQ0FESixDQUdFLDJCQUNFO0FBQ0EsS0FBTSxDQUFBLEdBQUcseUJBQUcsU0FBUyxDQUFDLGdCQUFWLENBQ1IsaUJBQWlCLENBQUMsd0JBRFYsQ0FBSCxDQUFULENBRkYsdUJBS0UsR0FBSSxHQUFHLENBQUMsVUFBUixDQUFvQixrREFDaEIsT0FBTyxDQUFDLEdBQVIsQ0FDSSxJQUFJLEdBQUksQ0FBQSxJQUFKLEdBQVcsa0JBQVgsRUFBK0Isa0RBRHZDLEVBRGdCLHVCQUloQixjQUFjLENBQUMsVUFBZixDQUE0QixHQUFHLENBQUMsVUFBaEMsQ0FDSCxDQUxELElBS08sbURBQ0gsT0FBTyxDQUFDLEdBQVIsQ0FDSSxJQUFJLEdBQUksQ0FBQSxJQUFKLEdBQVcsa0JBQVgsRUFBK0Isb0RBRHZDLEVBR0gsQ0FkSCx3QkFlRSxHQUFJLEdBQUcsQ0FBQyxVQUFSLENBQW9CLG1EQUNoQixPQUFPLENBQUMsR0FBUixDQUNJLElBQUksR0FBSSxDQUFBLElBQUosR0FBVyxrQkFBWCxFQUErQixrREFEdkMsRUFEZ0Isd0JBSWhCLGNBQWMsQ0FBQyxVQUFmLENBQTRCLEdBQUcsQ0FBQyxVQUFoQyxDQUNILENBTEQsSUFLTyxtREFDSCxPQUFPLENBQUMsR0FBUixDQUNJLElBQUksR0FBSSxDQUFBLElBQUosR0FBVyxrQkFBWCxFQUErQixvREFEdkMsRUFHSCxDQXhCSCx3QkF5QkUsR0FBSSxHQUFHLENBQUMsY0FBUixDQUF3QixtREFDcEIsT0FBTyxDQUFDLEdBQVIsQ0FDSSxJQUFJLEdBQUksQ0FBQSxJQUFKLEdBQVcsa0JBQVgsRUFBK0IsNERBRHZDLEVBRG9CLHdCQUlwQixjQUFjLENBQUMsY0FBZixDQUFnQyxHQUFHLENBQUMsY0FBcEMsQ0FDSCxDQUxELElBS08sbURBQ0gsT0FBTyxDQUFDLEdBQVIsQ0FDSSxJQUFJLEdBQUksQ0FBQSxJQUFKLEdBQVcsa0JBQVgsRUFBK0IsOERBRHZDLEVBR0gsQ0FsQ0gsd0JBbUNFLEdBQUksR0FBRyxDQUFDLFlBQVIsQ0FBc0IsbURBQ2xCLE9BQU8sQ0FBQyxHQUFSLENBQ0ksSUFBSSxHQUFJLENBQUEsSUFBSixHQUFXLGtCQUFYLEVBQStCLDBEQUR2QyxFQURrQix3QkFJbEIsY0FBYyxDQUFDLFlBQWYsQ0FBOEIsR0FBRyxDQUFDLFlBQWxDLENBQ0gsQ0FMRCxJQUtPLG1EQUNILE9BQU8sQ0FBQyxHQUFSLENBQ0ksSUFBSSxHQUFJLENBQUEsSUFBSixHQUFXLGtCQUFYLEVBQStCLDREQUR2QyxFQUdILENBNUNILHdCQTZDRSxHQUFJLEdBQUcsQ0FBQyxtQkFBUixDQUE2QixtREFDekIsT0FBTyxDQUFDLEdBQVIsQ0FDSSxJQUFJLEdBQUksQ0FBQSxJQUFKLEdBQVcsa0JBQVgsRUFBK0IscUZBRHZDLEVBRHlCLHdCQUl6QixjQUFjLENBQUMsbUJBQWYsQ0FBcUMsR0FBRyxDQUFDLG1CQUF6QyxDQUNILENBTEQsSUFLTyxtREFDSCxPQUFPLENBQUMsR0FBUixDQUNJLElBQUksR0FBSSxDQUFBLElBQUosR0FBVyxrQkFBWCxFQUErQixxRkFEdkMsRUFHSCxDQUNKLENBMURELGdDQVQrQix3QkFvRS9CLGNBQWMsQ0FBQyxtQkFBZixDQUFtQyxpQkFBaUIsQ0FBQyxjQUFyRCxFQUNBLEdBQUksQ0FBQSxNQUFNLDBCQUFHLCtCQUErQixDQUFDLE9BQUQsQ0FBbEMsQ0FBVixDQXJFK0Isd0JBc0UvQixNQUFNLENBQUcsdUJBQXVCLENBQUMsT0FBRCxDQUFoQyxDQXRFK0Isd0JBdUUvQixNQUFNLENBQUcsbUJBQW1CLENBQUMsY0FBRCxDQUFpQixPQUFqQixDQUE1QixDQXZFK0Isd0JBd0UvQixNQUFNLENBQUcsOEJBQThCLENBQUMsTUFBRCxDQUFTLGlCQUFULENBQXZDLENBeEUrQix3QkF5RS9CLE1BQU0sQ0FBRyw2QkFBNkIsQ0FBQyxNQUFELENBQVMsYUFBVCxDQUF0QyxDQXpFK0Isd0JBMEUvQixNQUFPLENBQUEsTUFBUCxDQUNILEMsd0JBOUVELE9BQUEsQ0FBQSxPQUFBLENBQUEsdUJBQUEsQ0ErRUEsUUFBUyxDQUFBLCtCQUFULENBQXlDLE9BQXpDLENBQTBELHdCQUN0RDtBQUNBLEtBQU0sQ0FBQSxjQUFjLDBCQUFHLEdBQUksQ0FBQSx1QkFBQSxDQUFBLHFCQUFKLEVBQUgsQ0FBcEIsQ0FGc0Qsd0JBR3RELE9BQU8sQ0FBQyxPQUFSLENBQWlCLE1BQUQsRUFBVyxnREFDdkIsTUFBTSxDQUFDLE9BQVAsQ0FBaUIsTUFBTSxDQUFDLE9BQVAsQ0FBZSxNQUFmLENBQ1osQ0FBRCxFQUNJLHdEQUNJLDJCQUFBLENBQUMsQ0FBQyxJQUFGLENBQU8sVUFBUCxDQUFrQixtQkFBbEIsSUFDQywyQkFBQSxDQUFDLENBQUMsT0FBRiw4QkFBYSxDQUFDLENBQUMsSUFBRixHQUFXLFNBQXhCLENBRkwsRUFHQyxDQUxRLENBQWpCLENBT0EsS0FBTSxDQUFBLGNBQWMsMEJBQUcsTUFBTSxDQUFDLE9BQVAsQ0FDbEIsTUFEa0IsQ0FDVixDQUFELEVBQU8sc0RBQUEsQ0FBQSxDQUFDLENBQUMsT0FBRixDQUFTLENBREwsRUFFbEIsR0FGa0IsQ0FFYixDQUFELEVBQU8sc0RBQUEsQ0FBQSxDQUFDLENBQUMsT0FBRixDQUFTLENBRkYsQ0FBSCxDQUFwQixDQUlBLEtBQU0sQ0FBQSxZQUFZLDBCQUFHLENBQUEsNEJBQUEsTUFBTSxHQUFBLElBQU4sK0JBQUEsTUFBTSxHQUFBLElBQUEsRUFBTiw2QkFBTSxJQUFBLEVBQU4sNkJBQUEsTUFBTSxDQUFFLE1BQVIsQ0FBQSw2QkFDZixHQUFHLE1BQU0sQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLE9BQU8sRUFEbkIsNkJBRWYsTUFBTSxDQUFDLE9BRlEsQ0FBSCxDQUFsQixDQVp1Qix3QkFnQnZCLE1BQU0sQ0FBQyxPQUFQLENBQWlCLE1BQU0sQ0FBQyxPQUFQLENBQWUsTUFBZixDQUNaLENBQUQsRUFDSSx3REFDSSw0QkFBQSxDQUFDLENBQUMsT0FBRiwrQkFDQSxDQUFDLENBQUMsSUFBRixHQUNJLGNBQWMsQ0FBQyxjQUFmLENBQ0ksWUFESixDQUVJLGNBRkosQ0FGSixDQURKLEVBT0MsQ0FUUSxDQUFqQixDQWhCdUIsd0JBMkJ2QixNQUFNLENBQUMsU0FBUCxDQUNLLE1BREwsQ0FDYSxDQUFELEVBQU8sc0RBQUEsQ0FBQSxDQUFDLENBQUMsaUJBQUYsQ0FBbUIsQ0FEdEMsRUFFSyxPQUZMLENBRWMsR0FBRCxFQUFRLHdCQUNiLEtBQU0sQ0FBQSxXQUFXLDBCQUFHLEdBQUcsQ0FBQyxpQkFBSixDQUF1QixHQUF2QixDQUE0QixDQUFELEVBQU8sc0RBQUEsQ0FBQSxDQUFDLENBQUMsSUFBRixDQUFNLENBQXhDLENBQUgsQ0FBakIsQ0FDQSxLQUFNLENBQUEsT0FBTywwQkFBRyxjQUFjLENBQUMsc0JBQWYsQ0FDWixZQURZLENBRVosV0FGWSxDQUFILENBQWIsQ0FJQSxLQUFNLENBQUEsTUFBTSwwQkFBRyxjQUFjLENBQUMsY0FBZixDQUNYLFlBRFcsQ0FFWCxXQUZXLENBQUgsQ0FBWixDQU5hLHdCQVViLE1BQU0sQ0FBQyxPQUFQLENBQWlCLE1BQU0sQ0FBQyxPQUFQLENBQWUsTUFBZixDQUNaLENBQUQsRUFBTyxtRkFBQSxDQUFDLENBQUMsSUFBRixHQUFXLE9BQVgsK0JBQXNCLENBQUMsQ0FBQyxJQUFGLEdBQVcsTUFBakMsRUFBdUMsQ0FEakMsQ0FBakIsQ0FHSCxDQWZMLEVBZ0JILENBM0NELEVBSHNELHdCQWdEdEQsTUFBTyxDQUFBLE9BQVAsQ0FDSCxDQUNELFFBQVMsQ0FBQSx1QkFBVCxDQUFpQyxPQUFqQyxDQUFrRCxpREFDOUMsT0FBTyxDQUFDLE9BQVIsQ0FBaUIsTUFBRCxFQUFXLGlEQUN2QixNQUFNLENBQUMsT0FBUCxDQUFpQixNQUFNLENBQUMsT0FBUCxDQUFlLE1BQWYsQ0FDWixHQUFELEVBQ0ksb0ZBQUMsR0FBRyxDQUFDLHVCQUFMLCtCQUNBLEdBQUcsQ0FBQyw0QkFESiwrQkFFQSxNQUFNLENBQUMsT0FBUCxDQUFlLElBQWYsQ0FBcUIsR0FBRCxFQUNoQix1REFBQSxDQUFBLEdBQUcsQ0FBQyxPQUFKLENBQVksSUFBWixDQUFrQixDQUFELEVBQU8sdURBQUEsQ0FBQSxDQUFDLEdBQUssR0FBRyxDQUFDLE9BQVYsQ0FBaUIsQ0FBekMsRUFBMEMsQ0FEOUMsQ0FGQSwrQkFLQSxHQUFHLENBQUMsT0FMSixFQUtXLENBUEYsQ0FBakIsQ0FTSCxDQVZELEVBRDhDLHdCQVk5QyxNQUFPLENBQUEsT0FBUCxDQUNILENBQ0QsUUFBUyxDQUFBLDZCQUFULENBQ0ksT0FESixDQUVJLGFBRkosQ0FFbUMsaURBRS9CLEdBQUksQ0FBQyxhQUFMLENBQW9CLG9EQUNoQixNQUFPLENBQUEsT0FBUCxDQUNILENBRkQsaUNBRitCLHdCQUsvQixPQUFPLENBQUMsT0FBUixDQUFpQixNQUFELEVBQVcsaURBQ3ZCLE1BQU0sQ0FBQyxPQUFQLENBQWUsT0FBZixDQUF3QixNQUFELEVBQVcseUJBQzlCLEtBQU0sQ0FBQSxNQUFNLDBCQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsT0FBUixDQUFoQixDQUFaLENBRDhCLHdCQUU5QixHQUFJLE1BQUosQ0FBWSxvREFDUixHQUNJLDRCQUFBLE1BQU0sQ0FBQyxPQUFQLENBQWUsTUFBZiwrQkFDQSxNQUFNLENBQUMsTUFEUCwrQkFFQSxNQUFNLENBQUMsT0FBUCxDQUFlLE1BQWYsR0FBMEIsTUFBTSxDQUFDLE1BRmpDLENBREosQ0FJRSxvREFDRSxNQUFNLENBQUMsT0FBUCxDQUFlLE1BQWYsQ0FBd0IsU0FBeEIsQ0FDSCxDQU5ELGlDQURRLHdCQVFSLEdBQ0ksNEJBQUEsTUFBTSxDQUFDLE9BQVAsQ0FBZSxTQUFmLCtCQUNBLE1BQU0sQ0FBQyxTQURQLCtCQUVBLE1BQU0sQ0FBQyxPQUFQLENBQWUsU0FBZixHQUE2QixNQUFNLENBQUMsU0FGcEMsK0JBR0EsTUFBTSxDQUFDLE9BQVAsQ0FBZSxLQUhmLCtCQUlBLE1BQU0sQ0FBQyxLQUpQLCtCQUtBLE1BQU0sQ0FBQyxPQUFQLENBQWUsS0FBZixHQUF5QixNQUFNLENBQUMsS0FMaEMsQ0FESixDQU9FLG9EQUNFLE1BQU0sQ0FBQyxPQUFQLENBQWUsU0FBZixDQUEyQixTQUEzQixDQURGLHdCQUVFLE1BQU0sQ0FBQyxPQUFQLENBQWUsS0FBZixDQUF1QixTQUF2QixDQUNILENBVkQsaUNBUlEsd0JBbUJSLEdBQ0ksNEJBQUEsTUFBTSxDQUFDLE9BQVAsQ0FBZSxLQUFmLCtCQUNBLE1BQU0sQ0FBQyxLQURQLCtCQUVBLE1BQU0sQ0FBQyxPQUFQLENBQWUsS0FBZixHQUF5QixNQUFNLENBQUMsS0FGaEMsQ0FESixDQUlFLG9EQUNFLE1BQU0sQ0FBQyxPQUFQLENBQWUsS0FBZixDQUF1QixTQUF2QixDQUNILENBTkQsaUNBT0gsQ0ExQkQsaUNBMkJILENBN0JELEVBOEJILENBL0JELEVBTCtCLHdCQXFDL0IsTUFBTyxDQUFBLE9BQVAsQ0FDSCxDQUVELFFBQVMsQ0FBQSxlQUFULENBQXlCLE9BQXpCLENBQTBDLGlEQUN0QyxPQUFPLENBQUMsT0FBUixDQUFpQixNQUFELEVBQVcsaURBQ3ZCLE1BQU0sQ0FBQyxTQUFQLENBQWlCLE9BQWpCLENBQTBCLFFBQUQsRUFBYSxpREFDbEMsR0FDSSw0QkFBQSxRQUFRLENBQUMsWUFBVCxHQUEwQixNQUFNLENBQUMsT0FBakMsK0JBQ0EsQ0FBQyxNQUFNLENBQUMsV0FBUCxDQUFtQixJQUFuQixDQUF5QixDQUFELEVBQU8sdURBQUEsQ0FBQSxDQUFDLEdBQUssUUFBUSxDQUFDLFlBQWYsQ0FBMkIsQ0FBMUQsQ0FERCxDQURKLENBR0Usb0RBQ0UsTUFBTSxDQUFDLFdBQVAsQ0FBbUIsSUFBbkIsQ0FBd0IsUUFBUSxDQUFDLFlBQWpDLEVBQ0gsQ0FMRCxpQ0FNSCxDQVBELEVBUUgsQ0FURCxFQURzQyx3QkFXdEMsTUFBTyxDQUFBLE9BQVAsQ0FDSCxDQUVELFFBQVMsQ0FBQSw4QkFBVCxDQUNJLE9BREosQ0FFSSxpQkFGSixDQUV5QyxpREFFckMsT0FBTyxDQUFHLGVBQWUsQ0FBQyxPQUFELENBQXpCLENBRnFDLHdCQUdyQyxPQUFPLENBQUMsT0FBUixDQUFpQixNQUFELEVBQVcsaURBQ3ZCLE1BQU0sQ0FBQyxTQUFQLENBQWlCLE9BQWpCLENBQTBCLFFBQUQsRUFBYSxpREFDbEMsR0FBSSxpQkFBaUIsQ0FBQyxJQUF0QixDQUE0QixvREFDeEIsR0FBSSxDQUFDLFFBQVEsQ0FBQyxlQUFkLENBQStCLG9EQUMzQixRQUFRLENBQUMsZUFBVCxDQUEyQixFQUEzQixDQUNILENBRkQsaUNBRHdCLHdCQUl4QixRQUFRLENBQUMsZUFBVCxDQUF5QixJQUF6QixDQUFnQyxJQUFoQyxDQUNILENBTEQsaUNBTUgsQ0FQRCxFQUR1Qix3QkFTdkIsR0FBSSxpQkFBaUIsQ0FBQyxVQUF0QixDQUFrQyxvREFDOUIsTUFBTSxDQUFDLE1BQVAsQ0FBZ0IsU0FBaEIsQ0FEOEIsd0JBRTlCLE1BQU0sQ0FBQyxRQUFQLENBQWtCLFNBQWxCLENBQ0gsQ0FIRCxpQ0FUdUIsd0JBYXZCLEdBQUksaUJBQWlCLENBQUMsWUFBdEIsQ0FBb0Msb0RBQ2hDLE1BQU0sQ0FBQyxZQUFQLENBQXNCLElBQXRCLENBQ0gsQ0FGRCxpQ0FidUIsd0JBZ0J2QixHQUFJLGlCQUFpQixDQUFDLG1CQUF0QixDQUEyQyxvREFDdkMsTUFBTSxDQUFDLG1CQUFQLENBQTZCLElBQTdCLENBQ0gsQ0FGRCxpQ0FHSCxDQW5CRCxFQUhxQyx3QkF1QnJDLE1BQU8sQ0FBQSxPQUFQLENBQ0gsQ0FFRCxRQUFTLENBQUEsbUJBQVQsQ0FDSSxjQURKLENBRUksT0FGSixDQUVxQix5QkFFakIsR0FBSSxDQUFBLE1BQU0sMEJBQUcsbUJBQW1CLENBQUMsT0FBRCxDQUF0QixDQUFWLENBRmlCLHdCQUdqQixNQUFNLENBQUcscUJBQXFCLENBQUMsTUFBRCxDQUE5QixDQUhpQix3QkFJakIsTUFBTSxDQUFHLGlCQUFpQixDQUFDLE1BQUQsQ0FBMUIsQ0FKaUIsd0JBS2pCLE1BQU0sQ0FBRyxpQkFBaUIsQ0FBQyxNQUFELENBQTFCLENBTGlCLHdCQU1qQixNQUFPLENBQUEsTUFBUCxDQUVBLFFBQVMsQ0FBQSxxQkFBVCxDQUErQixLQUEvQixDQUE4QyxrREFDMUMsS0FBSyxDQUFDLE9BQU4sQ0FBZSxNQUFELEVBQVcsa0RBQ3JCLE1BQU0sQ0FBQyxXQUFQLENBQW1CLE9BQW5CLENBQTRCLFVBQUQsRUFBZSx5QkFDdEMsS0FBTSxDQUFBLE9BQU8sMkJBQUcsVUFBVSxDQUFDLFNBQWQsQ0FBYixDQUNBLEtBQU0sQ0FBQSxRQUFRLDJCQUFHLE1BQU0sQ0FBQyxTQUFQLENBQWlCLElBQWpCLENBQ1osQ0FBRCxFQUFPLHdEQUFBLENBQUEsQ0FBQyxDQUFDLFNBQUYsR0FBZ0IsVUFBVSxDQUFDLGFBQTNCLENBQXdDLENBRGxDLENBQUgsQ0FBZCxDQUdBLEdBQUksQ0FBQSxPQUFPLDJCQUFHLGNBQWMsQ0FBQyxjQUFmLENBQ1YsVUFEVSxDQUVWLFFBRlUsQ0FHVixNQUhVLENBQUgsQ0FBWCxDQUxzQyx5QkFVdEMsT0FBTyxDQUFHLFNBQVMsQ0FBQyxtQkFBVixDQUNOLE9BRE0sQ0FFTixNQUZNLENBR04sT0FITSxDQUFWLENBVnNDLHlCQWV0QyxNQUFNLENBQUMsT0FBUCxDQUFlLE9BQWYsQ0FBd0IsS0FBRCxFQUFVLGtEQUM3QixLQUFLLENBQUMsT0FBTixDQUFnQixLQUFLLENBQUMsT0FBTixDQUFjLEdBQWQsQ0FBbUIsT0FBRCxFQUM5Qix3REFBQSxDQUFBLE9BQU8sR0FBSyxPQUFaLDZCQUFzQixPQUF0Qiw4QkFBZ0MsT0FBaEMsRUFBdUMsQ0FEM0IsQ0FBaEIsQ0FHSCxDQUpELEVBZnNDLHlCQXFCdEMsVUFBVSxDQUFDLFNBQVgsQ0FBdUIsT0FBdkIsQ0FDSCxDQXRCRCxFQXVCSCxDQXhCRCxFQUQwQyx5QkEwQjFDLE1BQU8sQ0FBQSxPQUFQLENBQ0gsQ0FFRCxRQUFTLENBQUEsbUJBQVQsQ0FBNkIsS0FBN0IsQ0FBNEMsa0RBQ3hDLEtBQUssQ0FBQyxPQUFOLENBQWUsTUFBRCxFQUFXLGtEQUNyQixNQUFNLENBQUMsU0FBUCxDQUFpQixPQUFqQixDQUEwQixRQUFELEVBQWEseUJBQ2xDLEtBQU0sQ0FBQSxPQUFPLDJCQUFHLFFBQVEsQ0FBQyxTQUFaLENBQWIsQ0FDQSxHQUFJLENBQUEsT0FBTywyQkFBRyxjQUFjLENBQUMsWUFBZixDQUE0QixRQUE1QixDQUFzQyxNQUF0QyxDQUFILENBQVgsQ0FGa0MseUJBR2xDLE9BQU8sQ0FBRyxTQUFTLENBQUMsbUJBQVYsQ0FDTixPQURNLENBRU4sTUFGTSxDQUdOLE9BSE0sQ0FBVixDQU1BLEtBQU0sQ0FBQSxhQUFhLDJCQUFHLEtBQUssQ0FBQyxJQUFOLENBQ2pCLENBQUQsRUFBTyx3REFBQSxDQUFBLENBQUMsQ0FBQyxPQUFGLEdBQWMsUUFBUSxDQUFDLFlBQXZCLENBQW1DLENBRHhCLENBQUgsQ0FBbkIsQ0FHQSxLQUFNLENBQUEsU0FBUywyQkFBRyxhQUFhLENBQUMsU0FBZCxDQUF3QixJQUF4QixDQUNiLENBQUQsRUFBTyx3REFBQSxDQUFBLENBQUMsQ0FBQyxTQUFGLEdBQWdCLFFBQVEsQ0FBQyxZQUF6QixDQUFxQyxDQUQ5QixDQUFILENBQWYsQ0Faa0MseUJBZ0JsQyxNQUFNLENBQUMsV0FBUCxDQUNLLE1BREwsQ0FDYSxDQUFELEVBQU8sd0RBQUEsQ0FBQSxDQUFDLENBQUMsYUFBRixHQUFvQixPQUFwQixDQUEyQixDQUQ5QyxFQUVLLE9BRkwsQ0FFYyxDQUFELEVBQU0sa0RBQ1gsQ0FBQyxDQUFDLGFBQUYsQ0FBa0IsT0FBbEIsQ0FDSCxDQUpMLEVBaEJrQyx5QkFzQmxDLFFBQVEsQ0FBQyxTQUFULENBQXFCLE9BQXJCLENBdEJrQyx5QkF1QmxDLFNBQVMsQ0FBQyxZQUFWLENBQXlCLE9BQXpCLENBdkJrQyx5QkF5QmxDLEdBQUksUUFBUSxDQUFDLGVBQWIsQ0FBOEIscURBQzFCLE1BQU0sQ0FBQyxPQUFQLENBQWUsT0FBZixDQUF3QixHQUFELEVBQVEsa0RBQzNCLEdBQUcsQ0FBQyxPQUFKLENBQVksR0FBWixDQUFpQixPQUFELEVBQ1osd0RBQUEsQ0FBQSxPQUFPLEdBQUssT0FBWiw2QkFBc0IsT0FBdEIsOEJBQWdDLE9BQWhDLEVBQXVDLENBRDNDLEVBR0gsQ0FKRCxFQUtILENBTkQsaUNBT0gsQ0FoQ0QsRUFpQ0gsQ0FsQ0QsRUFEd0MseUJBb0N4QyxNQUFPLENBQUEsT0FBUCxDQUNILENBRUQsUUFBUyxDQUFBLGlCQUFULENBQTJCLEtBQTNCLENBQTBDLGtEQUN0QyxLQUFLLENBQUMsT0FBTixDQUFlLE1BQUQsRUFBVyxrREFDckIsTUFBTSxDQUFDLE9BQVAsQ0FBZSxPQUFmLENBQXdCLE1BQUQsRUFBVyx5QkFDOUIsS0FBTSxDQUFBLE9BQU8sMkJBQUcsTUFBTSxDQUFDLE9BQVYsQ0FBYixDQUNBLEdBQUksQ0FBQSxPQUFPLDJCQUFHLGNBQWMsQ0FBQyxVQUFmLENBQTBCLE1BQU0sQ0FBQyxPQUFqQyxDQUEwQyxNQUExQyxDQUFILENBQVgsQ0FGOEIseUJBRzlCLE9BQU8sQ0FBRyxTQUFTLENBQUMsbUJBQVYsQ0FDTixPQURNLENBRU4sTUFGTSxDQUdOLE9BSE0sQ0FBVixDQUg4Qix5QkFROUIsTUFBTSxDQUFDLE9BQVAsQ0FBZSxPQUFmLENBQXdCLEtBQUQsRUFBVSxrREFDN0IsS0FBSyxDQUFDLE9BQU4sQ0FBZ0IsS0FBSyxDQUFDLE9BQU4sQ0FBYyxHQUFkLENBQW1CLE9BQUQsRUFDOUIsd0RBQUEsQ0FBQSxPQUFPLEdBQUssT0FBWiw2QkFBc0IsT0FBdEIsOEJBQWdDLE9BQWhDLEVBQXVDLENBRDNCLENBQWhCLENBR0gsQ0FKRCxFQVI4Qix5QkFjOUIsTUFBTSxDQUFDLE9BQVAsQ0FBaUIsT0FBakIsQ0FDSCxDQWZELEVBZ0JILENBakJELEVBRHNDLHlCQW1CdEMsTUFBTyxDQUFBLEtBQVAsQ0FDSCxDQUNELFFBQVMsQ0FBQSxpQkFBVCxDQUEyQixRQUEzQixDQUE2QyxrREFDekMsUUFBUSxDQUFDLE9BQVQsQ0FBa0IsTUFBRCxFQUFXLHlCQUN4QixLQUFNLENBQUEsT0FBTywyQkFBRyxjQUFjLENBQUMsVUFBZixDQUEwQixNQUFNLENBQUMsT0FBakMsQ0FBMEMsTUFBMUMsQ0FBSCxDQUFiLENBRHdCLHlCQUV4QixRQUFRLENBQUMsT0FBVCxDQUFrQixPQUFELEVBQVksa0RBQ3pCLE9BQU8sQ0FBQyxTQUFSLENBQWtCLE9BQWxCLENBQTJCLFFBQUQsRUFBYSxrREFDbkMsR0FBSSxRQUFRLENBQUMsWUFBVCxHQUEwQixNQUFNLENBQUMsT0FBckMsQ0FBOEMscURBQzFDLFFBQVEsQ0FBQyxZQUFULENBQXdCLE9BQXhCLENBQ0gsQ0FGRCxpQ0FHSCxDQUpELEVBS0gsQ0FORCxFQUZ3Qix5QkFTeEIsTUFBTSxDQUFDLE9BQVAsQ0FBaUIsT0FBakIsQ0FDSCxDQVZELEVBRHlDLHlCQVl6QyxNQUFPLENBQUEsUUFBUCxDQUNILENBQ0osQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGFUeXBlRGVmYXVsdHMgfSBmcm9tIFwidHlwZW9ybS9kcml2ZXIvdHlwZXMvRGF0YVR5cGVEZWZhdWx0c1wiO1xuaW1wb3J0IHsgRGVmYXVsdE5hbWluZ1N0cmF0ZWd5IH0gZnJvbSBcInR5cGVvcm0vbmFtaW5nLXN0cmF0ZWd5L0RlZmF1bHROYW1pbmdTdHJhdGVneVwiO1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4vbW9kZWxzL0VudGl0eVwiO1xuaW1wb3J0IElHZW5lcmF0aW9uT3B0aW9ucyBmcm9tIFwiLi9JR2VuZXJhdGlvbk9wdGlvbnNcIjtcbmltcG9ydCAqIGFzIE5hbWluZ1N0cmF0ZWd5IGZyb20gXCIuL05hbWluZ1N0cmF0ZWd5XCI7XG5pbXBvcnQgKiBhcyBUb21nVXRpbHMgZnJvbSBcIi4vVXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbW9kZWxDdXN0b21pemF0aW9uUGhhc2UoXG4gICAgZGJNb2RlbDogRW50aXR5W10sXG4gICAgZ2VuZXJhdGlvbk9wdGlvbnM6IElHZW5lcmF0aW9uT3B0aW9ucyxcbiAgICBkZWZhdWx0VmFsdWVzOiBEYXRhVHlwZURlZmF1bHRzXG4pOiBFbnRpdHlbXSB7XG4gICAgY29uc3QgbmFtaW5nU3RyYXRlZ3k6IHR5cGVvZiBOYW1pbmdTdHJhdGVneSA9IHtcbiAgICAgICAgZW5hYmxlUGx1cmFsaXphdGlvbjogTmFtaW5nU3RyYXRlZ3kuZW5hYmxlUGx1cmFsaXphdGlvbixcbiAgICAgICAgY29sdW1uTmFtZTogTmFtaW5nU3RyYXRlZ3kuY29sdW1uTmFtZSxcbiAgICAgICAgZW50aXR5TmFtZTogTmFtaW5nU3RyYXRlZ3kuZW50aXR5TmFtZSxcbiAgICAgICAgcmVsYXRpb25JZE5hbWU6IE5hbWluZ1N0cmF0ZWd5LnJlbGF0aW9uSWROYW1lLFxuICAgICAgICByZWxhdGlvbk5hbWU6IE5hbWluZ1N0cmF0ZWd5LnJlbGF0aW9uTmFtZSxcbiAgICB9O1xuICAgIGlmIChcbiAgICAgICAgZ2VuZXJhdGlvbk9wdGlvbnMuY3VzdG9tTmFtaW5nU3RyYXRlZ3lQYXRoICYmXG4gICAgICAgIGdlbmVyYXRpb25PcHRpb25zLmN1c3RvbU5hbWluZ1N0cmF0ZWd5UGF0aCAhPT0gXCJcIlxuICAgICkge1xuICAgICAgICAvLyBUT0RPOiBjaGFuZ2UgZm9ybSBvZiBsb2dnaW5nXG4gICAgICAgIGNvbnN0IHJlcSA9IFRvbWdVdGlscy5yZXF1aXJlTG9jYWxGaWxlKFxuICAgICAgICAgICAgZ2VuZXJhdGlvbk9wdGlvbnMuY3VzdG9tTmFtaW5nU3RyYXRlZ3lQYXRoXG4gICAgICAgICkgYXMgUGFydGlhbDx0eXBlb2YgTmFtaW5nU3RyYXRlZ3k+O1xuICAgICAgICBpZiAocmVxLmNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBbJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfV0gVXNpbmcgY3VzdG9tIG5hbWluZyBzdHJhdGVneSBmb3IgY29sdW1uIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5jb2x1bW5OYW1lID0gcmVxLmNvbHVtbk5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIHN0YW5kYXJkIG5hbWluZyBzdHJhdGVneSBmb3IgY29sdW1uIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5lbnRpdHlOYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBuYW1pbmcgc3RyYXRlZ3kgZm9yIGVudGl0eSBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kuZW50aXR5TmFtZSA9IHJlcS5lbnRpdHlOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBzdGFuZGFyZCBuYW1pbmcgc3RyYXRlZ3kgZm9yIGVudGl0eSBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEucmVsYXRpb25JZE5hbWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBbJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfV0gVXNpbmcgY3VzdG9tIG5hbWluZyBzdHJhdGVneSBmb3IgcmVsYXRpb25JZCBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25JZE5hbWUgPSByZXEucmVsYXRpb25JZE5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIHN0YW5kYXJkIG5hbWluZyBzdHJhdGVneSBmb3IgcmVsYXRpb25JZCBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEucmVsYXRpb25OYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBuYW1pbmcgc3RyYXRlZ3kgZm9yIHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5yZWxhdGlvbk5hbWUgPSByZXEucmVsYXRpb25OYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBzdGFuZGFyZCBuYW1pbmcgc3RyYXRlZ3kgZm9yIHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5lbmFibGVQbHVyYWxpemF0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBwbHVyYWxpemF0aW9uIG1ldGhvZCBmb3IgT25lVG9NYW55LCBNYW55VG9NYW55IHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5lbmFibGVQbHVyYWxpemF0aW9uID0gcmVxLmVuYWJsZVBsdXJhbGl6YXRpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBwbHVyYWxpemF0aW9uIG1ldGhvZCBmb3IgT25lVG9NYW55LCBNYW55VG9NYW55IHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmFtaW5nU3RyYXRlZ3kuZW5hYmxlUGx1cmFsaXphdGlvbihnZW5lcmF0aW9uT3B0aW9ucy5wbHVyYWxpemVOYW1lcyk7XG4gICAgbGV0IHJldFZhbCA9IHJlbW92ZUluZGljZXNHZW5lcmF0ZWRCeVR5cGVvcm0oZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gcmVtb3ZlQ29sdW1uc0luUmVsYXRpb24oZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gYXBwbHlOYW1pbmdTdHJhdGVneShuYW1pbmdTdHJhdGVneSwgZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gYWRkSW1wb3J0c0FuZEdlbmVyYXRpb25PcHRpb25zKHJldFZhbCwgZ2VuZXJhdGlvbk9wdGlvbnMpO1xuICAgIHJldFZhbCA9IHJlbW92ZUNvbHVtbkRlZmF1bHRQcm9wZXJ0aWVzKHJldFZhbCwgZGVmYXVsdFZhbHVlcyk7XG4gICAgcmV0dXJuIHJldFZhbDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUluZGljZXNHZW5lcmF0ZWRCeVR5cGVvcm0oZGJNb2RlbDogRW50aXR5W10pOiBFbnRpdHlbXSB7XG4gICAgLy8gVE9ETzogU3VwcG9ydCB0eXBlb3JtIEN1c3RvbU5hbWluZ1N0cmF0ZWd5XG4gICAgY29uc3QgbmFtaW5nU3RyYXRlZ3kgPSBuZXcgRGVmYXVsdE5hbWluZ1N0cmF0ZWd5KCk7XG4gICAgZGJNb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgZW50aXR5LmluZGljZXMgPSBlbnRpdHkuaW5kaWNlcy5maWx0ZXIoXG4gICAgICAgICAgICAodikgPT5cbiAgICAgICAgICAgICAgICAhKFxuICAgICAgICAgICAgICAgICAgICB2Lm5hbWUuc3RhcnRzV2l0aChgc3FsaXRlX2F1dG9pbmRleF9gKSB8fFxuICAgICAgICAgICAgICAgICAgICAodi5wcmltYXJ5ICYmIHYubmFtZSA9PT0gXCJQUklNQVJZXCIpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBwcmltYXJ5Q29sdW1ucyA9IGVudGl0eS5jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKCh2KSA9PiB2LnByaW1hcnkpXG4gICAgICAgICAgICAubWFwKCh2KSA9PiB2LnRzY05hbWUpO1xuXG4gICAgICAgIGNvbnN0IG9ybVRhYmxlTmFtZSA9IGVudGl0eT8uc2NoZW1hXG4gICAgICAgICAgICA/IGAke2VudGl0eS5zY2hlbWF9LiR7ZW50aXR5LnRzY05hbWV9YFxuICAgICAgICAgICAgOiBlbnRpdHkudHNjTmFtZTtcblxuICAgICAgICBlbnRpdHkuaW5kaWNlcyA9IGVudGl0eS5pbmRpY2VzLmZpbHRlcihcbiAgICAgICAgICAgICh2KSA9PlxuICAgICAgICAgICAgICAgICEoXG4gICAgICAgICAgICAgICAgICAgIHYucHJpbWFyeSAmJlxuICAgICAgICAgICAgICAgICAgICB2Lm5hbWUgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5wcmltYXJ5S2V5TmFtZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcm1UYWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUNvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIGVudGl0eS5yZWxhdGlvbnNcbiAgICAgICAgICAgIC5maWx0ZXIoKHYpID0+IHYuam9pbkNvbHVtbk9wdGlvbnMpXG4gICAgICAgICAgICAuZm9yRWFjaCgocmVsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sdW1uTmFtZXMgPSByZWwuam9pbkNvbHVtbk9wdGlvbnMhLm1hcCgodikgPT4gdi5uYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZHhOYW1lID0gbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25Db25zdHJhaW50TmFtZShcbiAgICAgICAgICAgICAgICAgICAgb3JtVGFibGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmtOYW1lID0gbmFtaW5nU3RyYXRlZ3kuZm9yZWlnbktleU5hbWUoXG4gICAgICAgICAgICAgICAgICAgIG9ybVRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZXNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGVudGl0eS5pbmRpY2VzID0gZW50aXR5LmluZGljZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAodikgPT4gdi5uYW1lICE9PSBpZHhOYW1lICYmIHYubmFtZSAhPT0gZmtOYW1lXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRiTW9kZWw7XG59XG5mdW5jdGlvbiByZW1vdmVDb2x1bW5zSW5SZWxhdGlvbihkYk1vZGVsOiBFbnRpdHlbXSk6IEVudGl0eVtdIHtcbiAgICBkYk1vZGVsLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICBlbnRpdHkuY29sdW1ucyA9IGVudGl0eS5jb2x1bW5zLmZpbHRlcihcbiAgICAgICAgICAgIChjb2wpID0+XG4gICAgICAgICAgICAgICAgIWNvbC5pc1VzZWRJblJlbGF0aW9uQXNPd25lciB8fFxuICAgICAgICAgICAgICAgIGNvbC5pc1VzZWRJblJlbGF0aW9uQXNSZWZlcmVuY2VkIHx8XG4gICAgICAgICAgICAgICAgZW50aXR5LmluZGljZXMuc29tZSgoaWR4KSA9PlxuICAgICAgICAgICAgICAgICAgICBpZHguY29sdW1ucy5zb21lKCh2KSA9PiB2ID09PSBjb2wudHNjTmFtZSlcbiAgICAgICAgICAgICAgICApIHx8XG4gICAgICAgICAgICAgICAgY29sLnByaW1hcnlcbiAgICAgICAgKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGJNb2RlbDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUNvbHVtbkRlZmF1bHRQcm9wZXJ0aWVzKFxuICAgIGRiTW9kZWw6IEVudGl0eVtdLFxuICAgIGRlZmF1bHRWYWx1ZXM6IERhdGFUeXBlRGVmYXVsdHNcbik6IEVudGl0eVtdIHtcbiAgICBpZiAoIWRlZmF1bHRWYWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIGRiTW9kZWw7XG4gICAgfVxuICAgIGRiTW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgIGVudGl0eS5jb2x1bW5zLmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVmVmFsID0gZGVmYXVsdFZhbHVlc1tjb2x1bW4udHNjVHlwZV07XG4gICAgICAgICAgICBpZiAoZGVmVmFsKSB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgZGVmVmFsLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5sZW5ndGggPT09IGRlZlZhbC5sZW5ndGhcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMubGVuZ3RoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICBkZWZWYWwucHJlY2lzaW9uICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLnByZWNpc2lvbiA9PT0gZGVmVmFsLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5zY2FsZSAmJlxuICAgICAgICAgICAgICAgICAgICBkZWZWYWwuc2NhbGUgJiZcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMuc2NhbGUgPT09IGRlZlZhbC5zY2FsZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5wcmVjaXNpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLnNjYWxlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIGRlZlZhbC53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy53aWR0aCA9PT0gZGVmVmFsLndpZHRoXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLndpZHRoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRiTW9kZWw7XG59XG5cbmZ1bmN0aW9uIGZpbmRGaWxlSW1wb3J0cyhkYk1vZGVsOiBFbnRpdHlbXSkge1xuICAgIGRiTW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgIGVudGl0eS5yZWxhdGlvbnMuZm9yRWFjaCgocmVsYXRpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICByZWxhdGlvbi5yZWxhdGVkVGFibGUgIT09IGVudGl0eS50c2NOYW1lICYmXG4gICAgICAgICAgICAgICAgIWVudGl0eS5maWxlSW1wb3J0cy5zb21lKCh2KSA9PiB2ID09PSByZWxhdGlvbi5yZWxhdGVkVGFibGUpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkuZmlsZUltcG9ydHMucHVzaChyZWxhdGlvbi5yZWxhdGVkVGFibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGJNb2RlbDtcbn1cblxuZnVuY3Rpb24gYWRkSW1wb3J0c0FuZEdlbmVyYXRpb25PcHRpb25zKFxuICAgIGRiTW9kZWw6IEVudGl0eVtdLFxuICAgIGdlbmVyYXRpb25PcHRpb25zOiBJR2VuZXJhdGlvbk9wdGlvbnNcbik6IEVudGl0eVtdIHtcbiAgICBkYk1vZGVsID0gZmluZEZpbGVJbXBvcnRzKGRiTW9kZWwpO1xuICAgIGRiTW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgIGVudGl0eS5yZWxhdGlvbnMuZm9yRWFjaCgocmVsYXRpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChnZW5lcmF0aW9uT3B0aW9ucy5sYXp5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWxhdGlvbi5yZWxhdGlvbk9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpb24ucmVsYXRpb25PcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlbGF0aW9uLnJlbGF0aW9uT3B0aW9ucy5sYXp5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChnZW5lcmF0aW9uT3B0aW9ucy5za2lwU2NoZW1hKSB7XG4gICAgICAgICAgICBlbnRpdHkuc2NoZW1hID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZW50aXR5LmRhdGFiYXNlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZW5lcmF0aW9uT3B0aW9ucy5hY3RpdmVSZWNvcmQpIHtcbiAgICAgICAgICAgIGVudGl0eS5hY3RpdmVSZWNvcmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZW5lcmF0aW9uT3B0aW9ucy5nZW5lcmF0ZUNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICBlbnRpdHkuZ2VuZXJhdGVDb25zdHJ1Y3RvciA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGJNb2RlbDtcbn1cblxuZnVuY3Rpb24gYXBwbHlOYW1pbmdTdHJhdGVneShcbiAgICBuYW1pbmdTdHJhdGVneTogdHlwZW9mIE5hbWluZ1N0cmF0ZWd5LFxuICAgIGRiTW9kZWw6IEVudGl0eVtdXG4pOiBFbnRpdHlbXSB7XG4gICAgbGV0IHJldFZhbCA9IGNoYW5nZVJlbGF0aW9uTmFtZXMoZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gY2hhbmdlUmVsYXRpb25JZE5hbWVzKHJldFZhbCk7XG4gICAgcmV0VmFsID0gY2hhbmdlRW50aXR5TmFtZXMocmV0VmFsKTtcbiAgICByZXRWYWwgPSBjaGFuZ2VDb2x1bW5OYW1lcyhyZXRWYWwpO1xuICAgIHJldHVybiByZXRWYWw7XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VSZWxhdGlvbklkTmFtZXMobW9kZWw6IEVudGl0eVtdKTogRW50aXR5W10ge1xuICAgICAgICBtb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgICAgIGVudGl0eS5yZWxhdGlvbklkcy5mb3JFYWNoKChyZWxhdGlvbklkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkTmFtZSA9IHJlbGF0aW9uSWQuZmllbGROYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aW9uID0gZW50aXR5LnJlbGF0aW9ucy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAodikgPT4gdi5maWVsZE5hbWUgPT09IHJlbGF0aW9uSWQucmVsYXRpb25GaWVsZFxuICAgICAgICAgICAgICAgICkhO1xuICAgICAgICAgICAgICAgIGxldCBuZXdOYW1lID0gbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25JZE5hbWUoXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIG5ld05hbWUgPSBUb21nVXRpbHMuZmluZE5hbWVGb3JOZXdGaWVsZChcbiAgICAgICAgICAgICAgICAgICAgbmV3TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBvbGROYW1lXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBlbnRpdHkuaW5kaWNlcy5mb3JFYWNoKChpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpbmRleC5jb2x1bW5zID0gaW5kZXguY29sdW1ucy5tYXAoKGNvbHVtbjIpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4yID09PSBvbGROYW1lID8gbmV3TmFtZSA6IGNvbHVtbjJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlbGF0aW9uSWQuZmllbGROYW1lID0gbmV3TmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRiTW9kZWw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hhbmdlUmVsYXRpb25OYW1lcyhtb2RlbDogRW50aXR5W10pOiBFbnRpdHlbXSB7XG4gICAgICAgIG1vZGVsLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICAgICAgZW50aXR5LnJlbGF0aW9ucy5mb3JFYWNoKChyZWxhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZE5hbWUgPSByZWxhdGlvbi5maWVsZE5hbWU7XG4gICAgICAgICAgICAgICAgbGV0IG5ld05hbWUgPSBuYW1pbmdTdHJhdGVneS5yZWxhdGlvbk5hbWUocmVsYXRpb24sIGVudGl0eSk7XG4gICAgICAgICAgICAgICAgbmV3TmFtZSA9IFRvbWdVdGlscy5maW5kTmFtZUZvck5ld0ZpZWxkKFxuICAgICAgICAgICAgICAgICAgICBuZXdOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIG9sZE5hbWVcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRlZEVudGl0eSA9IG1vZGVsLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LnRzY05hbWUgPT09IHJlbGF0aW9uLnJlbGF0ZWRUYWJsZVxuICAgICAgICAgICAgICAgICkhO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aW9uMiA9IHJlbGF0ZWRFbnRpdHkucmVsYXRpb25zLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LmZpZWxkTmFtZSA9PT0gcmVsYXRpb24ucmVsYXRlZEZpZWxkXG4gICAgICAgICAgICAgICAgKSE7XG5cbiAgICAgICAgICAgICAgICBlbnRpdHkucmVsYXRpb25JZHNcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigodikgPT4gdi5yZWxhdGlvbkZpZWxkID09PSBvbGROYW1lKVxuICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdi5yZWxhdGlvbkZpZWxkID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZWxhdGlvbi5maWVsZE5hbWUgPSBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIHJlbGF0aW9uMi5yZWxhdGVkRmllbGQgPSBuZXdOYW1lO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aW9uLnJlbGF0aW9uT3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuaW5kaWNlcy5mb3JFYWNoKChpbmQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZC5jb2x1bW5zLm1hcCgoY29sdW1uMikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4yID09PSBvbGROYW1lID8gbmV3TmFtZSA6IGNvbHVtbjJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRiTW9kZWw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hhbmdlQ29sdW1uTmFtZXMobW9kZWw6IEVudGl0eVtdKTogRW50aXR5W10ge1xuICAgICAgICBtb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgICAgIGVudGl0eS5jb2x1bW5zLmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZE5hbWUgPSBjb2x1bW4udHNjTmFtZTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TmFtZSA9IG5hbWluZ1N0cmF0ZWd5LmNvbHVtbk5hbWUoY29sdW1uLnRzY05hbWUsIGNvbHVtbik7XG4gICAgICAgICAgICAgICAgbmV3TmFtZSA9IFRvbWdVdGlscy5maW5kTmFtZUZvck5ld0ZpZWxkKFxuICAgICAgICAgICAgICAgICAgICBuZXdOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIG9sZE5hbWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGVudGl0eS5pbmRpY2VzLmZvckVhY2goKGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4LmNvbHVtbnMgPSBpbmRleC5jb2x1bW5zLm1hcCgoY29sdW1uMikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjIgPT09IG9sZE5hbWUgPyBuZXdOYW1lIDogY29sdW1uMlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uLnRzY05hbWUgPSBuZXdOYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoYW5nZUVudGl0eU5hbWVzKGVudGl0aWVzOiBFbnRpdHlbXSk6IEVudGl0eVtdIHtcbiAgICAgICAgZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdOYW1lID0gbmFtaW5nU3RyYXRlZ3kuZW50aXR5TmFtZShlbnRpdHkudHNjTmFtZSwgZW50aXR5KTtcbiAgICAgICAgICAgIGVudGl0aWVzLmZvckVhY2goKGVudGl0eTIpID0+IHtcbiAgICAgICAgICAgICAgICBlbnRpdHkyLnJlbGF0aW9ucy5mb3JFYWNoKChyZWxhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVsYXRpb24ucmVsYXRlZFRhYmxlID09PSBlbnRpdHkudHNjTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb24ucmVsYXRlZFRhYmxlID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbnRpdHkudHNjTmFtZSA9IG5ld05hbWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZW50aXRpZXM7XG4gICAgfVxufVxuIl19