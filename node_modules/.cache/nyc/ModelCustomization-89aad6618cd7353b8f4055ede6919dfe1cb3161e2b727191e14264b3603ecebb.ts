"use strict";function cov_j0z60mfgv(){var path="/home/nemo/work/github/typeorm-model-generator/src/ModelCustomization.ts";var hash="95b9726dfb9b687e3167ed3c684682d26b5261ed";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/nemo/work/github/typeorm-model-generator/src/ModelCustomization.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:32},end:{line:3,column:88}},"2":{start:{line:4,column:23},end:{line:4,column:50}},"3":{start:{line:5,column:18},end:{line:5,column:36}},"4":{start:{line:7,column:27},end:{line:13,column:5}},"5":{start:{line:14,column:4},end:{line:53,column:5}},"6":{start:{line:17,column:20},end:{line:17,column:90}},"7":{start:{line:18,column:8},end:{line:24,column:9}},"8":{start:{line:19,column:12},end:{line:19,column:111}},"9":{start:{line:20,column:12},end:{line:20,column:55}},"10":{start:{line:23,column:12},end:{line:23,column:113}},"11":{start:{line:25,column:8},end:{line:31,column:9}},"12":{start:{line:26,column:12},end:{line:26,column:111}},"13":{start:{line:27,column:12},end:{line:27,column:55}},"14":{start:{line:30,column:12},end:{line:30,column:113}},"15":{start:{line:32,column:8},end:{line:38,column:9}},"16":{start:{line:33,column:12},end:{line:33,column:121}},"17":{start:{line:34,column:12},end:{line:34,column:63}},"18":{start:{line:37,column:12},end:{line:37,column:123}},"19":{start:{line:39,column:8},end:{line:45,column:9}},"20":{start:{line:40,column:12},end:{line:40,column:119}},"21":{start:{line:41,column:12},end:{line:41,column:59}},"22":{start:{line:44,column:12},end:{line:44,column:121}},"23":{start:{line:46,column:8},end:{line:52,column:9}},"24":{start:{line:47,column:12},end:{line:47,column:146}},"25":{start:{line:48,column:12},end:{line:48,column:73}},"26":{start:{line:51,column:12},end:{line:51,column:146}},"27":{start:{line:54,column:4},end:{line:54,column:73}},"28":{start:{line:55,column:17},end:{line:55,column:57}},"29":{start:{line:56,column:4},end:{line:56,column:46}},"30":{start:{line:57,column:4},end:{line:57,column:58}},"31":{start:{line:58,column:4},end:{line:58,column:71}},"32":{start:{line:59,column:4},end:{line:59,column:66}},"33":{start:{line:60,column:4},end:{line:60,column:18}},"34":{start:{line:62,column:0},end:{line:62,column:42}},"35":{start:{line:65,column:27},end:{line:65,column:78}},"36":{start:{line:66,column:4},end:{line:83,column:7}},"37":{start:{line:67,column:8},end:{line:68,column:50}},"38":{start:{line:67,column:54},end:{line:68,column:48}},"39":{start:{line:69,column:31},end:{line:71,column:34}},"40":{start:{line:70,column:27},end:{line:70,column:36}},"41":{start:{line:71,column:24},end:{line:71,column:33}},"42":{start:{line:72,column:8},end:{line:74,column:80}},"43":{start:{line:72,column:54},end:{line:74,column:78}},"44":{start:{line:75,column:8},end:{line:82,column:11}},"45":{start:{line:76,column:27},end:{line:76,column:46}},"46":{start:{line:78,column:32},end:{line:78,column:72}},"47":{start:{line:78,column:65},end:{line:78,column:71}},"48":{start:{line:79,column:28},end:{line:79,column:94}},"49":{start:{line:80,column:27},end:{line:80,column:85}},"50":{start:{line:81,column:12},end:{line:81,column:99}},"51":{start:{line:81,column:58},end:{line:81,column:97}},"52":{start:{line:84,column:4},end:{line:84,column:19}},"53":{start:{line:87,column:4},end:{line:92,column:7}},"54":{start:{line:88,column:8},end:{line:91,column:25}},"55":{start:{line:88,column:56},end:{line:91,column:23}},"56":{start:{line:90,column:41},end:{line:90,column:83}},"57":{start:{line:90,column:65},end:{line:90,column:82}},"58":{start:{line:93,column:4},end:{line:93,column:19}},"59":{start:{line:96,column:4},end:{line:98,column:5}},"60":{start:{line:97,column:8},end:{line:97,column:23}},"61":{start:{line:99,column:4},end:{line:124,column:7}},"62":{start:{line:100,column:8},end:{line:123,column:11}},"63":{start:{line:101,column:27},end:{line:101,column:56}},"64":{start:{line:102,column:12},end:{line:122,column:13}},"65":{start:{line:103,column:16},end:{line:107,column:17}},"66":{start:{line:106,column:20},end:{line:106,column:54}},"67":{start:{line:108,column:16},end:{line:116,column:17}},"68":{start:{line:114,column:20},end:{line:114,column:57}},"69":{start:{line:115,column:20},end:{line:115,column:53}},"70":{start:{line:117,column:16},end:{line:121,column:17}},"71":{start:{line:120,column:20},end:{line:120,column:53}},"72":{start:{line:125,column:4},end:{line:125,column:19}},"73":{start:{line:128,column:4},end:{line:135,column:7}},"74":{start:{line:129,column:8},end:{line:134,column:11}},"75":{start:{line:130,column:12},end:{line:133,column:13}},"76":{start:{line:131,column:48},end:{line:131,column:75}},"77":{start:{line:132,column:16},end:{line:132,column:63}},"78":{start:{line:136,column:4},end:{line:136,column:19}},"79":{start:{line:139,column:4},end:{line:139,column:39}},"80":{start:{line:140,column:4},end:{line:159,column:7}},"81":{start:{line:141,column:8},end:{line:148,column:11}},"82":{start:{line:142,column:12},end:{line:147,column:13}},"83":{start:{line:143,column:16},end:{line:145,column:17}},"84":{start:{line:144,column:20},end:{line:144,column:50}},"85":{start:{line:146,column:16},end:{line:146,column:53}},"86":{start:{line:149,column:8},end:{line:152,column:9}},"87":{start:{line:150,column:12},end:{line:150,column:38}},"88":{start:{line:151,column:12},end:{line:151,column:40}},"89":{start:{line:153,column:8},end:{line:155,column:9}},"90":{start:{line:154,column:12},end:{line:154,column:39}},"91":{start:{line:156,column:8},end:{line:158,column:9}},"92":{start:{line:157,column:12},end:{line:157,column:46}},"93":{start:{line:160,column:4},end:{line:160,column:19}},"94":{start:{line:163,column:17},end:{line:163,column:45}},"95":{start:{line:164,column:4},end:{line:164,column:43}},"96":{start:{line:165,column:4},end:{line:165,column:39}},"97":{start:{line:166,column:4},end:{line:166,column:39}},"98":{start:{line:167,column:4},end:{line:167,column:18}},"99":{start:{line:169,column:8},end:{line:180,column:11}},"100":{start:{line:170,column:12},end:{line:179,column:15}},"101":{start:{line:171,column:32},end:{line:171,column:52}},"102":{start:{line:172,column:33},end:{line:172,column:103}},"103":{start:{line:172,column:62},end:{line:172,column:102}},"104":{start:{line:173,column:30},end:{line:173,column:89}},"105":{start:{line:174,column:16},end:{line:174,column:82}},"106":{start:{line:175,column:16},end:{line:177,column:19}},"107":{start:{line:176,column:20},end:{line:176,column:108}},"108":{start:{line:176,column:67},end:{line:176,column:106}},"109":{start:{line:178,column:16},end:{line:178,column:47}},"110":{start:{line:181,column:8},end:{line:181,column:23}},"111":{start:{line:184,column:8},end:{line:204,column:11}},"112":{start:{line:185,column:12},end:{line:203,column:15}},"113":{start:{line:186,column:32},end:{line:186,column:50}},"114":{start:{line:187,column:30},end:{line:187,column:75}},"115":{start:{line:188,column:16},end:{line:188,column:82}},"116":{start:{line:189,column:38},end:{line:189,column:92}},"117":{start:{line:189,column:56},end:{line:189,column:91}},"118":{start:{line:190,column:34},end:{line:190,column:108}},"119":{start:{line:190,column:70},end:{line:190,column:107}},"120":{start:{line:191,column:16},end:{line:195,column:19}},"121":{start:{line:192,column:35},end:{line:192,column:62}},"122":{start:{line:194,column:20},end:{line:194,column:46}},"123":{start:{line:196,column:16},end:{line:196,column:45}},"124":{start:{line:197,column:16},end:{line:197,column:49}},"125":{start:{line:198,column:16},end:{line:202,column:17}},"126":{start:{line:199,column:20},end:{line:201,column:23}},"127":{start:{line:200,column:24},end:{line:200,column:94}},"128":{start:{line:200,column:53},end:{line:200,column:92}},"129":{start:{line:205,column:8},end:{line:205,column:23}},"130":{start:{line:208,column:8},end:{line:218,column:11}},"131":{start:{line:209,column:12},end:{line:217,column:15}},"132":{start:{line:210,column:32},end:{line:210,column:46}},"133":{start:{line:211,column:30},end:{line:211,column:79}},"134":{start:{line:212,column:16},end:{line:212,column:82}},"135":{start:{line:213,column:16},end:{line:215,column:19}},"136":{start:{line:214,column:20},end:{line:214,column:108}},"137":{start:{line:214,column:67},end:{line:214,column:106}},"138":{start:{line:216,column:16},end:{line:216,column:41}},"139":{start:{line:219,column:8},end:{line:219,column:21}},"140":{start:{line:222,column:8},end:{line:232,column:11}},"141":{start:{line:223,column:28},end:{line:223,column:77}},"142":{start:{line:224,column:12},end:{line:230,column:15}},"143":{start:{line:225,column:16},end:{line:229,column:19}},"144":{start:{line:226,column:20},end:{line:228,column:21}},"145":{start:{line:227,column:24},end:{line:227,column:56}},"146":{start:{line:231,column:12},end:{line:231,column:37}},"147":{start:{line:233,column:8},end:{line:233,column:24}}},fnMap:{"0":{name:"modelCustomizationPhase",decl:{start:{line:6,column:9},end:{line:6,column:32}},loc:{start:{line:6,column:76},end:{line:61,column:1}},line:6},"1":{name:"removeIndicesGeneratedByTypeorm",decl:{start:{line:63,column:9},end:{line:63,column:40}},loc:{start:{line:63,column:50},end:{line:85,column:1}},line:63},"2":{name:"(anonymous_2)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:83,column:5}},line:66},"3":{name:"(anonymous_3)",decl:{start:{line:67,column:47},end:{line:67,column:48}},loc:{start:{line:67,column:54},end:{line:68,column:48}},line:67},"4":{name:"(anonymous_4)",decl:{start:{line:70,column:20},end:{line:70,column:21}},loc:{start:{line:70,column:27},end:{line:70,column:36}},line:70},"5":{name:"(anonymous_5)",decl:{start:{line:71,column:17},end:{line:71,column:18}},loc:{start:{line:71,column:24},end:{line:71,column:33}},line:71},"6":{name:"(anonymous_6)",decl:{start:{line:72,column:47},end:{line:72,column:48}},loc:{start:{line:72,column:54},end:{line:74,column:78}},line:72},"7":{name:"(anonymous_7)",decl:{start:{line:76,column:20},end:{line:76,column:21}},loc:{start:{line:76,column:27},end:{line:76,column:46}},line:76},"8":{name:"(anonymous_8)",decl:{start:{line:77,column:21},end:{line:77,column:22}},loc:{start:{line:77,column:30},end:{line:82,column:9}},line:77},"9":{name:"(anonymous_9)",decl:{start:{line:78,column:58},end:{line:78,column:59}},loc:{start:{line:78,column:65},end:{line:78,column:71}},line:78},"10":{name:"(anonymous_10)",decl:{start:{line:81,column:51},end:{line:81,column:52}},loc:{start:{line:81,column:58},end:{line:81,column:97}},line:81},"11":{name:"removeColumnsInRelation",decl:{start:{line:86,column:9},end:{line:86,column:32}},loc:{start:{line:86,column:42},end:{line:94,column:1}},line:86},"12":{name:"(anonymous_12)",decl:{start:{line:87,column:20},end:{line:87,column:21}},loc:{start:{line:87,column:32},end:{line:92,column:5}},line:87},"13":{name:"(anonymous_13)",decl:{start:{line:88,column:47},end:{line:88,column:48}},loc:{start:{line:88,column:56},end:{line:91,column:23}},line:88},"14":{name:"(anonymous_14)",decl:{start:{line:90,column:32},end:{line:90,column:33}},loc:{start:{line:90,column:41},end:{line:90,column:83}},line:90},"15":{name:"(anonymous_15)",decl:{start:{line:90,column:58},end:{line:90,column:59}},loc:{start:{line:90,column:65},end:{line:90,column:82}},line:90},"16":{name:"removeColumnDefaultProperties",decl:{start:{line:95,column:9},end:{line:95,column:38}},loc:{start:{line:95,column:63},end:{line:126,column:1}},line:95},"17":{name:"(anonymous_17)",decl:{start:{line:99,column:20},end:{line:99,column:21}},loc:{start:{line:99,column:32},end:{line:124,column:5}},line:99},"18":{name:"(anonymous_18)",decl:{start:{line:100,column:31},end:{line:100,column:32}},loc:{start:{line:100,column:43},end:{line:123,column:9}},line:100},"19":{name:"findFileImports",decl:{start:{line:127,column:9},end:{line:127,column:24}},loc:{start:{line:127,column:34},end:{line:137,column:1}},line:127},"20":{name:"(anonymous_20)",decl:{start:{line:128,column:20},end:{line:128,column:21}},loc:{start:{line:128,column:32},end:{line:135,column:5}},line:128},"21":{name:"(anonymous_21)",decl:{start:{line:129,column:33},end:{line:129,column:34}},loc:{start:{line:129,column:47},end:{line:134,column:9}},line:129},"22":{name:"(anonymous_22)",decl:{start:{line:131,column:41},end:{line:131,column:42}},loc:{start:{line:131,column:48},end:{line:131,column:75}},line:131},"23":{name:"addImportsAndGenerationOptions",decl:{start:{line:138,column:9},end:{line:138,column:39}},loc:{start:{line:138,column:68},end:{line:161,column:1}},line:138},"24":{name:"(anonymous_24)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:32},end:{line:159,column:5}},line:140},"25":{name:"(anonymous_25)",decl:{start:{line:141,column:33},end:{line:141,column:34}},loc:{start:{line:141,column:47},end:{line:148,column:9}},line:141},"26":{name:"applyNamingStrategy",decl:{start:{line:162,column:9},end:{line:162,column:28}},loc:{start:{line:162,column:54},end:{line:235,column:1}},line:162},"27":{name:"changeRelationIdNames",decl:{start:{line:168,column:13},end:{line:168,column:34}},loc:{start:{line:168,column:42},end:{line:182,column:5}},line:168},"28":{name:"(anonymous_28)",decl:{start:{line:169,column:22},end:{line:169,column:23}},loc:{start:{line:169,column:34},end:{line:180,column:9}},line:169},"29":{name:"(anonymous_29)",decl:{start:{line:170,column:39},end:{line:170,column:40}},loc:{start:{line:170,column:55},end:{line:179,column:13}},line:170},"30":{name:"(anonymous_30)",decl:{start:{line:172,column:55},end:{line:172,column:56}},loc:{start:{line:172,column:62},end:{line:172,column:102}},line:172},"31":{name:"(anonymous_31)",decl:{start:{line:175,column:39},end:{line:175,column:40}},loc:{start:{line:175,column:50},end:{line:177,column:17}},line:175},"32":{name:"(anonymous_32)",decl:{start:{line:176,column:54},end:{line:176,column:55}},loc:{start:{line:176,column:67},end:{line:176,column:106}},line:176},"33":{name:"changeRelationNames",decl:{start:{line:183,column:13},end:{line:183,column:32}},loc:{start:{line:183,column:40},end:{line:206,column:5}},line:183},"34":{name:"(anonymous_34)",decl:{start:{line:184,column:22},end:{line:184,column:23}},loc:{start:{line:184,column:34},end:{line:204,column:9}},line:184},"35":{name:"(anonymous_35)",decl:{start:{line:185,column:37},end:{line:185,column:38}},loc:{start:{line:185,column:51},end:{line:203,column:13}},line:185},"36":{name:"(anonymous_36)",decl:{start:{line:189,column:49},end:{line:189,column:50}},loc:{start:{line:189,column:56},end:{line:189,column:91}},line:189},"37":{name:"(anonymous_37)",decl:{start:{line:190,column:63},end:{line:190,column:64}},loc:{start:{line:190,column:70},end:{line:190,column:107}},line:190},"38":{name:"(anonymous_38)",decl:{start:{line:192,column:28},end:{line:192,column:29}},loc:{start:{line:192,column:35},end:{line:192,column:62}},line:192},"39":{name:"(anonymous_39)",decl:{start:{line:193,column:29},end:{line:193,column:30}},loc:{start:{line:193,column:36},end:{line:195,column:17}},line:193},"40":{name:"(anonymous_40)",decl:{start:{line:199,column:43},end:{line:199,column:44}},loc:{start:{line:199,column:52},end:{line:201,column:21}},line:199},"41":{name:"(anonymous_41)",decl:{start:{line:200,column:40},end:{line:200,column:41}},loc:{start:{line:200,column:53},end:{line:200,column:92}},line:200},"42":{name:"changeColumnNames",decl:{start:{line:207,column:13},end:{line:207,column:30}},loc:{start:{line:207,column:38},end:{line:220,column:5}},line:207},"43":{name:"(anonymous_43)",decl:{start:{line:208,column:22},end:{line:208,column:23}},loc:{start:{line:208,column:34},end:{line:218,column:9}},line:208},"44":{name:"(anonymous_44)",decl:{start:{line:209,column:35},end:{line:209,column:36}},loc:{start:{line:209,column:47},end:{line:217,column:13}},line:209},"45":{name:"(anonymous_45)",decl:{start:{line:213,column:39},end:{line:213,column:40}},loc:{start:{line:213,column:50},end:{line:215,column:17}},line:213},"46":{name:"(anonymous_46)",decl:{start:{line:214,column:54},end:{line:214,column:55}},loc:{start:{line:214,column:67},end:{line:214,column:106}},line:214},"47":{name:"changeEntityNames",decl:{start:{line:221,column:13},end:{line:221,column:30}},loc:{start:{line:221,column:41},end:{line:234,column:5}},line:221},"48":{name:"(anonymous_48)",decl:{start:{line:222,column:25},end:{line:222,column:26}},loc:{start:{line:222,column:37},end:{line:232,column:9}},line:222},"49":{name:"(anonymous_49)",decl:{start:{line:224,column:29},end:{line:224,column:30}},loc:{start:{line:224,column:42},end:{line:230,column:13}},line:224},"50":{name:"(anonymous_50)",decl:{start:{line:225,column:42},end:{line:225,column:43}},loc:{start:{line:225,column:56},end:{line:229,column:17}},line:225}},branchMap:{"0":{loc:{start:{line:14,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:53,column:5}},{start:{line:14,column:4},end:{line:53,column:5}}],line:14},"1":{loc:{start:{line:14,column:8},end:{line:15,column:57}},type:"binary-expr",locations:[{start:{line:14,column:8},end:{line:14,column:50}},{start:{line:15,column:8},end:{line:15,column:57}}],line:14},"2":{loc:{start:{line:18,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:24,column:9}},{start:{line:18,column:8},end:{line:24,column:9}}],line:18},"3":{loc:{start:{line:25,column:8},end:{line:31,column:9}},type:"if",locations:[{start:{line:25,column:8},end:{line:31,column:9}},{start:{line:25,column:8},end:{line:31,column:9}}],line:25},"4":{loc:{start:{line:32,column:8},end:{line:38,column:9}},type:"if",locations:[{start:{line:32,column:8},end:{line:38,column:9}},{start:{line:32,column:8},end:{line:38,column:9}}],line:32},"5":{loc:{start:{line:39,column:8},end:{line:45,column:9}},type:"if",locations:[{start:{line:39,column:8},end:{line:45,column:9}},{start:{line:39,column:8},end:{line:45,column:9}}],line:39},"6":{loc:{start:{line:46,column:8},end:{line:52,column:9}},type:"if",locations:[{start:{line:46,column:8},end:{line:52,column:9}},{start:{line:46,column:8},end:{line:52,column:9}}],line:46},"7":{loc:{start:{line:67,column:56},end:{line:68,column:47}},type:"binary-expr",locations:[{start:{line:67,column:56},end:{line:67,column:94}},{start:{line:68,column:13},end:{line:68,column:22}},{start:{line:68,column:26},end:{line:68,column:46}}],line:67},"8":{loc:{start:{line:72,column:56},end:{line:74,column:77}},type:"binary-expr",locations:[{start:{line:72,column:56},end:{line:72,column:65}},{start:{line:73,column:12},end:{line:74,column:77}}],line:72},"9":{loc:{start:{line:81,column:58},end:{line:81,column:97}},type:"binary-expr",locations:[{start:{line:81,column:58},end:{line:81,column:76}},{start:{line:81,column:80},end:{line:81,column:97}}],line:81},"10":{loc:{start:{line:88,column:56},end:{line:91,column:23}},type:"binary-expr",locations:[{start:{line:88,column:56},end:{line:88,column:84}},{start:{line:89,column:12},end:{line:89,column:44}},{start:{line:90,column:12},end:{line:90,column:84}},{start:{line:91,column:12},end:{line:91,column:23}}],line:88},"11":{loc:{start:{line:96,column:4},end:{line:98,column:5}},type:"if",locations:[{start:{line:96,column:4},end:{line:98,column:5}},{start:{line:96,column:4},end:{line:98,column:5}}],line:96},"12":{loc:{start:{line:102,column:12},end:{line:122,column:13}},type:"if",locations:[{start:{line:102,column:12},end:{line:122,column:13}},{start:{line:102,column:12},end:{line:122,column:13}}],line:102},"13":{loc:{start:{line:103,column:16},end:{line:107,column:17}},type:"if",locations:[{start:{line:103,column:16},end:{line:107,column:17}},{start:{line:103,column:16},end:{line:107,column:17}}],line:103},"14":{loc:{start:{line:103,column:20},end:{line:105,column:59}},type:"binary-expr",locations:[{start:{line:103,column:20},end:{line:103,column:41}},{start:{line:104,column:20},end:{line:104,column:33}},{start:{line:105,column:20},end:{line:105,column:59}}],line:103},"15":{loc:{start:{line:108,column:16},end:{line:116,column:17}},type:"if",locations:[{start:{line:108,column:16},end:{line:116,column:17}},{start:{line:108,column:16},end:{line:116,column:17}}],line:108},"16":{loc:{start:{line:108,column:20},end:{line:113,column:57}},type:"binary-expr",locations:[{start:{line:108,column:20},end:{line:108,column:44}},{start:{line:109,column:20},end:{line:109,column:36}},{start:{line:110,column:20},end:{line:110,column:65}},{start:{line:111,column:20},end:{line:111,column:40}},{start:{line:112,column:20},end:{line:112,column:32}},{start:{line:113,column:20},end:{line:113,column:57}}],line:108},"17":{loc:{start:{line:117,column:16},end:{line:121,column:17}},type:"if",locations:[{start:{line:117,column:16},end:{line:121,column:17}},{start:{line:117,column:16},end:{line:121,column:17}}],line:117},"18":{loc:{start:{line:117,column:20},end:{line:119,column:57}},type:"binary-expr",locations:[{start:{line:117,column:20},end:{line:117,column:40}},{start:{line:118,column:20},end:{line:118,column:32}},{start:{line:119,column:20},end:{line:119,column:57}}],line:117},"19":{loc:{start:{line:130,column:12},end:{line:133,column:13}},type:"if",locations:[{start:{line:130,column:12},end:{line:133,column:13}},{start:{line:130,column:12},end:{line:133,column:13}}],line:130},"20":{loc:{start:{line:130,column:16},end:{line:131,column:76}},type:"binary-expr",locations:[{start:{line:130,column:16},end:{line:130,column:56}},{start:{line:131,column:16},end:{line:131,column:76}}],line:130},"21":{loc:{start:{line:142,column:12},end:{line:147,column:13}},type:"if",locations:[{start:{line:142,column:12},end:{line:147,column:13}},{start:{line:142,column:12},end:{line:147,column:13}}],line:142},"22":{loc:{start:{line:143,column:16},end:{line:145,column:17}},type:"if",locations:[{start:{line:143,column:16},end:{line:145,column:17}},{start:{line:143,column:16},end:{line:145,column:17}}],line:143},"23":{loc:{start:{line:149,column:8},end:{line:152,column:9}},type:"if",locations:[{start:{line:149,column:8},end:{line:152,column:9}},{start:{line:149,column:8},end:{line:152,column:9}}],line:149},"24":{loc:{start:{line:153,column:8},end:{line:155,column:9}},type:"if",locations:[{start:{line:153,column:8},end:{line:155,column:9}},{start:{line:153,column:8},end:{line:155,column:9}}],line:153},"25":{loc:{start:{line:156,column:8},end:{line:158,column:9}},type:"if",locations:[{start:{line:156,column:8},end:{line:158,column:9}},{start:{line:156,column:8},end:{line:158,column:9}}],line:156},"26":{loc:{start:{line:176,column:67},end:{line:176,column:106}},type:"cond-expr",locations:[{start:{line:176,column:89},end:{line:176,column:96}},{start:{line:176,column:99},end:{line:176,column:106}}],line:176},"27":{loc:{start:{line:198,column:16},end:{line:202,column:17}},type:"if",locations:[{start:{line:198,column:16},end:{line:202,column:17}},{start:{line:198,column:16},end:{line:202,column:17}}],line:198},"28":{loc:{start:{line:200,column:53},end:{line:200,column:92}},type:"cond-expr",locations:[{start:{line:200,column:75},end:{line:200,column:82}},{start:{line:200,column:85},end:{line:200,column:92}}],line:200},"29":{loc:{start:{line:214,column:67},end:{line:214,column:106}},type:"cond-expr",locations:[{start:{line:214,column:89},end:{line:214,column:96}},{start:{line:214,column:99},end:{line:214,column:106}}],line:214},"30":{loc:{start:{line:226,column:20},end:{line:228,column:21}},type:"if",locations:[{start:{line:226,column:20},end:{line:228,column:21}},{start:{line:226,column:20},end:{line:228,column:21}}],line:226}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0,0,0,0,0],"17":[0,0],"18":[0,0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0]},inputSourceMap:{version:3,file:"/home/nemo/work/github/typeorm-model-generator/src/ModelCustomization.ts",sources:["/home/nemo/work/github/typeorm-model-generator/src/ModelCustomization.ts"],names:[],mappings:"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",sourcesContent:["import { DataTypeDefaults } from \"typeorm/driver/types/DataTypeDefaults\";\nimport { DefaultNamingStrategy } from \"typeorm/naming-strategy/DefaultNamingStrategy\";\nimport { Entity } from \"./models/Entity\";\nimport IGenerationOptions from \"./IGenerationOptions\";\nimport * as NamingStrategy from \"./NamingStrategy\";\nimport * as TomgUtils from \"./Utils\";\n\nexport default function modelCustomizationPhase(\n    dbModel: Entity[],\n    generationOptions: IGenerationOptions,\n    defaultValues: DataTypeDefaults\n): Entity[] {\n    const namingStrategy: typeof NamingStrategy = {\n        enablePluralization: NamingStrategy.enablePluralization,\n        columnName: NamingStrategy.columnName,\n        entityName: NamingStrategy.entityName,\n        relationIdName: NamingStrategy.relationIdName,\n        relationName: NamingStrategy.relationName,\n    };\n    if (\n        generationOptions.customNamingStrategyPath &&\n        generationOptions.customNamingStrategyPath !== \"\"\n    ) {\n        // TODO: change form of logging\n        const req = TomgUtils.requireLocalFile(\n            generationOptions.customNamingStrategyPath\n        ) as Partial<typeof NamingStrategy>;\n        if (req.columnName) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom naming strategy for column names.`\n            );\n            namingStrategy.columnName = req.columnName;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using standard naming strategy for column names.`\n            );\n        }\n        if (req.entityName) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom naming strategy for entity names.`\n            );\n            namingStrategy.entityName = req.entityName;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using standard naming strategy for entity names.`\n            );\n        }\n        if (req.relationIdName) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom naming strategy for relationId field names.`\n            );\n            namingStrategy.relationIdName = req.relationIdName;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using standard naming strategy for relationId field names.`\n            );\n        }\n        if (req.relationName) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom naming strategy for relation field names.`\n            );\n            namingStrategy.relationName = req.relationName;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using standard naming strategy for relation field names.`\n            );\n        }\n        if (req.enablePluralization) {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom pluralization method for OneToMany, ManyToMany relation field names.`\n            );\n            namingStrategy.enablePluralization = req.enablePluralization;\n        } else {\n            console.log(\n                `[${new Date().toLocaleTimeString()}] Using custom pluralization method for OneToMany, ManyToMany relation field names.`\n            );\n        }\n    }\n    namingStrategy.enablePluralization(generationOptions.pluralizeNames);\n    let retVal = removeIndicesGeneratedByTypeorm(dbModel);\n    retVal = removeColumnsInRelation(dbModel);\n    retVal = applyNamingStrategy(namingStrategy, dbModel);\n    retVal = addImportsAndGenerationOptions(retVal, generationOptions);\n    retVal = removeColumnDefaultProperties(retVal, defaultValues);\n    return retVal;\n}\nfunction removeIndicesGeneratedByTypeorm(dbModel: Entity[]): Entity[] {\n    // TODO: Support typeorm CustomNamingStrategy\n    const namingStrategy = new DefaultNamingStrategy();\n    dbModel.forEach((entity) => {\n        entity.indices = entity.indices.filter(\n            (v) =>\n                !(\n                    v.name.startsWith(`sqlite_autoindex_`) ||\n                    (v.primary && v.name === \"PRIMARY\")\n                )\n        );\n        const primaryColumns = entity.columns\n            .filter((v) => v.primary)\n            .map((v) => v.tscName);\n        entity.indices = entity.indices.filter(\n            (v) =>\n                !(\n                    v.primary &&\n                    v.name ===\n                        namingStrategy.primaryKeyName(\n                            entity.tscName,\n                            primaryColumns\n                        )\n                )\n        );\n        entity.relations\n            .filter((v) => v.joinColumnOptions)\n            .forEach((rel) => {\n                const columnNames = rel.joinColumnOptions!.map((v) => v.name);\n                const idxName = namingStrategy.relationConstraintName(\n                    entity.tscName,\n                    columnNames\n                );\n                const fkName = namingStrategy.foreignKeyName(\n                    entity.tscName,\n                    columnNames\n                );\n                entity.indices = entity.indices.filter(\n                    (v) => v.name !== idxName && v.name !== fkName\n                );\n            });\n    });\n    return dbModel;\n}\nfunction removeColumnsInRelation(dbModel: Entity[]): Entity[] {\n    dbModel.forEach((entity) => {\n        entity.columns = entity.columns.filter(\n            (col) =>\n                !col.isUsedInRelationAsOwner ||\n                col.isUsedInRelationAsReferenced ||\n                entity.indices.some((idx) =>\n                    idx.columns.some((v) => v === col.tscName)\n                ) ||\n                col.primary\n        );\n    });\n    return dbModel;\n}\nfunction removeColumnDefaultProperties(\n    dbModel: Entity[],\n    defaultValues: DataTypeDefaults\n): Entity[] {\n    if (!defaultValues) {\n        return dbModel;\n    }\n    dbModel.forEach((entity) => {\n        entity.columns.forEach((column) => {\n            const defVal = defaultValues[column.tscType];\n            if (defVal) {\n                if (\n                    column.options.length &&\n                    defVal.length &&\n                    column.options.length === defVal.length\n                ) {\n                    column.options.length = undefined;\n                }\n                if (\n                    column.options.precision &&\n                    defVal.precision &&\n                    column.options.precision === defVal.precision &&\n                    column.options.scale &&\n                    defVal.scale &&\n                    column.options.scale === defVal.scale\n                ) {\n                    column.options.precision = undefined;\n                    column.options.scale = undefined;\n                }\n                if (\n                    column.options.width &&\n                    defVal.width &&\n                    column.options.width === defVal.width\n                ) {\n                    column.options.width = undefined;\n                }\n            }\n        });\n    });\n    return dbModel;\n}\n\nfunction findFileImports(dbModel: Entity[]) {\n    dbModel.forEach((entity) => {\n        entity.relations.forEach((relation) => {\n            if (\n                relation.relatedTable !== entity.tscName &&\n                !entity.fileImports.some((v) => v === relation.relatedTable)\n            ) {\n                entity.fileImports.push(relation.relatedTable);\n            }\n        });\n    });\n    return dbModel;\n}\n\nfunction addImportsAndGenerationOptions(\n    dbModel: Entity[],\n    generationOptions: IGenerationOptions\n): Entity[] {\n    dbModel = findFileImports(dbModel);\n    dbModel.forEach((entity) => {\n        entity.relations.forEach((relation) => {\n            if (generationOptions.lazy) {\n                if (!relation.relationOptions) {\n                    relation.relationOptions = {};\n                }\n                relation.relationOptions.lazy = true;\n            }\n        });\n        if (generationOptions.skipSchema) {\n            entity.schema = undefined;\n            entity.database = undefined;\n        }\n        if (generationOptions.activeRecord) {\n            entity.activeRecord = true;\n        }\n        if (generationOptions.generateConstructor) {\n            entity.generateConstructor = true;\n        }\n    });\n    return dbModel;\n}\n\nfunction applyNamingStrategy(\n    namingStrategy: typeof NamingStrategy,\n    dbModel: Entity[]\n): Entity[] {\n    let retVal = changeRelationNames(dbModel);\n    retVal = changeRelationIdNames(retVal);\n    retVal = changeEntityNames(retVal);\n    retVal = changeColumnNames(retVal);\n    return retVal;\n\n    function changeRelationIdNames(model: Entity[]): Entity[] {\n        model.forEach((entity) => {\n            entity.relationIds.forEach((relationId) => {\n                const oldName = relationId.fieldName;\n                const relation = entity.relations.find(\n                    (v) => v.fieldName === relationId.relationField\n                )!;\n                let newName = namingStrategy.relationIdName(\n                    relationId,\n                    relation,\n                    entity\n                );\n                newName = TomgUtils.findNameForNewField(\n                    newName,\n                    entity,\n                    oldName\n                );\n                entity.indices.forEach((index) => {\n                    index.columns = index.columns.map((column2) =>\n                        column2 === oldName ? newName : column2\n                    );\n                });\n\n                relationId.fieldName = newName;\n            });\n        });\n        return dbModel;\n    }\n\n    function changeRelationNames(model: Entity[]): Entity[] {\n        model.forEach((entity) => {\n            entity.relations.forEach((relation) => {\n                const oldName = relation.fieldName;\n                let newName = namingStrategy.relationName(relation, entity);\n                newName = TomgUtils.findNameForNewField(\n                    newName,\n                    entity,\n                    oldName\n                );\n\n                const relatedEntity = model.find(\n                    (v) => v.tscName === relation.relatedTable\n                )!;\n                const relation2 = relatedEntity.relations.find(\n                    (v) => v.fieldName === relation.relatedField\n                )!;\n\n                entity.relationIds\n                    .filter((v) => v.relationField === oldName)\n                    .forEach((v) => {\n                        v.relationField = newName;\n                    });\n\n                relation.fieldName = newName;\n                relation2.relatedField = newName;\n\n                if (relation.relationOptions) {\n                    entity.indices.forEach((ind) => {\n                        ind.columns.map((column2) =>\n                            column2 === oldName ? newName : column2\n                        );\n                    });\n                }\n            });\n        });\n        return dbModel;\n    }\n\n    function changeColumnNames(model: Entity[]): Entity[] {\n        model.forEach((entity) => {\n            entity.columns.forEach((column) => {\n                const oldName = column.tscName;\n                let newName = namingStrategy.columnName(column.tscName, column);\n                newName = TomgUtils.findNameForNewField(\n                    newName,\n                    entity,\n                    oldName\n                );\n                entity.indices.forEach((index) => {\n                    index.columns = index.columns.map((column2) =>\n                        column2 === oldName ? newName : column2\n                    );\n                });\n\n                column.tscName = newName;\n            });\n        });\n        return model;\n    }\n    function changeEntityNames(entities: Entity[]): Entity[] {\n        entities.forEach((entity) => {\n            const newName = namingStrategy.entityName(entity.tscName, entity);\n            entities.forEach((entity2) => {\n                entity2.relations.forEach((relation) => {\n                    if (relation.relatedTable === entity.tscName) {\n                        relation.relatedTable = newName;\n                    }\n                });\n            });\n            entity.tscName = newName;\n        });\n        return entities;\n    }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"95b9726dfb9b687e3167ed3c684682d26b5261ed"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_j0z60mfgv=function(){return actualCoverage;};return actualCoverage;}cov_j0z60mfgv();cov_j0z60mfgv().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const DefaultNamingStrategy_1=(cov_j0z60mfgv().s[1]++,require("typeorm/naming-strategy/DefaultNamingStrategy"));const NamingStrategy=(cov_j0z60mfgv().s[2]++,require("./NamingStrategy"));const TomgUtils=(cov_j0z60mfgv().s[3]++,require("./Utils"));function modelCustomizationPhase(dbModel,generationOptions,defaultValues){cov_j0z60mfgv().f[0]++;const namingStrategy=(cov_j0z60mfgv().s[4]++,{enablePluralization:NamingStrategy.enablePluralization,columnName:NamingStrategy.columnName,entityName:NamingStrategy.entityName,relationIdName:NamingStrategy.relationIdName,relationName:NamingStrategy.relationName});cov_j0z60mfgv().s[5]++;if((cov_j0z60mfgv().b[1][0]++,generationOptions.customNamingStrategyPath)&&(cov_j0z60mfgv().b[1][1]++,generationOptions.customNamingStrategyPath!=="")){cov_j0z60mfgv().b[0][0]++;// TODO: change form of logging
const req=(cov_j0z60mfgv().s[6]++,TomgUtils.requireLocalFile(generationOptions.customNamingStrategyPath));cov_j0z60mfgv().s[7]++;if(req.columnName){cov_j0z60mfgv().b[2][0]++;cov_j0z60mfgv().s[8]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom naming strategy for column names.`);cov_j0z60mfgv().s[9]++;namingStrategy.columnName=req.columnName;}else{cov_j0z60mfgv().b[2][1]++;cov_j0z60mfgv().s[10]++;console.log(`[${new Date().toLocaleTimeString()}] Using standard naming strategy for column names.`);}cov_j0z60mfgv().s[11]++;if(req.entityName){cov_j0z60mfgv().b[3][0]++;cov_j0z60mfgv().s[12]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom naming strategy for entity names.`);cov_j0z60mfgv().s[13]++;namingStrategy.entityName=req.entityName;}else{cov_j0z60mfgv().b[3][1]++;cov_j0z60mfgv().s[14]++;console.log(`[${new Date().toLocaleTimeString()}] Using standard naming strategy for entity names.`);}cov_j0z60mfgv().s[15]++;if(req.relationIdName){cov_j0z60mfgv().b[4][0]++;cov_j0z60mfgv().s[16]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom naming strategy for relationId field names.`);cov_j0z60mfgv().s[17]++;namingStrategy.relationIdName=req.relationIdName;}else{cov_j0z60mfgv().b[4][1]++;cov_j0z60mfgv().s[18]++;console.log(`[${new Date().toLocaleTimeString()}] Using standard naming strategy for relationId field names.`);}cov_j0z60mfgv().s[19]++;if(req.relationName){cov_j0z60mfgv().b[5][0]++;cov_j0z60mfgv().s[20]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom naming strategy for relation field names.`);cov_j0z60mfgv().s[21]++;namingStrategy.relationName=req.relationName;}else{cov_j0z60mfgv().b[5][1]++;cov_j0z60mfgv().s[22]++;console.log(`[${new Date().toLocaleTimeString()}] Using standard naming strategy for relation field names.`);}cov_j0z60mfgv().s[23]++;if(req.enablePluralization){cov_j0z60mfgv().b[6][0]++;cov_j0z60mfgv().s[24]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom pluralization method for OneToMany, ManyToMany relation field names.`);cov_j0z60mfgv().s[25]++;namingStrategy.enablePluralization=req.enablePluralization;}else{cov_j0z60mfgv().b[6][1]++;cov_j0z60mfgv().s[26]++;console.log(`[${new Date().toLocaleTimeString()}] Using custom pluralization method for OneToMany, ManyToMany relation field names.`);}}else{cov_j0z60mfgv().b[0][1]++;}cov_j0z60mfgv().s[27]++;namingStrategy.enablePluralization(generationOptions.pluralizeNames);let retVal=(cov_j0z60mfgv().s[28]++,removeIndicesGeneratedByTypeorm(dbModel));cov_j0z60mfgv().s[29]++;retVal=removeColumnsInRelation(dbModel);cov_j0z60mfgv().s[30]++;retVal=applyNamingStrategy(namingStrategy,dbModel);cov_j0z60mfgv().s[31]++;retVal=addImportsAndGenerationOptions(retVal,generationOptions);cov_j0z60mfgv().s[32]++;retVal=removeColumnDefaultProperties(retVal,defaultValues);cov_j0z60mfgv().s[33]++;return retVal;}cov_j0z60mfgv().s[34]++;exports.default=modelCustomizationPhase;function removeIndicesGeneratedByTypeorm(dbModel){cov_j0z60mfgv().f[1]++;// TODO: Support typeorm CustomNamingStrategy
const namingStrategy=(cov_j0z60mfgv().s[35]++,new DefaultNamingStrategy_1.DefaultNamingStrategy());cov_j0z60mfgv().s[36]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[2]++;cov_j0z60mfgv().s[37]++;entity.indices=entity.indices.filter(v=>{cov_j0z60mfgv().f[3]++;cov_j0z60mfgv().s[38]++;return!((cov_j0z60mfgv().b[7][0]++,v.name.startsWith(`sqlite_autoindex_`))||(cov_j0z60mfgv().b[7][1]++,v.primary)&&(cov_j0z60mfgv().b[7][2]++,v.name==="PRIMARY"));});const primaryColumns=(cov_j0z60mfgv().s[39]++,entity.columns.filter(v=>{cov_j0z60mfgv().f[4]++;cov_j0z60mfgv().s[40]++;return v.primary;}).map(v=>{cov_j0z60mfgv().f[5]++;cov_j0z60mfgv().s[41]++;return v.tscName;}));cov_j0z60mfgv().s[42]++;entity.indices=entity.indices.filter(v=>{cov_j0z60mfgv().f[6]++;cov_j0z60mfgv().s[43]++;return!((cov_j0z60mfgv().b[8][0]++,v.primary)&&(cov_j0z60mfgv().b[8][1]++,v.name===namingStrategy.primaryKeyName(entity.tscName,primaryColumns)));});cov_j0z60mfgv().s[44]++;entity.relations.filter(v=>{cov_j0z60mfgv().f[7]++;cov_j0z60mfgv().s[45]++;return v.joinColumnOptions;}).forEach(rel=>{cov_j0z60mfgv().f[8]++;const columnNames=(cov_j0z60mfgv().s[46]++,rel.joinColumnOptions.map(v=>{cov_j0z60mfgv().f[9]++;cov_j0z60mfgv().s[47]++;return v.name;}));const idxName=(cov_j0z60mfgv().s[48]++,namingStrategy.relationConstraintName(entity.tscName,columnNames));const fkName=(cov_j0z60mfgv().s[49]++,namingStrategy.foreignKeyName(entity.tscName,columnNames));cov_j0z60mfgv().s[50]++;entity.indices=entity.indices.filter(v=>{cov_j0z60mfgv().f[10]++;cov_j0z60mfgv().s[51]++;return(cov_j0z60mfgv().b[9][0]++,v.name!==idxName)&&(cov_j0z60mfgv().b[9][1]++,v.name!==fkName);});});});cov_j0z60mfgv().s[52]++;return dbModel;}function removeColumnsInRelation(dbModel){cov_j0z60mfgv().f[11]++;cov_j0z60mfgv().s[53]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[12]++;cov_j0z60mfgv().s[54]++;entity.columns=entity.columns.filter(col=>{cov_j0z60mfgv().f[13]++;cov_j0z60mfgv().s[55]++;return(cov_j0z60mfgv().b[10][0]++,!col.isUsedInRelationAsOwner)||(cov_j0z60mfgv().b[10][1]++,col.isUsedInRelationAsReferenced)||(cov_j0z60mfgv().b[10][2]++,entity.indices.some(idx=>{cov_j0z60mfgv().f[14]++;cov_j0z60mfgv().s[56]++;return idx.columns.some(v=>{cov_j0z60mfgv().f[15]++;cov_j0z60mfgv().s[57]++;return v===col.tscName;});}))||(cov_j0z60mfgv().b[10][3]++,col.primary);});});cov_j0z60mfgv().s[58]++;return dbModel;}function removeColumnDefaultProperties(dbModel,defaultValues){cov_j0z60mfgv().f[16]++;cov_j0z60mfgv().s[59]++;if(!defaultValues){cov_j0z60mfgv().b[11][0]++;cov_j0z60mfgv().s[60]++;return dbModel;}else{cov_j0z60mfgv().b[11][1]++;}cov_j0z60mfgv().s[61]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[17]++;cov_j0z60mfgv().s[62]++;entity.columns.forEach(column=>{cov_j0z60mfgv().f[18]++;const defVal=(cov_j0z60mfgv().s[63]++,defaultValues[column.tscType]);cov_j0z60mfgv().s[64]++;if(defVal){cov_j0z60mfgv().b[12][0]++;cov_j0z60mfgv().s[65]++;if((cov_j0z60mfgv().b[14][0]++,column.options.length)&&(cov_j0z60mfgv().b[14][1]++,defVal.length)&&(cov_j0z60mfgv().b[14][2]++,column.options.length===defVal.length)){cov_j0z60mfgv().b[13][0]++;cov_j0z60mfgv().s[66]++;column.options.length=undefined;}else{cov_j0z60mfgv().b[13][1]++;}cov_j0z60mfgv().s[67]++;if((cov_j0z60mfgv().b[16][0]++,column.options.precision)&&(cov_j0z60mfgv().b[16][1]++,defVal.precision)&&(cov_j0z60mfgv().b[16][2]++,column.options.precision===defVal.precision)&&(cov_j0z60mfgv().b[16][3]++,column.options.scale)&&(cov_j0z60mfgv().b[16][4]++,defVal.scale)&&(cov_j0z60mfgv().b[16][5]++,column.options.scale===defVal.scale)){cov_j0z60mfgv().b[15][0]++;cov_j0z60mfgv().s[68]++;column.options.precision=undefined;cov_j0z60mfgv().s[69]++;column.options.scale=undefined;}else{cov_j0z60mfgv().b[15][1]++;}cov_j0z60mfgv().s[70]++;if((cov_j0z60mfgv().b[18][0]++,column.options.width)&&(cov_j0z60mfgv().b[18][1]++,defVal.width)&&(cov_j0z60mfgv().b[18][2]++,column.options.width===defVal.width)){cov_j0z60mfgv().b[17][0]++;cov_j0z60mfgv().s[71]++;column.options.width=undefined;}else{cov_j0z60mfgv().b[17][1]++;}}else{cov_j0z60mfgv().b[12][1]++;}});});cov_j0z60mfgv().s[72]++;return dbModel;}function findFileImports(dbModel){cov_j0z60mfgv().f[19]++;cov_j0z60mfgv().s[73]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[20]++;cov_j0z60mfgv().s[74]++;entity.relations.forEach(relation=>{cov_j0z60mfgv().f[21]++;cov_j0z60mfgv().s[75]++;if((cov_j0z60mfgv().b[20][0]++,relation.relatedTable!==entity.tscName)&&(cov_j0z60mfgv().b[20][1]++,!entity.fileImports.some(v=>{cov_j0z60mfgv().f[22]++;cov_j0z60mfgv().s[76]++;return v===relation.relatedTable;}))){cov_j0z60mfgv().b[19][0]++;cov_j0z60mfgv().s[77]++;entity.fileImports.push(relation.relatedTable);}else{cov_j0z60mfgv().b[19][1]++;}});});cov_j0z60mfgv().s[78]++;return dbModel;}function addImportsAndGenerationOptions(dbModel,generationOptions){cov_j0z60mfgv().f[23]++;cov_j0z60mfgv().s[79]++;dbModel=findFileImports(dbModel);cov_j0z60mfgv().s[80]++;dbModel.forEach(entity=>{cov_j0z60mfgv().f[24]++;cov_j0z60mfgv().s[81]++;entity.relations.forEach(relation=>{cov_j0z60mfgv().f[25]++;cov_j0z60mfgv().s[82]++;if(generationOptions.lazy){cov_j0z60mfgv().b[21][0]++;cov_j0z60mfgv().s[83]++;if(!relation.relationOptions){cov_j0z60mfgv().b[22][0]++;cov_j0z60mfgv().s[84]++;relation.relationOptions={};}else{cov_j0z60mfgv().b[22][1]++;}cov_j0z60mfgv().s[85]++;relation.relationOptions.lazy=true;}else{cov_j0z60mfgv().b[21][1]++;}});cov_j0z60mfgv().s[86]++;if(generationOptions.skipSchema){cov_j0z60mfgv().b[23][0]++;cov_j0z60mfgv().s[87]++;entity.schema=undefined;cov_j0z60mfgv().s[88]++;entity.database=undefined;}else{cov_j0z60mfgv().b[23][1]++;}cov_j0z60mfgv().s[89]++;if(generationOptions.activeRecord){cov_j0z60mfgv().b[24][0]++;cov_j0z60mfgv().s[90]++;entity.activeRecord=true;}else{cov_j0z60mfgv().b[24][1]++;}cov_j0z60mfgv().s[91]++;if(generationOptions.generateConstructor){cov_j0z60mfgv().b[25][0]++;cov_j0z60mfgv().s[92]++;entity.generateConstructor=true;}else{cov_j0z60mfgv().b[25][1]++;}});cov_j0z60mfgv().s[93]++;return dbModel;}function applyNamingStrategy(namingStrategy,dbModel){cov_j0z60mfgv().f[26]++;let retVal=(cov_j0z60mfgv().s[94]++,changeRelationNames(dbModel));cov_j0z60mfgv().s[95]++;retVal=changeRelationIdNames(retVal);cov_j0z60mfgv().s[96]++;retVal=changeEntityNames(retVal);cov_j0z60mfgv().s[97]++;retVal=changeColumnNames(retVal);cov_j0z60mfgv().s[98]++;return retVal;function changeRelationIdNames(model){cov_j0z60mfgv().f[27]++;cov_j0z60mfgv().s[99]++;model.forEach(entity=>{cov_j0z60mfgv().f[28]++;cov_j0z60mfgv().s[100]++;entity.relationIds.forEach(relationId=>{cov_j0z60mfgv().f[29]++;const oldName=(cov_j0z60mfgv().s[101]++,relationId.fieldName);const relation=(cov_j0z60mfgv().s[102]++,entity.relations.find(v=>{cov_j0z60mfgv().f[30]++;cov_j0z60mfgv().s[103]++;return v.fieldName===relationId.relationField;}));let newName=(cov_j0z60mfgv().s[104]++,namingStrategy.relationIdName(relationId,relation,entity));cov_j0z60mfgv().s[105]++;newName=TomgUtils.findNameForNewField(newName,entity,oldName);cov_j0z60mfgv().s[106]++;entity.indices.forEach(index=>{cov_j0z60mfgv().f[31]++;cov_j0z60mfgv().s[107]++;index.columns=index.columns.map(column2=>{cov_j0z60mfgv().f[32]++;cov_j0z60mfgv().s[108]++;return column2===oldName?(cov_j0z60mfgv().b[26][0]++,newName):(cov_j0z60mfgv().b[26][1]++,column2);});});cov_j0z60mfgv().s[109]++;relationId.fieldName=newName;});});cov_j0z60mfgv().s[110]++;return dbModel;}function changeRelationNames(model){cov_j0z60mfgv().f[33]++;cov_j0z60mfgv().s[111]++;model.forEach(entity=>{cov_j0z60mfgv().f[34]++;cov_j0z60mfgv().s[112]++;entity.relations.forEach(relation=>{cov_j0z60mfgv().f[35]++;const oldName=(cov_j0z60mfgv().s[113]++,relation.fieldName);let newName=(cov_j0z60mfgv().s[114]++,namingStrategy.relationName(relation,entity));cov_j0z60mfgv().s[115]++;newName=TomgUtils.findNameForNewField(newName,entity,oldName);const relatedEntity=(cov_j0z60mfgv().s[116]++,model.find(v=>{cov_j0z60mfgv().f[36]++;cov_j0z60mfgv().s[117]++;return v.tscName===relation.relatedTable;}));const relation2=(cov_j0z60mfgv().s[118]++,relatedEntity.relations.find(v=>{cov_j0z60mfgv().f[37]++;cov_j0z60mfgv().s[119]++;return v.fieldName===relation.relatedField;}));cov_j0z60mfgv().s[120]++;entity.relationIds.filter(v=>{cov_j0z60mfgv().f[38]++;cov_j0z60mfgv().s[121]++;return v.relationField===oldName;}).forEach(v=>{cov_j0z60mfgv().f[39]++;cov_j0z60mfgv().s[122]++;v.relationField=newName;});cov_j0z60mfgv().s[123]++;relation.fieldName=newName;cov_j0z60mfgv().s[124]++;relation2.relatedField=newName;cov_j0z60mfgv().s[125]++;if(relation.relationOptions){cov_j0z60mfgv().b[27][0]++;cov_j0z60mfgv().s[126]++;entity.indices.forEach(ind=>{cov_j0z60mfgv().f[40]++;cov_j0z60mfgv().s[127]++;ind.columns.map(column2=>{cov_j0z60mfgv().f[41]++;cov_j0z60mfgv().s[128]++;return column2===oldName?(cov_j0z60mfgv().b[28][0]++,newName):(cov_j0z60mfgv().b[28][1]++,column2);});});}else{cov_j0z60mfgv().b[27][1]++;}});});cov_j0z60mfgv().s[129]++;return dbModel;}function changeColumnNames(model){cov_j0z60mfgv().f[42]++;cov_j0z60mfgv().s[130]++;model.forEach(entity=>{cov_j0z60mfgv().f[43]++;cov_j0z60mfgv().s[131]++;entity.columns.forEach(column=>{cov_j0z60mfgv().f[44]++;const oldName=(cov_j0z60mfgv().s[132]++,column.tscName);let newName=(cov_j0z60mfgv().s[133]++,namingStrategy.columnName(column.tscName,column));cov_j0z60mfgv().s[134]++;newName=TomgUtils.findNameForNewField(newName,entity,oldName);cov_j0z60mfgv().s[135]++;entity.indices.forEach(index=>{cov_j0z60mfgv().f[45]++;cov_j0z60mfgv().s[136]++;index.columns=index.columns.map(column2=>{cov_j0z60mfgv().f[46]++;cov_j0z60mfgv().s[137]++;return column2===oldName?(cov_j0z60mfgv().b[29][0]++,newName):(cov_j0z60mfgv().b[29][1]++,column2);});});cov_j0z60mfgv().s[138]++;column.tscName=newName;});});cov_j0z60mfgv().s[139]++;return model;}function changeEntityNames(entities){cov_j0z60mfgv().f[47]++;cov_j0z60mfgv().s[140]++;entities.forEach(entity=>{cov_j0z60mfgv().f[48]++;const newName=(cov_j0z60mfgv().s[141]++,namingStrategy.entityName(entity.tscName,entity));cov_j0z60mfgv().s[142]++;entities.forEach(entity2=>{cov_j0z60mfgv().f[49]++;cov_j0z60mfgv().s[143]++;entity2.relations.forEach(relation=>{cov_j0z60mfgv().f[50]++;cov_j0z60mfgv().s[144]++;if(relation.relatedTable===entity.tscName){cov_j0z60mfgv().b[30][0]++;cov_j0z60mfgv().s[145]++;relation.relatedTable=newName;}else{cov_j0z60mfgv().b[30][1]++;}});});cov_j0z60mfgv().s[146]++;entity.tscName=newName;});cov_j0z60mfgv().s[147]++;return entities;}}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvbmVtby93b3JrL2dpdGh1Yi90eXBlb3JtLW1vZGVsLWdlbmVyYXRvci9zcmMvTW9kZWxDdXN0b21pemF0aW9uLnRzIiwic291cmNlcyI6WyIvaG9tZS9uZW1vL3dvcmsvZ2l0aHViL3R5cGVvcm0tbW9kZWwtZ2VuZXJhdG9yL3NyYy9Nb2RlbEN1c3RvbWl6YXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSx5RkFBc0Y7QUFHdEYsbURBQW1EO0FBQ25ELHFDQUFxQztBQUVyQyxTQUF3Qix1QkFBdUIsQ0FDM0MsT0FBaUIsRUFDakIsaUJBQXFDLEVBQ3JDLGFBQStCO0lBRS9CLE1BQU0sY0FBYyxHQUEwQjtRQUMxQyxtQkFBbUIsRUFBRSxjQUFjLENBQUMsbUJBQW1CO1FBQ3ZELFVBQVUsRUFBRSxjQUFjLENBQUMsVUFBVTtRQUNyQyxVQUFVLEVBQUUsY0FBYyxDQUFDLFVBQVU7UUFDckMsY0FBYyxFQUFFLGNBQWMsQ0FBQyxjQUFjO1FBQzdDLFlBQVksRUFBRSxjQUFjLENBQUMsWUFBWTtLQUM1QyxDQUFDO0lBQ0YsSUFDSSxpQkFBaUIsQ0FBQyx3QkFBd0I7UUFDMUMsaUJBQWlCLENBQUMsd0JBQXdCLEtBQUssRUFBRSxFQUNuRDtRQUNFLCtCQUErQjtRQUMvQixNQUFNLEdBQUcsR0FBRyxTQUFTLENBQUMsZ0JBQWdCLENBQ2xDLGlCQUFpQixDQUFDLHdCQUF3QixDQUNYLENBQUM7UUFDcEMsSUFBSSxHQUFHLENBQUMsVUFBVSxFQUFFO1lBQ2hCLE9BQU8sQ0FBQyxHQUFHLENBQ1AsSUFBSSxJQUFJLElBQUksRUFBRSxDQUFDLGtCQUFrQixFQUFFLGtEQUFrRCxDQUN4RixDQUFDO1lBQ0YsY0FBYyxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDO1NBQzlDO2FBQU07WUFDSCxPQUFPLENBQUMsR0FBRyxDQUNQLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxvREFBb0QsQ0FDMUYsQ0FBQztTQUNM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QUcsY0FBYyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ2xFLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtnQkFDekIsT0FBTyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtvQkFDbkMsSUFBSSxRQUFRLENBQUMsWUFBWSxLQUFLLE1BQU0sQ0FBQyxPQUFPLEVBQUU7d0JBQzFDLFFBQVEsQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDO3FCQUNuQztnQkFDTCxDQUFDLENBQUMsQ0FBQztZQUNQLENBQUMsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLFFBQVEsQ0FBQztJQUNwQixDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGFUeXBlRGVmYXVsdHMgfSBmcm9tIFwidHlwZW9ybS9kcml2ZXIvdHlwZXMvRGF0YVR5cGVEZWZhdWx0c1wiO1xuaW1wb3J0IHsgRGVmYXVsdE5hbWluZ1N0cmF0ZWd5IH0gZnJvbSBcInR5cGVvcm0vbmFtaW5nLXN0cmF0ZWd5L0RlZmF1bHROYW1pbmdTdHJhdGVneVwiO1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4vbW9kZWxzL0VudGl0eVwiO1xuaW1wb3J0IElHZW5lcmF0aW9uT3B0aW9ucyBmcm9tIFwiLi9JR2VuZXJhdGlvbk9wdGlvbnNcIjtcbmltcG9ydCAqIGFzIE5hbWluZ1N0cmF0ZWd5IGZyb20gXCIuL05hbWluZ1N0cmF0ZWd5XCI7XG5pbXBvcnQgKiBhcyBUb21nVXRpbHMgZnJvbSBcIi4vVXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbW9kZWxDdXN0b21pemF0aW9uUGhhc2UoXG4gICAgZGJNb2RlbDogRW50aXR5W10sXG4gICAgZ2VuZXJhdGlvbk9wdGlvbnM6IElHZW5lcmF0aW9uT3B0aW9ucyxcbiAgICBkZWZhdWx0VmFsdWVzOiBEYXRhVHlwZURlZmF1bHRzXG4pOiBFbnRpdHlbXSB7XG4gICAgY29uc3QgbmFtaW5nU3RyYXRlZ3k6IHR5cGVvZiBOYW1pbmdTdHJhdGVneSA9IHtcbiAgICAgICAgZW5hYmxlUGx1cmFsaXphdGlvbjogTmFtaW5nU3RyYXRlZ3kuZW5hYmxlUGx1cmFsaXphdGlvbixcbiAgICAgICAgY29sdW1uTmFtZTogTmFtaW5nU3RyYXRlZ3kuY29sdW1uTmFtZSxcbiAgICAgICAgZW50aXR5TmFtZTogTmFtaW5nU3RyYXRlZ3kuZW50aXR5TmFtZSxcbiAgICAgICAgcmVsYXRpb25JZE5hbWU6IE5hbWluZ1N0cmF0ZWd5LnJlbGF0aW9uSWROYW1lLFxuICAgICAgICByZWxhdGlvbk5hbWU6IE5hbWluZ1N0cmF0ZWd5LnJlbGF0aW9uTmFtZSxcbiAgICB9O1xuICAgIGlmIChcbiAgICAgICAgZ2VuZXJhdGlvbk9wdGlvbnMuY3VzdG9tTmFtaW5nU3RyYXRlZ3lQYXRoICYmXG4gICAgICAgIGdlbmVyYXRpb25PcHRpb25zLmN1c3RvbU5hbWluZ1N0cmF0ZWd5UGF0aCAhPT0gXCJcIlxuICAgICkge1xuICAgICAgICAvLyBUT0RPOiBjaGFuZ2UgZm9ybSBvZiBsb2dnaW5nXG4gICAgICAgIGNvbnN0IHJlcSA9IFRvbWdVdGlscy5yZXF1aXJlTG9jYWxGaWxlKFxuICAgICAgICAgICAgZ2VuZXJhdGlvbk9wdGlvbnMuY3VzdG9tTmFtaW5nU3RyYXRlZ3lQYXRoXG4gICAgICAgICkgYXMgUGFydGlhbDx0eXBlb2YgTmFtaW5nU3RyYXRlZ3k+O1xuICAgICAgICBpZiAocmVxLmNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBbJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfV0gVXNpbmcgY3VzdG9tIG5hbWluZyBzdHJhdGVneSBmb3IgY29sdW1uIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5jb2x1bW5OYW1lID0gcmVxLmNvbHVtbk5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIHN0YW5kYXJkIG5hbWluZyBzdHJhdGVneSBmb3IgY29sdW1uIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5lbnRpdHlOYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBuYW1pbmcgc3RyYXRlZ3kgZm9yIGVudGl0eSBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kuZW50aXR5TmFtZSA9IHJlcS5lbnRpdHlOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBzdGFuZGFyZCBuYW1pbmcgc3RyYXRlZ3kgZm9yIGVudGl0eSBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEucmVsYXRpb25JZE5hbWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBbJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfV0gVXNpbmcgY3VzdG9tIG5hbWluZyBzdHJhdGVneSBmb3IgcmVsYXRpb25JZCBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25JZE5hbWUgPSByZXEucmVsYXRpb25JZE5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIHN0YW5kYXJkIG5hbWluZyBzdHJhdGVneSBmb3IgcmVsYXRpb25JZCBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEucmVsYXRpb25OYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBuYW1pbmcgc3RyYXRlZ3kgZm9yIHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5yZWxhdGlvbk5hbWUgPSByZXEucmVsYXRpb25OYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBzdGFuZGFyZCBuYW1pbmcgc3RyYXRlZ3kgZm9yIHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5lbmFibGVQbHVyYWxpemF0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBwbHVyYWxpemF0aW9uIG1ldGhvZCBmb3IgT25lVG9NYW55LCBNYW55VG9NYW55IHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5lbmFibGVQbHVyYWxpemF0aW9uID0gcmVxLmVuYWJsZVBsdXJhbGl6YXRpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBwbHVyYWxpemF0aW9uIG1ldGhvZCBmb3IgT25lVG9NYW55LCBNYW55VG9NYW55IHJlbGF0aW9uIGZpZWxkIG5hbWVzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmFtaW5nU3RyYXRlZ3kuZW5hYmxlUGx1cmFsaXphdGlvbihnZW5lcmF0aW9uT3B0aW9ucy5wbHVyYWxpemVOYW1lcyk7XG4gICAgbGV0IHJldFZhbCA9IHJlbW92ZUluZGljZXNHZW5lcmF0ZWRCeVR5cGVvcm0oZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gcmVtb3ZlQ29sdW1uc0luUmVsYXRpb24oZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gYXBwbHlOYW1pbmdTdHJhdGVneShuYW1pbmdTdHJhdGVneSwgZGJNb2RlbCk7XG4gICAgcmV0VmFsID0gYWRkSW1wb3J0c0FuZEdlbmVyYXRpb25PcHRpb25zKHJldFZhbCwgZ2VuZXJhdGlvbk9wdGlvbnMpO1xuICAgIHJldFZhbCA9IHJlbW92ZUNvbHVtbkRlZmF1bHRQcm9wZXJ0aWVzKHJldFZhbCwgZGVmYXVsdFZhbHVlcyk7XG4gICAgcmV0dXJuIHJldFZhbDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUluZGljZXNHZW5lcmF0ZWRCeVR5cGVvcm0oZGJNb2RlbDogRW50aXR5W10pOiBFbnRpdHlbXSB7XG4gICAgLy8gVE9ETzogU3VwcG9ydCB0eXBlb3JtIEN1c3RvbU5hbWluZ1N0cmF0ZWd5XG4gICAgY29uc3QgbmFtaW5nU3RyYXRlZ3kgPSBuZXcgRGVmYXVsdE5hbWluZ1N0cmF0ZWd5KCk7XG4gICAgZGJNb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgZW50aXR5LmluZGljZXMgPSBlbnRpdHkuaW5kaWNlcy5maWx0ZXIoXG4gICAgICAgICAgICAodikgPT5cbiAgICAgICAgICAgICAgICAhKFxuICAgICAgICAgICAgICAgICAgICB2Lm5hbWUuc3RhcnRzV2l0aChgc3FsaXRlX2F1dG9pbmRleF9gKSB8fFxuICAgICAgICAgICAgICAgICAgICAodi5wcmltYXJ5ICYmIHYubmFtZSA9PT0gXCJQUklNQVJZXCIpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBwcmltYXJ5Q29sdW1ucyA9IGVudGl0eS5jb2x1bW5zXG4gICAgICAgICAgICAuZmlsdGVyKCh2KSA9PiB2LnByaW1hcnkpXG4gICAgICAgICAgICAubWFwKCh2KSA9PiB2LnRzY05hbWUpO1xuICAgICAgICBlbnRpdHkuaW5kaWNlcyA9IGVudGl0eS5pbmRpY2VzLmZpbHRlcihcbiAgICAgICAgICAgICh2KSA9PlxuICAgICAgICAgICAgICAgICEoXG4gICAgICAgICAgICAgICAgICAgIHYucHJpbWFyeSAmJlxuICAgICAgICAgICAgICAgICAgICB2Lm5hbWUgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1pbmdTdHJhdGVneS5wcmltYXJ5S2V5TmFtZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkudHNjTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltYXJ5Q29sdW1uc1xuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgZW50aXR5LnJlbGF0aW9uc1xuICAgICAgICAgICAgLmZpbHRlcigodikgPT4gdi5qb2luQ29sdW1uT3B0aW9ucylcbiAgICAgICAgICAgIC5mb3JFYWNoKChyZWwpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2x1bW5OYW1lcyA9IHJlbC5qb2luQ29sdW1uT3B0aW9ucyEubWFwKCh2KSA9PiB2Lm5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkeE5hbWUgPSBuYW1pbmdTdHJhdGVneS5yZWxhdGlvbkNvbnN0cmFpbnROYW1lKFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkudHNjTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZXNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZrTmFtZSA9IG5hbWluZ1N0cmF0ZWd5LmZvcmVpZ25LZXlOYW1lKFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkudHNjTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZXNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGVudGl0eS5pbmRpY2VzID0gZW50aXR5LmluZGljZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAodikgPT4gdi5uYW1lICE9PSBpZHhOYW1lICYmIHYubmFtZSAhPT0gZmtOYW1lXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBkYk1vZGVsO1xufVxuZnVuY3Rpb24gcmVtb3ZlQ29sdW1uc0luUmVsYXRpb24oZGJNb2RlbDogRW50aXR5W10pOiBFbnRpdHlbXSB7XG4gICAgZGJNb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgZW50aXR5LmNvbHVtbnMgPSBlbnRpdHkuY29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAoY29sKSA9PlxuICAgICAgICAgICAgICAgICFjb2wuaXNVc2VkSW5SZWxhdGlvbkFzT3duZXIgfHxcbiAgICAgICAgICAgICAgICBjb2wuaXNVc2VkSW5SZWxhdGlvbkFzUmVmZXJlbmNlZCB8fFxuICAgICAgICAgICAgICAgIGVudGl0eS5pbmRpY2VzLnNvbWUoKGlkeCkgPT5cbiAgICAgICAgICAgICAgICAgICAgaWR4LmNvbHVtbnMuc29tZSgodikgPT4gdiA9PT0gY29sLnRzY05hbWUpXG4gICAgICAgICAgICAgICAgKSB8fFxuICAgICAgICAgICAgICAgIGNvbC5wcmltYXJ5XG4gICAgICAgICk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRiTW9kZWw7XG59XG5mdW5jdGlvbiByZW1vdmVDb2x1bW5EZWZhdWx0UHJvcGVydGllcyhcbiAgICBkYk1vZGVsOiBFbnRpdHlbXSxcbiAgICBkZWZhdWx0VmFsdWVzOiBEYXRhVHlwZURlZmF1bHRzXG4pOiBFbnRpdHlbXSB7XG4gICAgaWYgKCFkZWZhdWx0VmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBkYk1vZGVsO1xuICAgIH1cbiAgICBkYk1vZGVsLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICBlbnRpdHkuY29sdW1ucy5mb3JFYWNoKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlZlZhbCA9IGRlZmF1bHRWYWx1ZXNbY29sdW1uLnRzY1R5cGVdO1xuICAgICAgICAgICAgaWYgKGRlZlZhbCkge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgIGRlZlZhbC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMubGVuZ3RoID09PSBkZWZWYWwubGVuZ3RoXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLmxlbmd0aCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5wcmVjaXNpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgZGVmVmFsLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5wcmVjaXNpb24gPT09IGRlZlZhbC5wcmVjaXNpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMuc2NhbGUgJiZcbiAgICAgICAgICAgICAgICAgICAgZGVmVmFsLnNjYWxlICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLnNjYWxlID09PSBkZWZWYWwuc2NhbGVcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMucHJlY2lzaW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5zY2FsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBkZWZWYWwud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMud2lkdGggPT09IGRlZlZhbC53aWR0aFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy53aWR0aCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBkYk1vZGVsO1xufVxuXG5mdW5jdGlvbiBmaW5kRmlsZUltcG9ydHMoZGJNb2RlbDogRW50aXR5W10pIHtcbiAgICBkYk1vZGVsLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICBlbnRpdHkucmVsYXRpb25zLmZvckVhY2goKHJlbGF0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgcmVsYXRpb24ucmVsYXRlZFRhYmxlICE9PSBlbnRpdHkudHNjTmFtZSAmJlxuICAgICAgICAgICAgICAgICFlbnRpdHkuZmlsZUltcG9ydHMuc29tZSgodikgPT4gdiA9PT0gcmVsYXRpb24ucmVsYXRlZFRhYmxlKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5LmZpbGVJbXBvcnRzLnB1c2gocmVsYXRpb24ucmVsYXRlZFRhYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRiTW9kZWw7XG59XG5cbmZ1bmN0aW9uIGFkZEltcG9ydHNBbmRHZW5lcmF0aW9uT3B0aW9ucyhcbiAgICBkYk1vZGVsOiBFbnRpdHlbXSxcbiAgICBnZW5lcmF0aW9uT3B0aW9uczogSUdlbmVyYXRpb25PcHRpb25zXG4pOiBFbnRpdHlbXSB7XG4gICAgZGJNb2RlbCA9IGZpbmRGaWxlSW1wb3J0cyhkYk1vZGVsKTtcbiAgICBkYk1vZGVsLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICBlbnRpdHkucmVsYXRpb25zLmZvckVhY2goKHJlbGF0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoZ2VuZXJhdGlvbk9wdGlvbnMubGF6eSkge1xuICAgICAgICAgICAgICAgIGlmICghcmVsYXRpb24ucmVsYXRpb25PcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uLnJlbGF0aW9uT3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWxhdGlvbi5yZWxhdGlvbk9wdGlvbnMubGF6eSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZ2VuZXJhdGlvbk9wdGlvbnMuc2tpcFNjaGVtYSkge1xuICAgICAgICAgICAgZW50aXR5LnNjaGVtYSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGVudGl0eS5kYXRhYmFzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2VuZXJhdGlvbk9wdGlvbnMuYWN0aXZlUmVjb3JkKSB7XG4gICAgICAgICAgICBlbnRpdHkuYWN0aXZlUmVjb3JkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2VuZXJhdGlvbk9wdGlvbnMuZ2VuZXJhdGVDb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgZW50aXR5LmdlbmVyYXRlQ29uc3RydWN0b3IgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRiTW9kZWw7XG59XG5cbmZ1bmN0aW9uIGFwcGx5TmFtaW5nU3RyYXRlZ3koXG4gICAgbmFtaW5nU3RyYXRlZ3k6IHR5cGVvZiBOYW1pbmdTdHJhdGVneSxcbiAgICBkYk1vZGVsOiBFbnRpdHlbXVxuKTogRW50aXR5W10ge1xuICAgIGxldCByZXRWYWwgPSBjaGFuZ2VSZWxhdGlvbk5hbWVzKGRiTW9kZWwpO1xuICAgIHJldFZhbCA9IGNoYW5nZVJlbGF0aW9uSWROYW1lcyhyZXRWYWwpO1xuICAgIHJldFZhbCA9IGNoYW5nZUVudGl0eU5hbWVzKHJldFZhbCk7XG4gICAgcmV0VmFsID0gY2hhbmdlQ29sdW1uTmFtZXMocmV0VmFsKTtcbiAgICByZXR1cm4gcmV0VmFsO1xuXG4gICAgZnVuY3Rpb24gY2hhbmdlUmVsYXRpb25JZE5hbWVzKG1vZGVsOiBFbnRpdHlbXSk6IEVudGl0eVtdIHtcbiAgICAgICAgbW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgICAgICBlbnRpdHkucmVsYXRpb25JZHMuZm9yRWFjaCgocmVsYXRpb25JZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZE5hbWUgPSByZWxhdGlvbklkLmZpZWxkTmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGlvbiA9IGVudGl0eS5yZWxhdGlvbnMuZmluZChcbiAgICAgICAgICAgICAgICAgICAgKHYpID0+IHYuZmllbGROYW1lID09PSByZWxhdGlvbklkLnJlbGF0aW9uRmllbGRcbiAgICAgICAgICAgICAgICApITtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TmFtZSA9IG5hbWluZ1N0cmF0ZWd5LnJlbGF0aW9uSWROYW1lKFxuICAgICAgICAgICAgICAgICAgICByZWxhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICByZWxhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBuZXdOYW1lID0gVG9tZ1V0aWxzLmZpbmROYW1lRm9yTmV3RmllbGQoXG4gICAgICAgICAgICAgICAgICAgIG5ld05hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgb2xkTmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZW50aXR5LmluZGljZXMuZm9yRWFjaCgoaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXguY29sdW1ucyA9IGluZGV4LmNvbHVtbnMubWFwKChjb2x1bW4yKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uMiA9PT0gb2xkTmFtZSA/IG5ld05hbWUgOiBjb2x1bW4yXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZWxhdGlvbklkLmZpZWxkTmFtZSA9IG5ld05hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkYk1vZGVsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZVJlbGF0aW9uTmFtZXMobW9kZWw6IEVudGl0eVtdKTogRW50aXR5W10ge1xuICAgICAgICBtb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgICAgIGVudGl0eS5yZWxhdGlvbnMuZm9yRWFjaCgocmVsYXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGROYW1lID0gcmVsYXRpb24uZmllbGROYW1lO1xuICAgICAgICAgICAgICAgIGxldCBuZXdOYW1lID0gbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25OYW1lKHJlbGF0aW9uLCBlbnRpdHkpO1xuICAgICAgICAgICAgICAgIG5ld05hbWUgPSBUb21nVXRpbHMuZmluZE5hbWVGb3JOZXdGaWVsZChcbiAgICAgICAgICAgICAgICAgICAgbmV3TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBvbGROYW1lXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0ZWRFbnRpdHkgPSBtb2RlbC5maW5kKFxuICAgICAgICAgICAgICAgICAgICAodikgPT4gdi50c2NOYW1lID09PSByZWxhdGlvbi5yZWxhdGVkVGFibGVcbiAgICAgICAgICAgICAgICApITtcbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGlvbjIgPSByZWxhdGVkRW50aXR5LnJlbGF0aW9ucy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAodikgPT4gdi5maWVsZE5hbWUgPT09IHJlbGF0aW9uLnJlbGF0ZWRGaWVsZFxuICAgICAgICAgICAgICAgICkhO1xuXG4gICAgICAgICAgICAgICAgZW50aXR5LnJlbGF0aW9uSWRzXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKHYpID0+IHYucmVsYXRpb25GaWVsZCA9PT0gb2xkTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goKHYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYucmVsYXRpb25GaWVsZCA9IG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmVsYXRpb24uZmllbGROYW1lID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICByZWxhdGlvbjIucmVsYXRlZEZpZWxkID0gbmV3TmFtZTtcblxuICAgICAgICAgICAgICAgIGlmIChyZWxhdGlvbi5yZWxhdGlvbk9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LmluZGljZXMuZm9yRWFjaCgoaW5kKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmQuY29sdW1ucy5tYXAoKGNvbHVtbjIpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uMiA9PT0gb2xkTmFtZSA/IG5ld05hbWUgOiBjb2x1bW4yXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkYk1vZGVsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZUNvbHVtbk5hbWVzKG1vZGVsOiBFbnRpdHlbXSk6IEVudGl0eVtdIHtcbiAgICAgICAgbW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgICAgICBlbnRpdHkuY29sdW1ucy5mb3JFYWNoKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGROYW1lID0gY29sdW1uLnRzY05hbWU7XG4gICAgICAgICAgICAgICAgbGV0IG5ld05hbWUgPSBuYW1pbmdTdHJhdGVneS5jb2x1bW5OYW1lKGNvbHVtbi50c2NOYW1lLCBjb2x1bW4pO1xuICAgICAgICAgICAgICAgIG5ld05hbWUgPSBUb21nVXRpbHMuZmluZE5hbWVGb3JOZXdGaWVsZChcbiAgICAgICAgICAgICAgICAgICAgbmV3TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBvbGROYW1lXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBlbnRpdHkuaW5kaWNlcy5mb3JFYWNoKChpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpbmRleC5jb2x1bW5zID0gaW5kZXguY29sdW1ucy5tYXAoKGNvbHVtbjIpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4yID09PSBvbGROYW1lID8gbmV3TmFtZSA6IGNvbHVtbjJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbi50c2NOYW1lID0gbmV3TmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGFuZ2VFbnRpdHlOYW1lcyhlbnRpdGllczogRW50aXR5W10pOiBFbnRpdHlbXSB7XG4gICAgICAgIGVudGl0aWVzLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3TmFtZSA9IG5hbWluZ1N0cmF0ZWd5LmVudGl0eU5hbWUoZW50aXR5LnRzY05hbWUsIGVudGl0eSk7XG4gICAgICAgICAgICBlbnRpdGllcy5mb3JFYWNoKChlbnRpdHkyKSA9PiB7XG4gICAgICAgICAgICAgICAgZW50aXR5Mi5yZWxhdGlvbnMuZm9yRWFjaCgocmVsYXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbGF0aW9uLnJlbGF0ZWRUYWJsZSA9PT0gZW50aXR5LnRzY05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uLnJlbGF0ZWRUYWJsZSA9IG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZW50aXR5LnRzY05hbWUgPSBuZXdOYW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGVudGl0aWVzO1xuICAgIH1cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL25lbW8vd29yay9naXRodWIvdHlwZW9ybS1tb2RlbC1nZW5lcmF0b3Ivc3JjL01vZGVsQ3VzdG9taXphdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoidTI5Q0FDQSxLQUFBLENBQUEsdUJBQUEseUJBQUEsT0FBQSxDQUFBLCtDQUFBLENBQUEsQ0FBQSxDQUdBLEtBQUEsQ0FBQSxjQUFBLHlCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsU0FBQSx5QkFBQSxPQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FFQSxRQUF3QixDQUFBLHVCQUF4QixDQUNJLE9BREosQ0FFSSxpQkFGSixDQUdJLGFBSEosQ0FHbUMsd0JBRS9CLEtBQU0sQ0FBQSxjQUFjLHlCQUEwQixDQUMxQyxtQkFBbUIsQ0FBRSxjQUFjLENBQUMsbUJBRE0sQ0FFMUMsVUFBVSxDQUFFLGNBQWMsQ0FBQyxVQUZlLENBRzFDLFVBQVUsQ0FBRSxjQUFjLENBQUMsVUFIZSxDQUkxQyxjQUFjLENBQUUsY0FBYyxDQUFDLGNBSlcsQ0FLMUMsWUFBWSxDQUFFLGNBQWMsQ0FBQyxZQUxhLENBQTFCLENBQXBCLENBRitCLHVCQVMvQixHQUNJLDJCQUFBLGlCQUFpQixDQUFDLHdCQUFsQiw4QkFDQSxpQkFBaUIsQ0FBQyx3QkFBbEIsR0FBK0MsRUFEL0MsQ0FESixDQUdFLDJCQUNFO0FBQ0EsS0FBTSxDQUFBLEdBQUcseUJBQUcsU0FBUyxDQUFDLGdCQUFWLENBQ1IsaUJBQWlCLENBQUMsd0JBRFYsQ0FBSCxDQUFULENBRkYsdUJBS0UsR0FBSSxHQUFHLENBQUMsVUFBUixDQUFvQixrREFDaEIsT0FBTyxDQUFDLEdBQVIsQ0FDSSxJQUFJLEdBQUksQ0FBQSxJQUFKLEdBQVcsa0JBQVgsRUFBK0Isa0RBRHZDLEVBRGdCLHVCQUloQixjQUFjLENBQUMsVUFBZixDQUE0QixHQUFHLENBQUMsVUFBaEMsQ0FDSCxDQUxELElBS08sbURBQ0gsT0FBTyxDQUFD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LE9BQXRCLDhCQUFnQyxPQUFoQyxFQUF1QyxDQUQzQixDQUFoQixDQUdILENBSkQsRUFSOEIseUJBYzlCLE1BQU0sQ0FBQyxPQUFQLENBQWlCLE9BQWpCLENBQ0gsQ0FmRCxFQWdCSCxDQWpCRCxFQURzQyx5QkFtQnRDLE1BQU8sQ0FBQSxLQUFQLENBQ0gsQ0FDRCxRQUFTLENBQUEsaUJBQVQsQ0FBMkIsUUFBM0IsQ0FBNkMsa0RBQ3pDLFFBQVEsQ0FBQyxPQUFULENBQWtCLE1BQUQsRUFBVyx5QkFDeEIsS0FBTSxDQUFBLE9BQU8sMkJBQUcsY0FBYyxDQUFDLFVBQWYsQ0FBMEIsTUFBTSxDQUFDLE9BQWpDLENBQTBDLE1BQTFDLENBQUgsQ0FBYixDQUR3Qix5QkFFeEIsUUFBUSxDQUFDLE9BQVQsQ0FBa0IsT0FBRCxFQUFZLGtEQUN6QixPQUFPLENBQUMsU0FBUixDQUFrQixPQUFsQixDQUEyQixRQUFELEVBQWEsa0RBQ25DLEdBQUksUUFBUSxDQUFDLFlBQVQsR0FBMEIsTUFBTSxDQUFDLE9BQXJDLENBQThDLHFEQUMxQyxRQUFRLENBQUMsWUFBVCxDQUF3QixPQUF4QixDQUNILENBRkQsaUNBR0gsQ0FKRCxFQUtILENBTkQsRUFGd0IseUJBU3hCLE1BQU0sQ0FBQyxPQUFQLENBQWlCLE9BQWpCLENBQ0gsQ0FWRCxFQUR5Qyx5QkFZekMsTUFBTyxDQUFBLFFBQVAsQ0FDSCxDQUNKLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRhVHlwZURlZmF1bHRzIH0gZnJvbSBcInR5cGVvcm0vZHJpdmVyL3R5cGVzL0RhdGFUeXBlRGVmYXVsdHNcIjtcbmltcG9ydCB7IERlZmF1bHROYW1pbmdTdHJhdGVneSB9IGZyb20gXCJ0eXBlb3JtL25hbWluZy1zdHJhdGVneS9EZWZhdWx0TmFtaW5nU3RyYXRlZ3lcIjtcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuL21vZGVscy9FbnRpdHlcIjtcbmltcG9ydCBJR2VuZXJhdGlvbk9wdGlvbnMgZnJvbSBcIi4vSUdlbmVyYXRpb25PcHRpb25zXCI7XG5pbXBvcnQgKiBhcyBOYW1pbmdTdHJhdGVneSBmcm9tIFwiLi9OYW1pbmdTdHJhdGVneVwiO1xuaW1wb3J0ICogYXMgVG9tZ1V0aWxzIGZyb20gXCIuL1V0aWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1vZGVsQ3VzdG9taXphdGlvblBoYXNlKFxuICAgIGRiTW9kZWw6IEVudGl0eVtdLFxuICAgIGdlbmVyYXRpb25PcHRpb25zOiBJR2VuZXJhdGlvbk9wdGlvbnMsXG4gICAgZGVmYXVsdFZhbHVlczogRGF0YVR5cGVEZWZhdWx0c1xuKTogRW50aXR5W10ge1xuICAgIGNvbnN0IG5hbWluZ1N0cmF0ZWd5OiB0eXBlb2YgTmFtaW5nU3RyYXRlZ3kgPSB7XG4gICAgICAgIGVuYWJsZVBsdXJhbGl6YXRpb246IE5hbWluZ1N0cmF0ZWd5LmVuYWJsZVBsdXJhbGl6YXRpb24sXG4gICAgICAgIGNvbHVtbk5hbWU6IE5hbWluZ1N0cmF0ZWd5LmNvbHVtbk5hbWUsXG4gICAgICAgIGVudGl0eU5hbWU6IE5hbWluZ1N0cmF0ZWd5LmVudGl0eU5hbWUsXG4gICAgICAgIHJlbGF0aW9uSWROYW1lOiBOYW1pbmdTdHJhdGVneS5yZWxhdGlvbklkTmFtZSxcbiAgICAgICAgcmVsYXRpb25OYW1lOiBOYW1pbmdTdHJhdGVneS5yZWxhdGlvbk5hbWUsXG4gICAgfTtcbiAgICBpZiAoXG4gICAgICAgIGdlbmVyYXRpb25PcHRpb25zLmN1c3RvbU5hbWluZ1N0cmF0ZWd5UGF0aCAmJlxuICAgICAgICBnZW5lcmF0aW9uT3B0aW9ucy5jdXN0b21OYW1pbmdTdHJhdGVneVBhdGggIT09IFwiXCJcbiAgICApIHtcbiAgICAgICAgLy8gVE9ETzogY2hhbmdlIGZvcm0gb2YgbG9nZ2luZ1xuICAgICAgICBjb25zdCByZXEgPSBUb21nVXRpbHMucmVxdWlyZUxvY2FsRmlsZShcbiAgICAgICAgICAgIGdlbmVyYXRpb25PcHRpb25zLmN1c3RvbU5hbWluZ1N0cmF0ZWd5UGF0aFxuICAgICAgICApIGFzIFBhcnRpYWw8dHlwZW9mIE5hbWluZ1N0cmF0ZWd5PjtcbiAgICAgICAgaWYgKHJlcS5jb2x1bW5OYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBuYW1pbmcgc3RyYXRlZ3kgZm9yIGNvbHVtbiBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kuY29sdW1uTmFtZSA9IHJlcS5jb2x1bW5OYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBzdGFuZGFyZCBuYW1pbmcgc3RyYXRlZ3kgZm9yIGNvbHVtbiBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEuZW50aXR5TmFtZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBjdXN0b20gbmFtaW5nIHN0cmF0ZWd5IGZvciBlbnRpdHkgbmFtZXMuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5hbWluZ1N0cmF0ZWd5LmVudGl0eU5hbWUgPSByZXEuZW50aXR5TmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBbJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfV0gVXNpbmcgc3RhbmRhcmQgbmFtaW5nIHN0cmF0ZWd5IGZvciBlbnRpdHkgbmFtZXMuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVxLnJlbGF0aW9uSWROYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dIFVzaW5nIGN1c3RvbSBuYW1pbmcgc3RyYXRlZ3kgZm9yIHJlbGF0aW9uSWQgZmllbGQgbmFtZXMuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5hbWluZ1N0cmF0ZWd5LnJlbGF0aW9uSWROYW1lID0gcmVxLnJlbGF0aW9uSWROYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBzdGFuZGFyZCBuYW1pbmcgc3RyYXRlZ3kgZm9yIHJlbGF0aW9uSWQgZmllbGQgbmFtZXMuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVxLnJlbGF0aW9uTmFtZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBjdXN0b20gbmFtaW5nIHN0cmF0ZWd5IGZvciByZWxhdGlvbiBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25OYW1lID0gcmVxLnJlbGF0aW9uTmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGBbJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfV0gVXNpbmcgc3RhbmRhcmQgbmFtaW5nIHN0cmF0ZWd5IGZvciByZWxhdGlvbiBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEuZW5hYmxlUGx1cmFsaXphdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBjdXN0b20gcGx1cmFsaXphdGlvbiBtZXRob2QgZm9yIE9uZVRvTWFueSwgTWFueVRvTWFueSByZWxhdGlvbiBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kuZW5hYmxlUGx1cmFsaXphdGlvbiA9IHJlcS5lbmFibGVQbHVyYWxpemF0aW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgYFske25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XSBVc2luZyBjdXN0b20gcGx1cmFsaXphdGlvbiBtZXRob2QgZm9yIE9uZVRvTWFueSwgTWFueVRvTWFueSByZWxhdGlvbiBmaWVsZCBuYW1lcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5hbWluZ1N0cmF0ZWd5LmVuYWJsZVBsdXJhbGl6YXRpb24oZ2VuZXJhdGlvbk9wdGlvbnMucGx1cmFsaXplTmFtZXMpO1xuICAgIGxldCByZXRWYWwgPSByZW1vdmVJbmRpY2VzR2VuZXJhdGVkQnlUeXBlb3JtKGRiTW9kZWwpO1xuICAgIHJldFZhbCA9IHJlbW92ZUNvbHVtbnNJblJlbGF0aW9uKGRiTW9kZWwpO1xuICAgIHJldFZhbCA9IGFwcGx5TmFtaW5nU3RyYXRlZ3kobmFtaW5nU3RyYXRlZ3ksIGRiTW9kZWwpO1xuICAgIHJldFZhbCA9IGFkZEltcG9ydHNBbmRHZW5lcmF0aW9uT3B0aW9ucyhyZXRWYWwsIGdlbmVyYXRpb25PcHRpb25zKTtcbiAgICByZXRWYWwgPSByZW1vdmVDb2x1bW5EZWZhdWx0UHJvcGVydGllcyhyZXRWYWwsIGRlZmF1bHRWYWx1ZXMpO1xuICAgIHJldHVybiByZXRWYWw7XG59XG5mdW5jdGlvbiByZW1vdmVJbmRpY2VzR2VuZXJhdGVkQnlUeXBlb3JtKGRiTW9kZWw6IEVudGl0eVtdKTogRW50aXR5W10ge1xuICAgIC8vIFRPRE86IFN1cHBvcnQgdHlwZW9ybSBDdXN0b21OYW1pbmdTdHJhdGVneVxuICAgIGNvbnN0IG5hbWluZ1N0cmF0ZWd5ID0gbmV3IERlZmF1bHROYW1pbmdTdHJhdGVneSgpO1xuICAgIGRiTW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgIGVudGl0eS5pbmRpY2VzID0gZW50aXR5LmluZGljZXMuZmlsdGVyKFxuICAgICAgICAgICAgKHYpID0+XG4gICAgICAgICAgICAgICAgIShcbiAgICAgICAgICAgICAgICAgICAgdi5uYW1lLnN0YXJ0c1dpdGgoYHNxbGl0ZV9hdXRvaW5kZXhfYCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHYucHJpbWFyeSAmJiB2Lm5hbWUgPT09IFwiUFJJTUFSWVwiKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcHJpbWFyeUNvbHVtbnMgPSBlbnRpdHkuY29sdW1uc1xuICAgICAgICAgICAgLmZpbHRlcigodikgPT4gdi5wcmltYXJ5KVxuICAgICAgICAgICAgLm1hcCgodikgPT4gdi50c2NOYW1lKTtcbiAgICAgICAgZW50aXR5LmluZGljZXMgPSBlbnRpdHkuaW5kaWNlcy5maWx0ZXIoXG4gICAgICAgICAgICAodikgPT5cbiAgICAgICAgICAgICAgICAhKFxuICAgICAgICAgICAgICAgICAgICB2LnByaW1hcnkgJiZcbiAgICAgICAgICAgICAgICAgICAgdi5uYW1lID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtaW5nU3RyYXRlZ3kucHJpbWFyeUtleU5hbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnRzY05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUNvbHVtbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIGVudGl0eS5yZWxhdGlvbnNcbiAgICAgICAgICAgIC5maWx0ZXIoKHYpID0+IHYuam9pbkNvbHVtbk9wdGlvbnMpXG4gICAgICAgICAgICAuZm9yRWFjaCgocmVsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sdW1uTmFtZXMgPSByZWwuam9pbkNvbHVtbk9wdGlvbnMhLm1hcCgodikgPT4gdi5uYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZHhOYW1lID0gbmFtaW5nU3RyYXRlZ3kucmVsYXRpb25Db25zdHJhaW50TmFtZShcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnRzY05hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWVzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBma05hbWUgPSBuYW1pbmdTdHJhdGVneS5mb3JlaWduS2V5TmFtZShcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnRzY05hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWVzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBlbnRpdHkuaW5kaWNlcyA9IGVudGl0eS5pbmRpY2VzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKHYpID0+IHYubmFtZSAhPT0gaWR4TmFtZSAmJiB2Lm5hbWUgIT09IGZrTmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGJNb2RlbDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUNvbHVtbnNJblJlbGF0aW9uKGRiTW9kZWw6IEVudGl0eVtdKTogRW50aXR5W10ge1xuICAgIGRiTW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgIGVudGl0eS5jb2x1bW5zID0gZW50aXR5LmNvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGNvbCkgPT5cbiAgICAgICAgICAgICAgICAhY29sLmlzVXNlZEluUmVsYXRpb25Bc093bmVyIHx8XG4gICAgICAgICAgICAgICAgY29sLmlzVXNlZEluUmVsYXRpb25Bc1JlZmVyZW5jZWQgfHxcbiAgICAgICAgICAgICAgICBlbnRpdHkuaW5kaWNlcy5zb21lKChpZHgpID0+XG4gICAgICAgICAgICAgICAgICAgIGlkeC5jb2x1bW5zLnNvbWUoKHYpID0+IHYgPT09IGNvbC50c2NOYW1lKVxuICAgICAgICAgICAgICAgICkgfHxcbiAgICAgICAgICAgICAgICBjb2wucHJpbWFyeVxuICAgICAgICApO1xuICAgIH0pO1xuICAgIHJldHVybiBkYk1vZGVsO1xufVxuZnVuY3Rpb24gcmVtb3ZlQ29sdW1uRGVmYXVsdFByb3BlcnRpZXMoXG4gICAgZGJNb2RlbDogRW50aXR5W10sXG4gICAgZGVmYXVsdFZhbHVlczogRGF0YVR5cGVEZWZhdWx0c1xuKTogRW50aXR5W10ge1xuICAgIGlmICghZGVmYXVsdFZhbHVlcykge1xuICAgICAgICByZXR1cm4gZGJNb2RlbDtcbiAgICB9XG4gICAgZGJNb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgZW50aXR5LmNvbHVtbnMuZm9yRWFjaCgoY29sdW1uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZWZWYWwgPSBkZWZhdWx0VmFsdWVzW2NvbHVtbi50c2NUeXBlXTtcbiAgICAgICAgICAgIGlmIChkZWZWYWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICBkZWZWYWwubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLmxlbmd0aCA9PT0gZGVmVmFsLmxlbmd0aFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5sZW5ndGggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMucHJlY2lzaW9uICYmXG4gICAgICAgICAgICAgICAgICAgIGRlZlZhbC5wcmVjaXNpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMucHJlY2lzaW9uID09PSBkZWZWYWwucHJlY2lzaW9uICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLnNjYWxlICYmXG4gICAgICAgICAgICAgICAgICAgIGRlZlZhbC5zY2FsZSAmJlxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4ub3B0aW9ucy5zY2FsZSA9PT0gZGVmVmFsLnNjYWxlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLnByZWNpc2lvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMuc2NhbGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgZGVmVmFsLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5vcHRpb25zLndpZHRoID09PSBkZWZWYWwud2lkdGhcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMud2lkdGggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGJNb2RlbDtcbn1cblxuZnVuY3Rpb24gZmluZEZpbGVJbXBvcnRzKGRiTW9kZWw6IEVudGl0eVtdKSB7XG4gICAgZGJNb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgZW50aXR5LnJlbGF0aW9ucy5mb3JFYWNoKChyZWxhdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHJlbGF0aW9uLnJlbGF0ZWRUYWJsZSAhPT0gZW50aXR5LnRzY05hbWUgJiZcbiAgICAgICAgICAgICAgICAhZW50aXR5LmZpbGVJbXBvcnRzLnNvbWUoKHYpID0+IHYgPT09IHJlbGF0aW9uLnJlbGF0ZWRUYWJsZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGVudGl0eS5maWxlSW1wb3J0cy5wdXNoKHJlbGF0aW9uLnJlbGF0ZWRUYWJsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBkYk1vZGVsO1xufVxuXG5mdW5jdGlvbiBhZGRJbXBvcnRzQW5kR2VuZXJhdGlvbk9wdGlvbnMoXG4gICAgZGJNb2RlbDogRW50aXR5W10sXG4gICAgZ2VuZXJhdGlvbk9wdGlvbnM6IElHZW5lcmF0aW9uT3B0aW9uc1xuKTogRW50aXR5W10ge1xuICAgIGRiTW9kZWwgPSBmaW5kRmlsZUltcG9ydHMoZGJNb2RlbCk7XG4gICAgZGJNb2RlbC5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgZW50aXR5LnJlbGF0aW9ucy5mb3JFYWNoKChyZWxhdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKGdlbmVyYXRpb25PcHRpb25zLmxhenkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlbGF0aW9uLnJlbGF0aW9uT3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZWxhdGlvbi5yZWxhdGlvbk9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVsYXRpb24ucmVsYXRpb25PcHRpb25zLmxhenkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGdlbmVyYXRpb25PcHRpb25zLnNraXBTY2hlbWEpIHtcbiAgICAgICAgICAgIGVudGl0eS5zY2hlbWEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBlbnRpdHkuZGF0YWJhc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdlbmVyYXRpb25PcHRpb25zLmFjdGl2ZVJlY29yZCkge1xuICAgICAgICAgICAgZW50aXR5LmFjdGl2ZVJlY29yZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdlbmVyYXRpb25PcHRpb25zLmdlbmVyYXRlQ29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIGVudGl0eS5nZW5lcmF0ZUNvbnN0cnVjdG9yID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkYk1vZGVsO1xufVxuXG5mdW5jdGlvbiBhcHBseU5hbWluZ1N0cmF0ZWd5KFxuICAgIG5hbWluZ1N0cmF0ZWd5OiB0eXBlb2YgTmFtaW5nU3RyYXRlZ3ksXG4gICAgZGJNb2RlbDogRW50aXR5W11cbik6IEVudGl0eVtdIHtcbiAgICBsZXQgcmV0VmFsID0gY2hhbmdlUmVsYXRpb25OYW1lcyhkYk1vZGVsKTtcbiAgICByZXRWYWwgPSBjaGFuZ2VSZWxhdGlvbklkTmFtZXMocmV0VmFsKTtcbiAgICByZXRWYWwgPSBjaGFuZ2VFbnRpdHlOYW1lcyhyZXRWYWwpO1xuICAgIHJldFZhbCA9IGNoYW5nZUNvbHVtbk5hbWVzKHJldFZhbCk7XG4gICAgcmV0dXJuIHJldFZhbDtcblxuICAgIGZ1bmN0aW9uIGNoYW5nZVJlbGF0aW9uSWROYW1lcyhtb2RlbDogRW50aXR5W10pOiBFbnRpdHlbXSB7XG4gICAgICAgIG1vZGVsLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICAgICAgZW50aXR5LnJlbGF0aW9uSWRzLmZvckVhY2goKHJlbGF0aW9uSWQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGROYW1lID0gcmVsYXRpb25JZC5maWVsZE5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpb24gPSBlbnRpdHkucmVsYXRpb25zLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LmZpZWxkTmFtZSA9PT0gcmVsYXRpb25JZC5yZWxhdGlvbkZpZWxkXG4gICAgICAgICAgICAgICAgKSE7XG4gICAgICAgICAgICAgICAgbGV0IG5ld05hbWUgPSBuYW1pbmdTdHJhdGVneS5yZWxhdGlvbklkTmFtZShcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbmV3TmFtZSA9IFRvbWdVdGlscy5maW5kTmFtZUZvck5ld0ZpZWxkKFxuICAgICAgICAgICAgICAgICAgICBuZXdOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIG9sZE5hbWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGVudGl0eS5pbmRpY2VzLmZvckVhY2goKGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4LmNvbHVtbnMgPSBpbmRleC5jb2x1bW5zLm1hcCgoY29sdW1uMikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjIgPT09IG9sZE5hbWUgPyBuZXdOYW1lIDogY29sdW1uMlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmVsYXRpb25JZC5maWVsZE5hbWUgPSBuZXdOYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGJNb2RlbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VSZWxhdGlvbk5hbWVzKG1vZGVsOiBFbnRpdHlbXSk6IEVudGl0eVtdIHtcbiAgICAgICAgbW9kZWwuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgICAgICBlbnRpdHkucmVsYXRpb25zLmZvckVhY2goKHJlbGF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkTmFtZSA9IHJlbGF0aW9uLmZpZWxkTmFtZTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TmFtZSA9IG5hbWluZ1N0cmF0ZWd5LnJlbGF0aW9uTmFtZShyZWxhdGlvbiwgZW50aXR5KTtcbiAgICAgICAgICAgICAgICBuZXdOYW1lID0gVG9tZ1V0aWxzLmZpbmROYW1lRm9yTmV3RmllbGQoXG4gICAgICAgICAgICAgICAgICAgIG5ld05hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgb2xkTmFtZVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGVkRW50aXR5ID0gbW9kZWwuZmluZChcbiAgICAgICAgICAgICAgICAgICAgKHYpID0+IHYudHNjTmFtZSA9PT0gcmVsYXRpb24ucmVsYXRlZFRhYmxlXG4gICAgICAgICAgICAgICAgKSE7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpb24yID0gcmVsYXRlZEVudGl0eS5yZWxhdGlvbnMuZmluZChcbiAgICAgICAgICAgICAgICAgICAgKHYpID0+IHYuZmllbGROYW1lID09PSByZWxhdGlvbi5yZWxhdGVkRmllbGRcbiAgICAgICAgICAgICAgICApITtcblxuICAgICAgICAgICAgICAgIGVudGl0eS5yZWxhdGlvbklkc1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKCh2KSA9PiB2LnJlbGF0aW9uRmllbGQgPT09IG9sZE5hbWUpXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2LnJlbGF0aW9uRmllbGQgPSBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlbGF0aW9uLmZpZWxkTmFtZSA9IG5ld05hbWU7XG4gICAgICAgICAgICAgICAgcmVsYXRpb24yLnJlbGF0ZWRGaWVsZCA9IG5ld05hbWU7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVsYXRpb24ucmVsYXRpb25PcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5pbmRpY2VzLmZvckVhY2goKGluZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kLmNvbHVtbnMubWFwKChjb2x1bW4yKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjIgPT09IG9sZE5hbWUgPyBuZXdOYW1lIDogY29sdW1uMlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGJNb2RlbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VDb2x1bW5OYW1lcyhtb2RlbDogRW50aXR5W10pOiBFbnRpdHlbXSB7XG4gICAgICAgIG1vZGVsLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICAgICAgZW50aXR5LmNvbHVtbnMuZm9yRWFjaCgoY29sdW1uKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkTmFtZSA9IGNvbHVtbi50c2NOYW1lO1xuICAgICAgICAgICAgICAgIGxldCBuZXdOYW1lID0gbmFtaW5nU3RyYXRlZ3kuY29sdW1uTmFtZShjb2x1bW4udHNjTmFtZSwgY29sdW1uKTtcbiAgICAgICAgICAgICAgICBuZXdOYW1lID0gVG9tZ1V0aWxzLmZpbmROYW1lRm9yTmV3RmllbGQoXG4gICAgICAgICAgICAgICAgICAgIG5ld05hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgb2xkTmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZW50aXR5LmluZGljZXMuZm9yRWFjaCgoaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXguY29sdW1ucyA9IGluZGV4LmNvbHVtbnMubWFwKChjb2x1bW4yKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uMiA9PT0gb2xkTmFtZSA/IG5ld05hbWUgOiBjb2x1bW4yXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4udHNjTmFtZSA9IG5ld05hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hhbmdlRW50aXR5TmFtZXMoZW50aXRpZXM6IEVudGl0eVtdKTogRW50aXR5W10ge1xuICAgICAgICBlbnRpdGllcy5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld05hbWUgPSBuYW1pbmdTdHJhdGVneS5lbnRpdHlOYW1lKGVudGl0eS50c2NOYW1lLCBlbnRpdHkpO1xuICAgICAgICAgICAgZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5MikgPT4ge1xuICAgICAgICAgICAgICAgIGVudGl0eTIucmVsYXRpb25zLmZvckVhY2goKHJlbGF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWxhdGlvbi5yZWxhdGVkVGFibGUgPT09IGVudGl0eS50c2NOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbi5yZWxhdGVkVGFibGUgPSBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVudGl0eS50c2NOYW1lID0gbmV3TmFtZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBlbnRpdGllcztcbiAgICB9XG59XG4iXX0=